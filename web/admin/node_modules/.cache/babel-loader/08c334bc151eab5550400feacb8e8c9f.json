{"remainingRequest":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\src\\components\\editor\\plugins\\imagetools\\plugin.min.js","dependencies":[{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\src\\components\\editor\\plugins\\imagetools\\plugin.min.js","mtime":1651118941000},{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\babel.config.js","mtime":1651118941000},{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659170820870},{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1659170820855},{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1659170823565},{"path":"C:\\Users\\wakk\\Desktop\\ginblog-master\\web\\admin\\node_modules\\eslint-loader\\index.js","mtime":1659170823234}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCJDOi9Vc2Vycy93YWtrL0Rlc2t0b3AvZ2luYmxvZy1tYXN0ZXIvd2ViL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIpLmRlZmF1bHQ7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvd2ViLmltbWVkaWF0ZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkudWludDgtYXJyYXkuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5hdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmNvcHktd2l0aGluLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZXZlcnkuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maWxsLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmlsdGVyLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuZmluZC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmZpbmQtaW5kZXguanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5mb3ItZWFjaC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuaW5kZXgtb2YuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5pdGVyYXRvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LmpvaW4uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5sYXN0LWluZGV4LW9mLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkubWFwLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmVkdWNlLXJpZ2h0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkucmV2ZXJzZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNldC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuc29tZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnNvcnQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zdWJhcnJheS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnR5cGVkLWFycmF5LnRvLWxvY2FsZS1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS50by1zdHJpbmcuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudGVzdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyIpOwoKLyoqCiAqIENvcHlyaWdodCAoYykgVGlueSBUZWNobm9sb2dpZXMsIEluYy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KICogTGljZW5zZWQgdW5kZXIgdGhlIExHUEwgb3IgYSBjb21tZXJjaWFsIGxpY2Vuc2UuCiAqIEZvciBMR1BMIHNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLgogKiBGb3IgY29tbWVyY2lhbCBsaWNlbnNlcyBzZWUgaHR0cHM6Ly93d3cudGlueS5jbG91ZC8KICoKICogVmVyc2lvbjogNS40LjIgKDIwMjAtMDgtMTcpCiAqLwohZnVuY3Rpb24gKHApIHsKICAidXNlIHN0cmljdCI7CgogIHZhciB0LAogICAgICBlLAogICAgICBuLAogICAgICBsID0gZnVuY3Rpb24gbCh0KSB7CiAgICB2YXIgZSA9IHQ7CiAgICByZXR1cm4gewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICByZXR1cm4gZTsKICAgICAgfSwKICAgICAgc2V0OiBmdW5jdGlvbiBzZXQodCkgewogICAgICAgIGUgPSB0OwogICAgICB9CiAgICB9OwogIH0sCiAgICAgIHIgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS5QbHVnaW5NYW5hZ2VyIiksCiAgICAgIGQgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS51dGlsLlRvb2xzIiksCiAgICAgIG8gPSBmdW5jdGlvbiBvKCkge30sCiAgICAgIGYgPSBmdW5jdGlvbiBmKHQpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0OwogICAgfTsKICB9LAogICAgICBpID0gZighMSksCiAgICAgIHUgPSBmKCEwKSwKICAgICAgYSA9IGZ1bmN0aW9uIGEoKSB7CiAgICByZXR1cm4gYzsKICB9LAogICAgICBjID0gKHQgPSBmdW5jdGlvbiB0KF90MikgewogICAgcmV0dXJuIF90Mi5pc05vbmUoKTsKICB9LCB7CiAgICBmb2xkOiBmdW5jdGlvbiBmb2xkKHQsIGUpIHsKICAgICAgcmV0dXJuIHQoKTsKICAgIH0sCiAgICBpczogaSwKICAgIGlzU29tZTogaSwKICAgIGlzTm9uZTogdSwKICAgIGdldE9yOiBuID0gZnVuY3Rpb24gbih0KSB7CiAgICAgIHJldHVybiB0OwogICAgfSwKICAgIGdldE9yVGh1bms6IGUgPSBmdW5jdGlvbiBlKHQpIHsKICAgICAgcmV0dXJuIHQoKTsKICAgIH0sCiAgICBnZXRPckRpZTogZnVuY3Rpb24gZ2V0T3JEaWUodCkgewogICAgICB0aHJvdyBuZXcgRXJyb3IodCB8fCAiZXJyb3I6IGdldE9yRGllIGNhbGxlZCBvbiBub25lLiIpOwogICAgfSwKICAgIGdldE9yTnVsbDogZihudWxsKSwKICAgIGdldE9yVW5kZWZpbmVkOiBmKHVuZGVmaW5lZCksCiAgICBvcjogbiwKICAgIG9yVGh1bms6IGUsCiAgICBtYXA6IGEsCiAgICBlYWNoOiBvLAogICAgYmluZDogYSwKICAgIGV4aXN0czogaSwKICAgIGZvcmFsbDogdSwKICAgIGZpbHRlcjogYSwKICAgIGVxdWFsczogdCwKICAgIGVxdWFsc186IHQsCiAgICB0b0FycmF5OiBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgICByZXR1cm4gW107CiAgICB9LAogICAgdG9TdHJpbmc6IGYoIm5vbmUoKSIpCiAgfSksCiAgICAgIHMgPSBmdW5jdGlvbiBzKG4pIHsKICAgIHZhciB0ID0gZihuKSwKICAgICAgICBlID0gZnVuY3Rpb24gZSgpIHsKICAgICAgcmV0dXJuIG87CiAgICB9LAogICAgICAgIHIgPSBmdW5jdGlvbiByKHQpIHsKICAgICAgcmV0dXJuIHQobik7CiAgICB9LAogICAgICAgIG8gPSB7CiAgICAgIGZvbGQ6IGZ1bmN0aW9uIGZvbGQodCwgZSkgewogICAgICAgIHJldHVybiBlKG4pOwogICAgICB9LAogICAgICBpczogZnVuY3Rpb24gaXModCkgewogICAgICAgIHJldHVybiBuID09PSB0OwogICAgICB9LAogICAgICBpc1NvbWU6IHUsCiAgICAgIGlzTm9uZTogaSwKICAgICAgZ2V0T3I6IHQsCiAgICAgIGdldE9yVGh1bms6IHQsCiAgICAgIGdldE9yRGllOiB0LAogICAgICBnZXRPck51bGw6IHQsCiAgICAgIGdldE9yVW5kZWZpbmVkOiB0LAogICAgICBvcjogZSwKICAgICAgb3JUaHVuazogZSwKICAgICAgbWFwOiBmdW5jdGlvbiBtYXAodCkgewogICAgICAgIHJldHVybiBzKHQobikpOwogICAgICB9LAogICAgICBlYWNoOiBmdW5jdGlvbiBlYWNoKHQpIHsKICAgICAgICB0KG4pOwogICAgICB9LAogICAgICBiaW5kOiByLAogICAgICBleGlzdHM6IHIsCiAgICAgIGZvcmFsbDogciwKICAgICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIodCkgewogICAgICAgIHJldHVybiB0KG4pID8gbyA6IGM7CiAgICAgIH0sCiAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7CiAgICAgICAgcmV0dXJuIFtuXTsKICAgICAgfSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiAic29tZSgiICsgbiArICIpIjsKICAgICAgfSwKICAgICAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHModCkgewogICAgICAgIHJldHVybiB0LmlzKG4pOwogICAgICB9LAogICAgICBlcXVhbHNfOiBmdW5jdGlvbiBlcXVhbHNfKHQsIGUpIHsKICAgICAgICByZXR1cm4gdC5mb2xkKGksIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gZShuLCB0KTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gbzsKICB9LAogICAgICB2ID0gewogICAgc29tZTogcywKICAgIG5vbmU6IGEsCiAgICBmcm9tOiBmdW5jdGlvbiBmcm9tKHQpIHsKICAgICAgcmV0dXJuIG51bGwgPT09IHQgfHwgdCA9PT0gdW5kZWZpbmVkID8gYyA6IHModCk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gbSh0LCBlKSB7CiAgICByZXR1cm4geShwLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImNhbnZhcyIpLCB0LCBlKTsKICB9CgogIGZ1bmN0aW9uIGgodCkgewogICAgdmFyIGUgPSBtKHQud2lkdGgsIHQuaGVpZ2h0KTsKICAgIHJldHVybiBnKGUpLmRyYXdJbWFnZSh0LCAwLCAwKSwgZTsKICB9CgogIGZ1bmN0aW9uIGcodCkgewogICAgcmV0dXJuIHQuZ2V0Q29udGV4dCgiMmQiKTsKICB9CgogIGZ1bmN0aW9uIHkodCwgZSwgbikgewogICAgcmV0dXJuIHQud2lkdGggPSBlLCB0LmhlaWdodCA9IG4sIHQ7CiAgfQoKICB2YXIgdywKICAgICAgYiwKICAgICAgSSwKICAgICAgVCA9IHdpbmRvdy5Qcm9taXNlID8gd2luZG93LlByb21pc2UgOiAoYiA9ICh3ID0gZnVuY3Rpb24gdyh0KSB7CiAgICBpZiAoIm9iamVjdCIgIT0gX3R5cGVvZih0aGlzKSkgdGhyb3cgbmV3IFR5cGVFcnJvcigiUHJvbWlzZXMgbXVzdCBiZSBjb25zdHJ1Y3RlZCB2aWEgbmV3Iik7CiAgICBpZiAoImZ1bmN0aW9uIiAhPSB0eXBlb2YgdCkgdGhyb3cgbmV3IFR5cGVFcnJvcigibm90IGEgZnVuY3Rpb24iKTsKICAgIHRoaXMuX3N0YXRlID0gbnVsbCwgdGhpcy5fdmFsdWUgPSBudWxsLCB0aGlzLl9kZWZlcnJlZHMgPSBbXSwgTCh0LCBfKFUsIHRoaXMpLCBfKEEsIHRoaXMpKTsKICB9KS5pbW1lZGlhdGVGbiB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiB3aW5kb3cuc2V0SW1tZWRpYXRlICYmIHdpbmRvdy5zZXRJbW1lZGlhdGUgfHwgZnVuY3Rpb24gKHQpIHsKICAgIHAuc2V0VGltZW91dCh0LCAxKTsKICB9LCBJID0gQXJyYXkuaXNBcnJheSB8fCBmdW5jdGlvbiAodCkgewogICAgcmV0dXJuICJbb2JqZWN0IEFycmF5XSIgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0KTsKICB9LCB3LnByb3RvdHlwZVsiY2F0Y2giXSA9IGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIHQpOwogIH0sIHcucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAobiwgcikgewogICAgdmFyIG8gPSB0aGlzOwogICAgcmV0dXJuIG5ldyB3KGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIFIuY2FsbChvLCBuZXcgeChuLCByLCB0LCBlKSk7CiAgICB9KTsKICB9LCB3LmFsbCA9IGZ1bmN0aW9uICgpIHsKICAgIGZvciAodmFyIHQgPSBbXSwgZSA9IDA7IGUgPCBhcmd1bWVudHMubGVuZ3RoOyBlKyspIHsKICAgICAgdFtlXSA9IGFyZ3VtZW50c1tlXTsKICAgIH0KCiAgICB2YXIgYyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKDEgPT09IHQubGVuZ3RoICYmIEkodFswXSkgPyB0WzBdIDogdCk7CiAgICByZXR1cm4gbmV3IHcoZnVuY3Rpb24gKG8sIGkpIHsKICAgICAgaWYgKDAgPT09IGMubGVuZ3RoKSByZXR1cm4gbyhbXSk7CiAgICAgIHZhciB1ID0gYy5sZW5ndGg7CgogICAgICBmdW5jdGlvbiBhKGUsIHQpIHsKICAgICAgICB0cnkgewogICAgICAgICAgaWYgKHQgJiYgKCJvYmplY3QiID09IF90eXBlb2YodCkgfHwgImZ1bmN0aW9uIiA9PSB0eXBlb2YgdCkpIHsKICAgICAgICAgICAgdmFyIG4gPSB0LnRoZW47CiAgICAgICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBuKSByZXR1cm4gdm9pZCBuLmNhbGwodCwgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICBhKGUsIHQpOwogICAgICAgICAgICB9LCBpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBjW2VdID0gdCwgMCA9PSAtLXUgJiYgbyhjKTsKICAgICAgICB9IGNhdGNoIChyKSB7CiAgICAgICAgICBpKHIpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZm9yICh2YXIgdCA9IDA7IHQgPCBjLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgYSh0LCBjW3RdKTsKICAgICAgfQogICAgfSk7CiAgfSwgdy5yZXNvbHZlID0gZnVuY3Rpb24gKGUpIHsKICAgIHJldHVybiBlICYmICJvYmplY3QiID09IF90eXBlb2YoZSkgJiYgZS5jb25zdHJ1Y3RvciA9PT0gdyA/IGUgOiBuZXcgdyhmdW5jdGlvbiAodCkgewogICAgICB0KGUpOwogICAgfSk7CiAgfSwgdy5yZWplY3QgPSBmdW5jdGlvbiAobikgewogICAgcmV0dXJuIG5ldyB3KGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIGUobik7CiAgICB9KTsKICB9LCB3LnJhY2UgPSBmdW5jdGlvbiAobykgewogICAgcmV0dXJuIG5ldyB3KGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIGZvciAodmFyIG4gPSAwLCByID0gbzsgbiA8IHIubGVuZ3RoOyBuKyspIHsKICAgICAgICByW25dLnRoZW4odCwgZSk7CiAgICAgIH0KICAgIH0pOwogIH0sIHcpOwoKICBmdW5jdGlvbiBfKHQsIGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0LmFwcGx5KGUsIGFyZ3VtZW50cyk7CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gUihyKSB7CiAgICB2YXIgbyA9IHRoaXM7CiAgICBudWxsICE9PSB0aGlzLl9zdGF0ZSA/IGIoZnVuY3Rpb24gKCkgewogICAgICB2YXIgdCA9IG8uX3N0YXRlID8gci5vbkZ1bGZpbGxlZCA6IHIub25SZWplY3RlZDsKCiAgICAgIGlmIChudWxsICE9PSB0KSB7CiAgICAgICAgdmFyIGU7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBlID0gdChvLl92YWx1ZSk7CiAgICAgICAgfSBjYXRjaCAobikgewogICAgICAgICAgcmV0dXJuIHZvaWQgci5yZWplY3Qobik7CiAgICAgICAgfQoKICAgICAgICByLnJlc29sdmUoZSk7CiAgICAgIH0gZWxzZSAoby5fc3RhdGUgPyByLnJlc29sdmUgOiByLnJlamVjdCkoby5fdmFsdWUpOwogICAgfSkgOiB0aGlzLl9kZWZlcnJlZHMucHVzaChyKTsKICB9CgogIGZ1bmN0aW9uIFUodCkgewogICAgdHJ5IHsKICAgICAgaWYgKHQgPT09IHRoaXMpIHRocm93IG5ldyBUeXBlRXJyb3IoIkEgcHJvbWlzZSBjYW5ub3QgYmUgcmVzb2x2ZWQgd2l0aCBpdHNlbGYuIik7CgogICAgICBpZiAodCAmJiAoIm9iamVjdCIgPT0gX3R5cGVvZih0KSB8fCAiZnVuY3Rpb24iID09IHR5cGVvZiB0KSkgewogICAgICAgIHZhciBlID0gdC50aGVuOwogICAgICAgIGlmICgiZnVuY3Rpb24iID09IHR5cGVvZiBlKSByZXR1cm4gdm9pZCBMKF8oZSwgdCksIF8oVSwgdGhpcyksIF8oQSwgdGhpcykpOwogICAgICB9CgogICAgICB0aGlzLl9zdGF0ZSA9ICEwLCB0aGlzLl92YWx1ZSA9IHQsIEUuY2FsbCh0aGlzKTsKICAgIH0gY2F0Y2ggKG4pIHsKICAgICAgQS5jYWxsKHRoaXMsIG4pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gQSh0KSB7CiAgICB0aGlzLl9zdGF0ZSA9ICExLCB0aGlzLl92YWx1ZSA9IHQsIEUuY2FsbCh0aGlzKTsKICB9CgogIGZ1bmN0aW9uIEUoKSB7CiAgICBmb3IgKHZhciB0ID0gMCwgZSA9IHRoaXMuX2RlZmVycmVkczsgdCA8IGUubGVuZ3RoOyB0KyspIHsKICAgICAgdmFyIG4gPSBlW3RdOwogICAgICBSLmNhbGwodGhpcywgbik7CiAgICB9CgogICAgdGhpcy5fZGVmZXJyZWRzID0gW107CiAgfQoKICBmdW5jdGlvbiB4KHQsIGUsIG4sIHIpIHsKICAgIHRoaXMub25GdWxmaWxsZWQgPSAiZnVuY3Rpb24iID09IHR5cGVvZiB0ID8gdCA6IG51bGwsIHRoaXMub25SZWplY3RlZCA9ICJmdW5jdGlvbiIgPT0gdHlwZW9mIGUgPyBlIDogbnVsbCwgdGhpcy5yZXNvbHZlID0gbiwgdGhpcy5yZWplY3QgPSByOwogIH0KCiAgZnVuY3Rpb24gTCh0LCBlLCBuKSB7CiAgICB2YXIgciA9ICExOwoKICAgIHRyeSB7CiAgICAgIHQoZnVuY3Rpb24gKHQpIHsKICAgICAgICByIHx8IChyID0gITAsIGUodCkpOwogICAgICB9LCBmdW5jdGlvbiAodCkgewogICAgICAgIHIgfHwgKHIgPSAhMCwgbih0KSk7CiAgICAgIH0pOwogICAgfSBjYXRjaCAobykgewogICAgICBpZiAocikgcmV0dXJuOwogICAgICByID0gITAsIG4obyk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBqKHQpIHsKICAgIHZhciBlID0gdC5zcmM7CiAgICByZXR1cm4gKDAgPT09IGUuaW5kZXhPZigiZGF0YToiKSA/IGsgOiBmdW5jdGlvbiBuKHIpIHsKICAgICAgcmV0dXJuIG5ldyBUKGZ1bmN0aW9uICh0LCBuKSB7CiAgICAgICAgdmFyIGUgPSBuZXcgcC5YTUxIdHRwUmVxdWVzdCgpOwogICAgICAgIGUub3BlbigiR0VUIiwgciwgITApLCBlLnJlc3BvbnNlVHlwZSA9ICJibG9iIiwgZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAyMDAgPT09IHRoaXMuc3RhdHVzICYmIHQodGhpcy5yZXNwb25zZSk7CiAgICAgICAgfSwgZS5vbmVycm9yID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdmFyIHQsCiAgICAgICAgICAgICAgZSA9IHRoaXM7CiAgICAgICAgICBuKDAgPT09IHRoaXMuc3RhdHVzID8gKCh0ID0gbmV3IEVycm9yKCJObyBhY2Nlc3MgdG8gZG93bmxvYWQgaW1hZ2UiKSkuY29kZSA9IDE4LCB0Lm5hbWUgPSAiU2VjdXJpdHlFcnJvciIsIHQpIDogbmV3IEVycm9yKCJFcnJvciAiICsgZS5zdGF0dXMgKyAiIGRvd25sb2FkaW5nIGltYWdlIikpOwogICAgICAgIH0sIGUuc2VuZCgpOwogICAgICB9KTsKICAgIH0pKGUpOwogIH0KCiAgZnVuY3Rpb24gQyhhKSB7CiAgICByZXR1cm4gbmV3IFQoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgdmFyIG4gPSBwLlVSTC5jcmVhdGVPYmplY3RVUkwoYSksCiAgICAgICAgICByID0gbmV3IHAuSW1hZ2UoKSwKICAgICAgICAgIG8gPSBmdW5jdGlvbiBvKCkgewogICAgICAgIHIucmVtb3ZlRXZlbnRMaXN0ZW5lcigibG9hZCIsIGkpLCByLnJlbW92ZUV2ZW50TGlzdGVuZXIoImVycm9yIiwgdSk7CiAgICAgIH07CgogICAgICBmdW5jdGlvbiBpKCkgewogICAgICAgIG8oKSwgdChyKTsKICAgICAgfQoKICAgICAgZnVuY3Rpb24gdSgpIHsKICAgICAgICBvKCksIGUoIlVuYWJsZSB0byBsb2FkIGRhdGEgb2YgdHlwZSAiICsgYS50eXBlICsgIjogIiArIG4pOwogICAgICB9CgogICAgICByLmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLCBpKSwgci5hZGRFdmVudExpc3RlbmVyKCJlcnJvciIsIHUpLCByLnNyYyA9IG4sIHIuY29tcGxldGUgJiYgaSgpOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBrKG4pIHsKICAgIHJldHVybiBuZXcgVChmdW5jdGlvbiAodCwgZSkgewogICAgICAoZnVuY3Rpb24gZyh0KSB7CiAgICAgICAgdmFyIGUgPSB0LnNwbGl0KCIsIiksCiAgICAgICAgICAgIG4gPSAvZGF0YTooW147XSspLy5leGVjKGVbMF0pOwogICAgICAgIGlmICghbikgcmV0dXJuIHYubm9uZSgpOwoKICAgICAgICBmb3IgKHZhciByID0gblsxXSwgbyA9IGVbMV0sIGkgPSBwLmF0b2IobyksIHUgPSBpLmxlbmd0aCwgYSA9IE1hdGguY2VpbCh1IC8gMTAyNCksIGMgPSBuZXcgQXJyYXkoYSksIHMgPSAwOyBzIDwgYTsgKytzKSB7CiAgICAgICAgICBmb3IgKHZhciBmID0gMTAyNCAqIHMsIGwgPSBNYXRoLm1pbigxMDI0ICsgZiwgdSksIGQgPSBuZXcgQXJyYXkobCAtIGYpLCBtID0gZiwgaCA9IDA7IG0gPCBsOyArK2gsICsrbSkgewogICAgICAgICAgICBkW2hdID0gaVttXS5jaGFyQ29kZUF0KDApOwogICAgICAgICAgfQoKICAgICAgICAgIGNbc10gPSBuZXcgVWludDhBcnJheShkKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB2LnNvbWUobmV3IHAuQmxvYihjLCB7CiAgICAgICAgICB0eXBlOiByCiAgICAgICAgfSkpOwogICAgICB9KShuKS5mb2xkKGZ1bmN0aW9uICgpIHsKICAgICAgICBlKCJ1cmkgaXMgbm90IGJhc2U2NDogIiArIG4pOwogICAgICB9LCB0KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gTyh0LCByLCBvKSB7CiAgICByZXR1cm4gciA9IHIgfHwgImltYWdlL3BuZyIsIHAuSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLnRvQmxvYiA/IG5ldyBUKGZ1bmN0aW9uIChlLCBuKSB7CiAgICAgIHQudG9CbG9iKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdCA/IGUodCkgOiBuKCk7CiAgICAgIH0sIHIsIG8pOwogICAgfSkgOiBrKHQudG9EYXRhVVJMKHIsIG8pKTsKICB9CgogIGZ1bmN0aW9uIFAodCkgewogICAgcmV0dXJuIEModCkudGhlbihmdW5jdGlvbiAodCkgewogICAgICAhZnVuY3Rpb24gbih0KSB7CiAgICAgICAgcC5VUkwucmV2b2tlT2JqZWN0VVJMKHQuc3JjKTsKICAgICAgfSh0KTsKICAgICAgdmFyIGUgPSBtKGZ1bmN0aW9uIHIodCkgewogICAgICAgIHJldHVybiB0Lm5hdHVyYWxXaWR0aCB8fCB0LndpZHRoOwogICAgICB9KHQpLCBmdW5jdGlvbiBvKHQpIHsKICAgICAgICByZXR1cm4gdC5uYXR1cmFsSGVpZ2h0IHx8IHQuaGVpZ2h0OwogICAgICB9KHQpKTsKICAgICAgcmV0dXJuIGcoZSkuZHJhd0ltYWdlKHQsIDAsIDApLCBlOwogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBTKHQsIGUsIG4pIHsKICAgIHZhciByID0gZS50eXBlOwoKICAgIGZ1bmN0aW9uIG8oZSwgbikgewogICAgICByZXR1cm4gdC50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHIodCwgZSwgbikgewogICAgICAgICAgcmV0dXJuIGUgPSBlIHx8ICJpbWFnZS9wbmciLCB0LnRvRGF0YVVSTChlLCBuKTsKICAgICAgICB9KHQsIGUsIG4pOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBnZXRUeXBlOiBmKHIpLAogICAgICB0b0Jsb2I6IGZ1bmN0aW9uIGkoKSB7CiAgICAgICAgcmV0dXJuIFQucmVzb2x2ZShlKTsKICAgICAgfSwKICAgICAgdG9EYXRhVVJMOiBmKG4pLAogICAgICB0b0Jhc2U2NDogZnVuY3Rpb24gdSgpIHsKICAgICAgICByZXR1cm4gbi5zcGxpdCgiLCIpWzFdOwogICAgICB9LAogICAgICB0b0FkanVzdGVkQmxvYjogZnVuY3Rpb24gYShlLCBuKSB7CiAgICAgICAgcmV0dXJuIHQudGhlbihmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIE8odCwgZSwgbik7CiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIHRvQWRqdXN0ZWREYXRhVVJMOiBvLAogICAgICB0b0FkanVzdGVkQmFzZTY0OiBmdW5jdGlvbiBjKHQsIGUpIHsKICAgICAgICByZXR1cm4gbyh0LCBlKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICByZXR1cm4gdC5zcGxpdCgiLCIpWzFdOwogICAgICAgIH0pOwogICAgICB9LAogICAgICB0b0NhbnZhczogZnVuY3Rpb24gcygpIHsKICAgICAgICByZXR1cm4gdC50aGVuKGgpOwogICAgICB9CiAgICB9OwogIH0KCiAgZnVuY3Rpb24gTihlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gdChuKSB7CiAgICAgIHJldHVybiBuZXcgVChmdW5jdGlvbiAodCkgewogICAgICAgIHZhciBlID0gbmV3IHAuRmlsZVJlYWRlcigpOwogICAgICAgIGUub25sb2FkZW5kID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgdChlLnJlc3VsdCk7CiAgICAgICAgfSwgZS5yZWFkQXNEYXRhVVJMKG4pOwogICAgICB9KTsKICAgIH0oZSkudGhlbihmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gUyhQKGUpLCBlLCB0KTsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gTShlLCB0KSB7CiAgICByZXR1cm4gTyhlLCB0KS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBTKFQucmVzb2x2ZShlKSwgdCwgZS50b0RhdGFVUkwoKSk7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIEIoZSwgbikgewogICAgcmV0dXJuIGUudG9DYW52YXMoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBhKHQsIGUsIG4pIHsKICAgICAgICB2YXIgciA9IG0odC53aWR0aCwgdC5oZWlnaHQpLAogICAgICAgICAgICBvID0gZyhyKSwKICAgICAgICAgICAgaSA9IDAsCiAgICAgICAgICAgIHUgPSAwOwogICAgICAgIDkwICE9PSAobiA9IG4gPCAwID8gMzYwICsgbiA6IG4pICYmIDI3MCAhPT0gbiB8fCB5KHIsIHIuaGVpZ2h0LCByLndpZHRoKTsKICAgICAgICA5MCAhPT0gbiAmJiAxODAgIT09IG4gfHwgKGkgPSByLndpZHRoKTsKICAgICAgICAyNzAgIT09IG4gJiYgMTgwICE9PSBuIHx8ICh1ID0gci5oZWlnaHQpOwogICAgICAgIHJldHVybiBvLnRyYW5zbGF0ZShpLCB1KSwgby5yb3RhdGUobiAqIE1hdGguUEkgLyAxODApLCBvLmRyYXdJbWFnZSh0LCAwLCAwKSwgTShyLCBlKTsKICAgICAgfSh0LCBlLmdldFR5cGUoKSwgbik7CiAgICB9KTsKICB9CgogIGZ1bmN0aW9uIEQoZSwgbikgewogICAgcmV0dXJuIGUudG9DYW52YXMoKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBmdW5jdGlvbiBpKHQsIGUsIG4pIHsKICAgICAgICB2YXIgciA9IG0odC53aWR0aCwgdC5oZWlnaHQpLAogICAgICAgICAgICBvID0gZyhyKTsKICAgICAgICAidiIgPT09IG4gPyAoby5zY2FsZSgxLCAtMSksIG8uZHJhd0ltYWdlKHQsIDAsIC1yLmhlaWdodCkpIDogKG8uc2NhbGUoLTEsIDEpLCBvLmRyYXdJbWFnZSh0LCAtci53aWR0aCwgMCkpOwogICAgICAgIHJldHVybiBNKHIsIGUpOwogICAgICB9KHQsIGUuZ2V0VHlwZSgpLCBuKTsKICAgIH0pOwogIH0KCiAgdmFyIEYsCiAgICAgIEggPSAoRiA9ICJmdW5jdGlvbiIsIGZ1bmN0aW9uICh0KSB7CiAgICByZXR1cm4gX3R5cGVvZih0KSA9PT0gRjsKICB9KSwKICAgICAgcSA9IGZ1bmN0aW9uIHEodCwgZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh0LCBlLCBuKSB7CiAgICAgIGZvciAodmFyIHIgPSAwLCBvID0gdC5sZW5ndGg7IHIgPCBvOyByKyspIHsKICAgICAgICB2YXIgaSA9IHRbcl07CiAgICAgICAgaWYgKGUoaSwgcikpIHJldHVybiB2LnNvbWUoaSk7CiAgICAgICAgaWYgKG4oaSwgcikpIGJyZWFrOwogICAgICB9CgogICAgICByZXR1cm4gdi5ub25lKCk7CiAgICB9KHQsIGUsIGkpOwogIH0sCiAgICAgIHogPSBmdW5jdGlvbiB6KHQpIHsKICAgIHJldHVybiBOKHQpOwogIH0sCiAgICAgICQgPSBmdW5jdGlvbiAkKHQpIHsKICAgIGlmIChudWxsID09PSB0IHx8IHQgPT09IHVuZGVmaW5lZCkgdGhyb3cgbmV3IEVycm9yKCJOb2RlIGNhbm5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZCIpOwogICAgcmV0dXJuIHsKICAgICAgZG9tOiBmKHQpCiAgICB9OwogIH0sCiAgICAgIEcgPSB7CiAgICBmcm9tSHRtbDogZnVuY3Rpb24gZnJvbUh0bWwodCwgZSkgewogICAgICB2YXIgbiA9IChlIHx8IHAuZG9jdW1lbnQpLmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgICBpZiAobi5pbm5lckhUTUwgPSB0LCAhbi5oYXNDaGlsZE5vZGVzKCkgfHwgMSA8IG4uY2hpbGROb2Rlcy5sZW5ndGgpIHRocm93IHAuY29uc29sZS5lcnJvcigiSFRNTCBkb2VzIG5vdCBoYXZlIGEgc2luZ2xlIHJvb3Qgbm9kZSIsIHQpLCBuZXcgRXJyb3IoIkhUTUwgbXVzdCBoYXZlIGEgc2luZ2xlIHJvb3Qgbm9kZSIpOwogICAgICByZXR1cm4gJChuLmNoaWxkTm9kZXNbMF0pOwogICAgfSwKICAgIGZyb21UYWc6IGZ1bmN0aW9uIGZyb21UYWcodCwgZSkgewogICAgICB2YXIgbiA9IChlIHx8IHAuZG9jdW1lbnQpLmNyZWF0ZUVsZW1lbnQodCk7CiAgICAgIHJldHVybiAkKG4pOwogICAgfSwKICAgIGZyb21UZXh0OiBmdW5jdGlvbiBmcm9tVGV4dCh0LCBlKSB7CiAgICAgIHZhciBuID0gKGUgfHwgcC5kb2N1bWVudCkuY3JlYXRlVGV4dE5vZGUodCk7CiAgICAgIHJldHVybiAkKG4pOwogICAgfSwKICAgIGZyb21Eb206ICQsCiAgICBmcm9tUG9pbnQ6IGZ1bmN0aW9uIGZyb21Qb2ludCh0LCBlLCBuKSB7CiAgICAgIHZhciByID0gdC5kb20oKTsKICAgICAgcmV0dXJuIHYuZnJvbShyLmVsZW1lbnRGcm9tUG9pbnQoZSwgbikpLm1hcCgkKTsKICAgIH0KICB9LAogICAgICBKID0gKCJ1bmRlZmluZWQiICE9IHR5cGVvZiBwLndpbmRvdyA/IHAud2luZG93IDogRnVuY3Rpb24oInJldHVybiB0aGlzOyIpKCksIEgocC5FbGVtZW50LnByb3RvdHlwZS5hdHRhY2hTaGFkb3cpICYmIEgocC5Ob2RlLnByb3RvdHlwZS5nZXRSb290Tm9kZSksIGZ1bmN0aW9uICh0LCBlKSB7CiAgICByZXR1cm4gbiA9IGZ1bmN0aW9uIG4odCkgewogICAgICByZXR1cm4gZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICB2YXIgbiA9IHQuZG9tKCk7CiAgICAgICAgaWYgKDEgIT09IG4ubm9kZVR5cGUpIHJldHVybiAhMTsKICAgICAgICB2YXIgciA9IG47CiAgICAgICAgaWYgKHIubWF0Y2hlcyAhPT0gdW5kZWZpbmVkKSByZXR1cm4gci5tYXRjaGVzKGUpOwogICAgICAgIGlmIChyLm1zTWF0Y2hlc1NlbGVjdG9yICE9PSB1bmRlZmluZWQpIHJldHVybiByLm1zTWF0Y2hlc1NlbGVjdG9yKGUpOwogICAgICAgIGlmIChyLndlYmtpdE1hdGNoZXNTZWxlY3RvciAhPT0gdW5kZWZpbmVkKSByZXR1cm4gci53ZWJraXRNYXRjaGVzU2VsZWN0b3IoZSk7CiAgICAgICAgaWYgKHIubW96TWF0Y2hlc1NlbGVjdG9yICE9PSB1bmRlZmluZWQpIHJldHVybiByLm1vek1hdGNoZXNTZWxlY3RvcihlKTsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIkJyb3dzZXIgbGFja3MgbmF0aXZlIHNlbGVjdG9ycyIpOwogICAgICB9KHQsIGUpOwogICAgfSwgcSh0LmRvbSgpLmNoaWxkTm9kZXMsIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiBuKEcuZnJvbURvbSh0KSk7CiAgICB9KS5tYXAoRy5mcm9tRG9tKTsKICAgIHZhciBuOwogIH0pLAogICAgICBLID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5EZWxheSIpLAogICAgICBWID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UudXRpbC5Qcm9taXNlIiksCiAgICAgIFcgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS51dGlsLlVSSSIpLAogICAgICBYID0gZnVuY3Rpb24gWCh0KSB7CiAgICByZXR1cm4gdC5nZXRQYXJhbSgiaW1hZ2V0b29sc19wcm94eSIpOwogIH07CgogIGZ1bmN0aW9uIFEodCkgewogICAgdmFyIGUsIG47CgogICAgZnVuY3Rpb24gcih0KSB7CiAgICAgIHJldHVybiAvXlswLTlcLl0rcHgkLy50ZXN0KHQpOwogICAgfQoKICAgIHJldHVybiBlID0gdC5zdHlsZS53aWR0aCwgbiA9IHQuc3R5bGUuaGVpZ2h0LCBlIHx8IG4gPyByKGUpICYmIHIobikgPyB7CiAgICAgIHc6IHBhcnNlSW50KGUsIDEwKSwKICAgICAgaDogcGFyc2VJbnQobiwgMTApCiAgICB9IDogbnVsbCA6IChlID0gdC53aWR0aCwgbiA9IHQuaGVpZ2h0LCBlICYmIG4gPyB7CiAgICAgIHc6IHBhcnNlSW50KGUsIDEwKSwKICAgICAgaDogcGFyc2VJbnQobiwgMTApCiAgICB9IDogbnVsbCk7CiAgfQoKICBmdW5jdGlvbiBZKHQpIHsKICAgIHJldHVybiB7CiAgICAgIHc6IHQubmF0dXJhbFdpZHRoLAogICAgICBoOiB0Lm5hdHVyYWxIZWlnaHQKICAgIH07CiAgfQoKICB2YXIgWiA9IGZ1bmN0aW9uIFoodCkgewogICAgcmV0dXJuIG51bGwgIT09IHQgJiYgdCAhPT0gdW5kZWZpbmVkOwogIH0sCiAgICAgIHR0ID0gZnVuY3Rpb24gdHQoZSwgciwgbykgewogICAgcmV0dXJuIG5ldyBWKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBuID0gbmV3IHAuWE1MSHR0cFJlcXVlc3QoKTsKICAgICAgbi5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgNCA9PT0gbi5yZWFkeVN0YXRlICYmIHQoewogICAgICAgICAgc3RhdHVzOiBuLnN0YXR1cywKICAgICAgICAgIGJsb2I6IHRoaXMucmVzcG9uc2UKICAgICAgICB9KTsKICAgICAgfSwgbi5vcGVuKCJHRVQiLCBlLCAhMCksIG4ud2l0aENyZWRlbnRpYWxzID0gbywgZC5lYWNoKHIsIGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgICAgbi5zZXRSZXF1ZXN0SGVhZGVyKGUsIHQpOwogICAgICB9KSwgbi5yZXNwb25zZVR5cGUgPSAiYmxvYiIsIG4uc2VuZCgpOwogICAgfSk7CiAgfSwKICAgICAgZXQgPSBbewogICAgY29kZTogNDA0LAogICAgbWVzc2FnZTogIkNvdWxkIG5vdCBmaW5kIEltYWdlIFByb3h5IgogIH0sIHsKICAgIGNvZGU6IDQwMywKICAgIG1lc3NhZ2U6ICJSZWplY3RlZCByZXF1ZXN0IgogIH0sIHsKICAgIGNvZGU6IDAsCiAgICBtZXNzYWdlOiAiSW5jb3JyZWN0IEltYWdlIFByb3h5IFVSTCIKICB9XSwKICAgICAgbnQgPSBbewogICAgdHlwZTogImtleV9taXNzaW5nIiwKICAgIG1lc3NhZ2U6ICJUaGUgcmVxdWVzdCBkaWQgbm90IGluY2x1ZGUgYW4gYXBpIGtleS4iCiAgfSwgewogICAgdHlwZTogImtleV9ub3RfZm91bmQiLAogICAgbWVzc2FnZTogIlRoZSBwcm92aWRlZCBhcGkga2V5IGNvdWxkIG5vdCBiZSBmb3VuZC4iCiAgfSwgewogICAgdHlwZTogImRvbWFpbl9ub3RfdHJ1c3RlZCIsCiAgICBtZXNzYWdlOiAiVGhlIGFwaSBrZXkgaXMgbm90IHZhbGlkIGZvciB0aGUgcmVxdWVzdCBvcmlnaW5zLiIKICB9XSwKICAgICAgcnQgPSBmdW5jdGlvbiBydCh0KSB7CiAgICB2YXIgZSwKICAgICAgICBuID0gKGUgPSB0LCAiSW1hZ2VQcm94eSBIVFRQIGVycm9yOiAiICsgcShldCwgZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIGUgPT09IHQuY29kZTsKICAgIH0pLmZvbGQoZigiVW5rbm93biBJbWFnZVByb3h5IGVycm9yIiksIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0Lm1lc3NhZ2U7CiAgICB9KSk7CiAgICByZXR1cm4gVi5yZWplY3Qobik7CiAgfSwKICAgICAgb3QgPSBmdW5jdGlvbiBvdCh0KSB7CiAgICB2YXIgZSwKICAgICAgICBuLAogICAgICAgIHIgPSBmdW5jdGlvbiAodCkgewogICAgICB2YXIgZTsKCiAgICAgIHRyeSB7CiAgICAgICAgZSA9IEpTT04ucGFyc2UodCk7CiAgICAgIH0gY2F0Y2ggKG4pIHt9CgogICAgICByZXR1cm4gZTsKICAgIH0odCksCiAgICAgICAgbyA9IChlID0gWyJlcnJvciIsICJ0eXBlIl0ucmVkdWNlKGZ1bmN0aW9uICh0LCBlKSB7CiAgICAgIHJldHVybiBaKHQpID8gdFtlXSA6IHVuZGVmaW5lZDsKICAgIH0sIHIpLCBaKGUpID8gZSA6IG51bGwpOwoKICAgIHJldHVybiAiSW1hZ2VQcm94eSBTZXJ2aWNlIGVycm9yOiAiICsgKG8gPyAobiA9IG8sIHEobnQsIGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0LnR5cGUgPT09IG47CiAgICB9KS5mb2xkKGYoIlVua25vd24gc2VydmljZSBlcnJvciIpLCBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdC5tZXNzYWdlOwogICAgfSkpIDogIkludmFsaWQgSlNPTiBpbiBzZXJ2aWNlIGVycm9yIG1lc3NhZ2UiKTsKICB9LAogICAgICBpdCA9IGZ1bmN0aW9uIGl0KHQsIGUpIHsKICAgIHJldHVybiByID0gZSwgbmV3IFYoZnVuY3Rpb24gKG4pIHsKICAgICAgdmFyIHQgPSBuZXcgcC5GaWxlUmVhZGVyKCk7CiAgICAgIHQub25sb2FkID0gZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgZSA9IHQudGFyZ2V0OwogICAgICAgIG4oZS5yZXN1bHQpOwogICAgICB9LCB0LnJlYWRBc1RleHQocik7CiAgICB9KS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlID0gb3QodCk7CiAgICAgIHJldHVybiBWLnJlamVjdChlKTsKICAgIH0pOwogICAgdmFyIHI7CiAgfSwKICAgICAgdXQgPSBmdW5jdGlvbiB1dCh0LCBlKSB7CiAgICB2YXIgbiwKICAgICAgICByLAogICAgICAgIG8sCiAgICAgICAgaSA9IHsKICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLTgiLAogICAgICAidGlueS1hcGkta2V5IjogZQogICAgfTsKICAgIHJldHVybiB0dCgociA9IGUsIG8gPSAtMSA9PT0gKG4gPSB0KS5pbmRleE9mKCI/IikgPyAiPyIgOiAiJiIsIC9bPyZdYXBpS2V5PS8udGVzdChuKSB8fCAhciA/IG4gOiBuICsgbyArICJhcGlLZXk9IiArIGVuY29kZVVSSUNvbXBvbmVudChyKSksIGksICExKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHJldHVybiB0LnN0YXR1cyA8IDIwMCB8fCAzMDAgPD0gdC5zdGF0dXMgPyAoZSA9IHQuc3RhdHVzLCBuID0gdC5ibG9iLCA0MDAgPT09IChyID0gZSkgfHwgNDAzID09PSByIHx8IDUwMCA9PT0gciA/IGl0KDAsIG4pIDogcnQoZSkpIDogVi5yZXNvbHZlKHQuYmxvYik7CiAgICAgIHZhciBlLCBuLCByOwogICAgfSk7CiAgfTsKCiAgdmFyIGF0ID0gZnVuY3Rpb24gYXQodCwgZSwgbikgewogICAgcmV0dXJuIGUgPyB1dCh0LCBlKSA6IGZ1bmN0aW9uIHIodCwgZSkgewogICAgICByZXR1cm4gdHQodCwge30sIGUpLnRoZW4oZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gdC5zdGF0dXMgPCAyMDAgfHwgMzAwIDw9IHQuc3RhdHVzID8gcnQodC5zdGF0dXMpIDogVi5yZXNvbHZlKHQuYmxvYik7CiAgICAgIH0pOwogICAgfSh0LCBuKTsKICB9LAogICAgICBjdCA9IDAsCiAgICAgIHN0ID0gZnVuY3Rpb24gc3QodCkgewogICAgcmV0dXJuIEooRy5mcm9tRG9tKHQpLCAiaW1nIik7CiAgfSwKICAgICAgZnQgPSBmdW5jdGlvbiBmdCh0LCBlKSB7CiAgICByZXR1cm4gdC5kb20uaXMoZSwgImZpZ3VyZSIpOwogIH0sCiAgICAgIGx0ID0gZnVuY3Rpb24gbHQobiwgdCkgewogICAgdmFyIGUgPSBmdW5jdGlvbiBlKHQpIHsKICAgICAgcmV0dXJuIGUgPSB0LCBuLmRvbS5pcyhlLCAiaW1nOm5vdChbZGF0YS1tY2Utb2JqZWN0XSxbZGF0YS1tY2UtcGxhY2Vob2xkZXJdKSIpICYmIChodChuLCB0KSB8fCBndChuLCB0KSB8fCBYKG4pKTsKICAgICAgdmFyIGU7CiAgICB9OwoKICAgIHJldHVybiBmdChuLCB0KSA/IHN0KHQpLm1hcChmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gZSh0LmRvbSgpKSA/IHYuc29tZSh0LmRvbSgpKSA6IHYubm9uZSgpOwogICAgfSkgOiBlKHQpID8gdi5zb21lKHQpIDogdi5ub25lKCk7CiAgfSwKICAgICAgZHQgPSBmdW5jdGlvbiBkdCh0LCBlKSB7CiAgICB0Lm5vdGlmaWNhdGlvbk1hbmFnZXIub3Blbih7CiAgICAgIHRleHQ6IGUsCiAgICAgIHR5cGU6ICJlcnJvciIKICAgIH0pOwogIH0sCiAgICAgIG10ID0gZnVuY3Rpb24gbXQodCkgewogICAgdmFyIGUgPSB0LnNlbGVjdGlvbi5nZXROb2RlKCk7CiAgICByZXR1cm4gZnQodCwgZSkgPyBzdChlKSA6IHYuc29tZShHLmZyb21Eb20oZSkpOwogIH0sCiAgICAgIGh0ID0gZnVuY3Rpb24gaHQodCwgZSkgewogICAgdmFyIG4gPSBlLnNyYzsKICAgIHJldHVybiAwID09PSBuLmluZGV4T2YoImRhdGE6IikgfHwgMCA9PT0gbi5pbmRleE9mKCJibG9iOiIpIHx8IG5ldyBXKG4pLmhvc3QgPT09IHQuZG9jdW1lbnRCYXNlVVJJLmhvc3Q7CiAgfSwKICAgICAgZ3QgPSBmdW5jdGlvbiBndCh0LCBlKSB7CiAgICByZXR1cm4gLTEgIT09IGQuaW5BcnJheSh0LmdldFBhcmFtKCJpbWFnZXRvb2xzX2NvcnNfaG9zdHMiLCBbXSwgInN0cmluZ1tdIiksIG5ldyBXKGUuc3JjKS5ob3N0KTsKICB9LAogICAgICBwdCA9IGZ1bmN0aW9uIHB0KHQsIGUpIHsKICAgIHZhciBuLAogICAgICAgIHIsCiAgICAgICAgbywKICAgICAgICBpLAogICAgICAgIHUgPSBlLnNyYzsKICAgIHJldHVybiBndCh0LCBlKSA/IGF0KGUuc3JjLCBudWxsLCAociA9IHQsIG8gPSBlLCAtMSAhPT0gZC5pbkFycmF5KHIuZ2V0UGFyYW0oImltYWdldG9vbHNfY3JlZGVudGlhbHNfaG9zdHMiLCBbXSwgInN0cmluZ1tdIiksIG5ldyBXKG8uc3JjKS5ob3N0KSkpIDogaHQodCwgZSkgPyBqKGUpIDogKHUgPSBYKHQpLCB1ICs9ICgtMSA9PT0gdS5pbmRleE9mKCI/IikgPyAiPyIgOiAiJiIpICsgInVybD0iICsgZW5jb2RlVVJJQ29tcG9uZW50KGUuc3JjKSwgbiA9IChpID0gdCkuZ2V0UGFyYW0oImFwaV9rZXkiLCBpLmdldFBhcmFtKCJpbWFnZXRvb2xzX2FwaV9rZXkiLCAiIiwgInN0cmluZyIpLCAic3RyaW5nIiksIGF0KHUsIG4sICExKSk7CiAgfSwKICAgICAgdnQgPSBmdW5jdGlvbiB2dCh0LCBlKSB7CiAgICByZXR1cm4gbiA9IHQsIHYuZnJvbShuLmdldFBhcmFtKCJpbWFnZXRvb2xzX2ZldGNoX2ltYWdlIiwgbnVsbCwgImZ1bmN0aW9uIikpLmZvbGQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gcHQodCwgZSk7CiAgICB9LCBmdW5jdGlvbiAodCkgewogICAgICByZXR1cm4gdChlKTsKICAgIH0pOwogICAgdmFyIG47CiAgfSwKICAgICAgeXQgPSBmdW5jdGlvbiB5dCh0LCBlKSB7CiAgICB2YXIgbiA9IHQuZWRpdG9yVXBsb2FkLmJsb2JDYWNoZS5nZXRCeVVyaShlLnNyYyk7CiAgICByZXR1cm4gbiA/IFYucmVzb2x2ZShuLmJsb2IoKSkgOiB2dCh0LCBlKTsKICB9LAogICAgICB3dCA9IGZ1bmN0aW9uIHd0KHQpIHsKICAgIEsuY2xlYXJUaW1lb3V0KHQuZ2V0KCkpOwogIH0sCiAgICAgIGJ0ID0gZnVuY3Rpb24gYnQoYSwgYywgcywgZiwgbCwgZCkgewogICAgcmV0dXJuIGMudG9CbG9iKCkudGhlbihmdW5jdGlvbiAodCkgewogICAgICB2YXIgZSwKICAgICAgICAgIG4sCiAgICAgICAgICBvLAogICAgICAgICAgciwKICAgICAgICAgIGksCiAgICAgICAgICB1ID0gYS5lZGl0b3JVcGxvYWQuYmxvYkNhY2hlOwogICAgICByZXR1cm4gZSA9IGwuc3JjLCBhLmdldFBhcmFtKCJpbWFnZXNfcmV1c2VfZmlsZW5hbWUiLCAhMSwgImJvb2xlYW4iKSAmJiAobiA9IChvID0gdS5nZXRCeVVyaShlKSkgPyAoZSA9IG8udXJpKCksIG8ubmFtZSgpKSA6IChyID0gYSwgKGkgPSBlLm1hdGNoKC9cLyhbXlwvXD9dKyk/XC4oPzpqcGVnfGpwZ3xwbmd8Z2lmKSg/Olw/fCQpL2kpKSA/IHIuZG9tLmVuY29kZShpWzFdKSA6IG51bGwpKSwgbyA9IHUuY3JlYXRlKHsKICAgICAgICBpZDogImltYWdldG9vbHMiICsgY3QrKywKICAgICAgICBibG9iOiB0LAogICAgICAgIGJhc2U2NDogYy50b0Jhc2U2NCgpLAogICAgICAgIHVyaTogZSwKICAgICAgICBuYW1lOiBuCiAgICAgIH0pLCB1LmFkZChvKSwgYS51bmRvTWFuYWdlci50cmFuc2FjdChmdW5jdGlvbiAoKSB7CiAgICAgICAgYS4kKGwpLm9uKCJsb2FkIiwgZnVuY3Rpb24gcigpIHsKICAgICAgICAgIHZhciB0LCBlLCBuOwogICAgICAgICAgYS4kKGwpLm9mZigibG9hZCIsIHIpLCBhLm5vZGVDaGFuZ2VkKCksIHMgPyBhLmVkaXRvclVwbG9hZC51cGxvYWRJbWFnZXNBdXRvKCkgOiAod3QoZiksIHQgPSBhLCBlID0gZiwgbiA9IEsuc2V0RWRpdG9yVGltZW91dCh0LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHQuZWRpdG9yVXBsb2FkLnVwbG9hZEltYWdlc0F1dG8oKTsKICAgICAgICAgIH0sIHQuZ2V0UGFyYW0oImltYWdlc191cGxvYWRfdGltZW91dCIsIDNlNCwgIm51bWJlciIpKSwgZS5zZXQobikpOwogICAgICAgIH0pLCBkICYmIGEuJChsKS5hdHRyKHsKICAgICAgICAgIHdpZHRoOiBkLncsCiAgICAgICAgICBoZWlnaHQ6IGQuaAogICAgICAgIH0pLCBhLiQobCkuYXR0cih7CiAgICAgICAgICBzcmM6IG8uYmxvYlVyaSgpCiAgICAgICAgfSkucmVtb3ZlQXR0cigiZGF0YS1tY2Utc3JjIik7CiAgICAgIH0pLCBvOwogICAgfSk7CiAgfSwKICAgICAgSXQgPSBmdW5jdGlvbiBJdChuLCByLCB0LCBvKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gbXQobikuZm9sZChmdW5jdGlvbiAoKSB7CiAgICAgICAgZHQobiwgIkNvdWxkIG5vdCBmaW5kIHNlbGVjdGVkIGltYWdlIik7CiAgICAgIH0sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIG4uX3NjYW5Gb3JJbWFnZXMoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB5dChuLCBlLmRvbSgpKTsKICAgICAgICB9KS50aGVuKHopLnRoZW4odCkudGhlbihmdW5jdGlvbiAodCkgewogICAgICAgICAgcmV0dXJuIGJ0KG4sIHQsICExLCByLCBlLmRvbSgpLCBvKTsKICAgICAgICB9LCBmdW5jdGlvbiAodCkgewogICAgICAgICAgZHQobiwgdCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfTsKICB9LAogICAgICBUdCA9IGZ1bmN0aW9uIFR0KGUsIG4sIHIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciB0ID0gbXQoZSkuZm9sZChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIGUgPSBRKHQuZG9tKCkpOwogICAgICAgIHJldHVybiBlID8gewogICAgICAgICAgdzogZS5oLAogICAgICAgICAgaDogZS53CiAgICAgICAgfSA6IG51bGw7CiAgICAgIH0pOwogICAgICByZXR1cm4gSXQoZSwgbiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gQih0LCByKTsKICAgICAgfSwgdCkoKTsKICAgIH07CiAgfSwKICAgICAgX3QgPSBmdW5jdGlvbiBfdCh0LCBlLCBuKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gSXQodCwgZSwgZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gRCh0LCBuKTsKICAgICAgfSkoKTsKICAgIH07CiAgfSwKICAgICAgUnQgPSBmdW5jdGlvbiBSdChlLCBuLCByLCBpLCB1KSB7CiAgICByZXR1cm4gQyh1KS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgIHZhciBlID0gWSh0KTsKICAgICAgcmV0dXJuIGkudyA9PT0gZS53ICYmIGkuaCA9PT0gZS5oIHx8IFEocikgJiYgZnVuY3Rpb24gbyh0LCBlKSB7CiAgICAgICAgdmFyIG4sIHI7CiAgICAgICAgZSAmJiAobiA9IHQuc3R5bGUud2lkdGgsIHIgPSB0LnN0eWxlLmhlaWdodCwgKG4gfHwgcikgJiYgKHQuc3R5bGUud2lkdGggPSBlLncgKyAicHgiLCB0LnN0eWxlLmhlaWdodCA9IGUuaCArICJweCIsIHQucmVtb3ZlQXR0cmlidXRlKCJkYXRhLW1jZS1zdHlsZSIpKSwgbiA9IHQud2lkdGgsIHIgPSB0LmhlaWdodCwgKG4gfHwgcikgJiYgKHQuc2V0QXR0cmlidXRlKCJ3aWR0aCIsIGUudyksIHQuc2V0QXR0cmlidXRlKCJoZWlnaHQiLCBlLmgpKSk7CiAgICAgIH0ociwgZSksIHAuVVJMLnJldm9rZU9iamVjdFVSTCh0LnNyYyksIHU7CiAgICB9KS50aGVuKHopLnRoZW4oZnVuY3Rpb24gKHQpIHsKICAgICAgcmV0dXJuIGJ0KGUsIHQsICEwLCBuLCByKTsKICAgIH0sIGZ1bmN0aW9uICgpIHt9KTsKICB9LAogICAgICBVdCA9IGZ1bmN0aW9uIFV0KGksIHUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciByID0gbXQoaSksCiAgICAgICAgICBvID0gci5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICByZXR1cm4gWSh0LmRvbSgpKTsKICAgICAgfSk7CiAgICAgIG10KGkpLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBsdChpLCBlLmRvbSgpKS5lYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICB5dChpLCBlLmRvbSgpKS50aGVuKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHZhciBlLAogICAgICAgICAgICAgICAgbiA9IHsKICAgICAgICAgICAgICBibG9iOiBlID0gdCwKICAgICAgICAgICAgICB1cmw6IHAuVVJMLmNyZWF0ZU9iamVjdFVSTChlKQogICAgICAgICAgICB9OwogICAgICAgICAgICBpLndpbmRvd01hbmFnZXIub3Blbih7CiAgICAgICAgICAgICAgdGl0bGU6ICJFZGl0IEltYWdlIiwKICAgICAgICAgICAgICBzaXplOiAibGFyZ2UiLAogICAgICAgICAgICAgIGJvZHk6IHsKICAgICAgICAgICAgICAgIHR5cGU6ICJwYW5lbCIsCiAgICAgICAgICAgICAgICBpdGVtczogW3sKICAgICAgICAgICAgICAgICAgdHlwZTogImltYWdldG9vbHMiLAogICAgICAgICAgICAgICAgICBuYW1lOiAiaW1hZ2V0b29scyIsCiAgICAgICAgICAgICAgICAgIGxhYmVsOiAiRWRpdCBJbWFnZSIsCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZTogbgogICAgICAgICAgICAgICAgfV0KICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGJ1dHRvbnM6IFt7CiAgICAgICAgICAgICAgICB0eXBlOiAiY2FuY2VsIiwKICAgICAgICAgICAgICAgIG5hbWU6ICJjYW5jZWwiLAogICAgICAgICAgICAgICAgdGV4dDogIkNhbmNlbCIKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICAgICAgICAgIG5hbWU6ICJzYXZlIiwKICAgICAgICAgICAgICAgIHRleHQ6ICJTYXZlIiwKICAgICAgICAgICAgICAgIHByaW1hcnk6ICEwLAogICAgICAgICAgICAgICAgZGlzYWJsZWQ6ICEwCiAgICAgICAgICAgICAgfV0sCiAgICAgICAgICAgICAgb25TdWJtaXQ6IGZ1bmN0aW9uIG9uU3VibWl0KHQpIHsKICAgICAgICAgICAgICAgIHZhciBuID0gdC5nZXREYXRhKCkuaW1hZ2V0b29scy5ibG9iOwogICAgICAgICAgICAgICAgci5lYWNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIG8uZWFjaChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICAgIFJ0KGksIHUsIGUuZG9tKCksIHQsIG4pOwogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0pLCB0LmNsb3NlKCk7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7fSwKICAgICAgICAgICAgICBvbkFjdGlvbjogZnVuY3Rpb24gb25BY3Rpb24odCwgZSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChlLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAic2F2ZS1zdGF0ZSI6CiAgICAgICAgICAgICAgICAgICAgZS52YWx1ZSA/IHQuZW5hYmxlKCJzYXZlIikgOiB0LmRpc2FibGUoInNhdmUiKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgIGNhc2UgImRpc2FibGUiOgogICAgICAgICAgICAgICAgICAgIHQuZGlzYWJsZSgic2F2ZSIpLCB0LmRpc2FibGUoImNhbmNlbCIpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgY2FzZSAiZW5hYmxlIjoKICAgICAgICAgICAgICAgICAgICB0LmVuYWJsZSgiY2FuY2VsIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH07CiAgfTsKCiAgIWZ1bmN0aW9uIEF0KCkgewogICAgci5hZGQoImltYWdldG9vbHMiLCBmdW5jdGlvbiAodCkgewogICAgICB2YXIgbiwKICAgICAgICAgIGUsCiAgICAgICAgICByLAogICAgICAgICAgbywKICAgICAgICAgIGksCiAgICAgICAgICB1LAogICAgICAgICAgYSwKICAgICAgICAgIGMsCiAgICAgICAgICBzID0gbCgwKSwKICAgICAgICAgIGYgPSBsKG51bGwpOwogICAgICBuID0gdCwgZSA9IHMsIGQuZWFjaCh7CiAgICAgICAgbWNlSW1hZ2VSb3RhdGVMZWZ0OiBUdChuLCBlLCAtOTApLAogICAgICAgIG1jZUltYWdlUm90YXRlUmlnaHQ6IFR0KG4sIGUsIDkwKSwKICAgICAgICBtY2VJbWFnZUZsaXBWZXJ0aWNhbDogX3QobiwgZSwgInYiKSwKICAgICAgICBtY2VJbWFnZUZsaXBIb3Jpem9udGFsOiBfdChuLCBlLCAiaCIpLAogICAgICAgIG1jZUVkaXRJbWFnZTogVXQobiwgZSkKICAgICAgfSwgZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgICBuLmFkZENvbW1hbmQoZSwgdCk7CiAgICAgIH0pLCBvID0gZnVuY3Rpb24gbyh0KSB7CiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiByLmV4ZWNDb21tYW5kKHQpOwogICAgICAgIH07CiAgICAgIH0sIChyID0gdCkudWkucmVnaXN0cnkuYWRkQnV0dG9uKCJyb3RhdGVsZWZ0IiwgewogICAgICAgIHRvb2x0aXA6ICJSb3RhdGUgY291bnRlcmNsb2Nrd2lzZSIsCiAgICAgICAgaWNvbjogInJvdGF0ZS1sZWZ0IiwKICAgICAgICBvbkFjdGlvbjogbygibWNlSW1hZ2VSb3RhdGVMZWZ0IikKICAgICAgfSksIHIudWkucmVnaXN0cnkuYWRkQnV0dG9uKCJyb3RhdGVyaWdodCIsIHsKICAgICAgICB0b29sdGlwOiAiUm90YXRlIGNsb2Nrd2lzZSIsCiAgICAgICAgaWNvbjogInJvdGF0ZS1yaWdodCIsCiAgICAgICAgb25BY3Rpb246IG8oIm1jZUltYWdlUm90YXRlUmlnaHQiKQogICAgICB9KSwgci51aS5yZWdpc3RyeS5hZGRCdXR0b24oImZsaXB2IiwgewogICAgICAgIHRvb2x0aXA6ICJGbGlwIHZlcnRpY2FsbHkiLAogICAgICAgIGljb246ICJmbGlwLXZlcnRpY2FsbHkiLAogICAgICAgIG9uQWN0aW9uOiBvKCJtY2VJbWFnZUZsaXBWZXJ0aWNhbCIpCiAgICAgIH0pLCByLnVpLnJlZ2lzdHJ5LmFkZEJ1dHRvbigiZmxpcGgiLCB7CiAgICAgICAgdG9vbHRpcDogIkZsaXAgaG9yaXpvbnRhbGx5IiwKICAgICAgICBpY29uOiAiZmxpcC1ob3Jpem9udGFsbHkiLAogICAgICAgIG9uQWN0aW9uOiBvKCJtY2VJbWFnZUZsaXBIb3Jpem9udGFsIikKICAgICAgfSksIHIudWkucmVnaXN0cnkuYWRkQnV0dG9uKCJlZGl0aW1hZ2UiLCB7CiAgICAgICAgdG9vbHRpcDogIkVkaXQgaW1hZ2UiLAogICAgICAgIGljb246ICJlZGl0LWltYWdlIiwKICAgICAgICBvbkFjdGlvbjogbygibWNlRWRpdEltYWdlIiksCiAgICAgICAgb25TZXR1cDogZnVuY3Rpb24gb25TZXR1cChuKSB7CiAgICAgICAgICB2YXIgdCA9IGZ1bmN0aW9uIHQoKSB7CiAgICAgICAgICAgIG10KHIpLmVhY2goZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICB2YXIgZSA9IGx0KHIsIHQuZG9tKCkpLmlzTm9uZSgpOwogICAgICAgICAgICAgIG4uc2V0RGlzYWJsZWQoZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKCiAgICAgICAgICByZXR1cm4gci5vbigiTm9kZUNoYW5nZSIsIHQpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHIub2ZmKCJOb2RlQ2hhbmdlIiwgdCk7CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSksIHIudWkucmVnaXN0cnkuYWRkQnV0dG9uKCJpbWFnZW9wdGlvbnMiLCB7CiAgICAgICAgdG9vbHRpcDogIkltYWdlIG9wdGlvbnMiLAogICAgICAgIGljb246ICJpbWFnZS1vcHRpb25zIiwKICAgICAgICBvbkFjdGlvbjogbygibWNlSW1hZ2UiKQogICAgICB9KSwgci51aS5yZWdpc3RyeS5hZGRDb250ZXh0TWVudSgiaW1hZ2V0b29scyIsIHsKICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0KSB7CiAgICAgICAgICByZXR1cm4gbHQociwgdCkuZm9sZChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBbXTsKICAgICAgICAgIH0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgIHRleHQ6ICJFZGl0IGltYWdlIiwKICAgICAgICAgICAgICBpY29uOiAiZWRpdC1pbWFnZSIsCiAgICAgICAgICAgICAgb25BY3Rpb246IG8oIm1jZUVkaXRJbWFnZSIpCiAgICAgICAgICAgIH1dOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KSwgKGkgPSB0KS51aS5yZWdpc3RyeS5hZGRDb250ZXh0VG9vbGJhcigiaW1hZ2V0b29scyIsIHsKICAgICAgICBpdGVtczogaS5nZXRQYXJhbSgiaW1hZ2V0b29sc190b29sYmFyIiwgInJvdGF0ZWxlZnQgcm90YXRlcmlnaHQgZmxpcHYgZmxpcGggZWRpdGltYWdlIGltYWdlb3B0aW9ucyIpLAogICAgICAgIHByZWRpY2F0ZTogZnVuY3Rpb24gcHJlZGljYXRlKHQpIHsKICAgICAgICAgIHJldHVybiBsdChpLCB0KS5pc1NvbWUoKTsKICAgICAgICB9LAogICAgICAgIHBvc2l0aW9uOiAibm9kZSIsCiAgICAgICAgc2NvcGU6ICJub2RlIgogICAgICB9KSwgYSA9IHMsIGMgPSBmLCAodSA9IHQpLm9uKCJOb2RlQ2hhbmdlIiwgZnVuY3Rpb24gKHQpIHsKICAgICAgICB2YXIgZSA9IGMuZ2V0KCk7CiAgICAgICAgZSAmJiBlLnNyYyAhPT0gdC5lbGVtZW50LnNyYyAmJiAod3QoYSksIHUuZWRpdG9yVXBsb2FkLnVwbG9hZEltYWdlc0F1dG8oKSwgYy5zZXQobnVsbCkpLCBsdCh1LCB0LmVsZW1lbnQpLmVhY2goYy5zZXQpOwogICAgICB9KTsKICAgIH0pOwogIH0oKTsKfSh3aW5kb3cpOw=="},{"version":3,"sources":["C:/Users/wakk/Desktop/ginblog-master/web/admin/src/components/editor/plugins/imagetools/plugin.min.js"],"names":["p","t","e","n","l","get","set","r","tinymce","util","Tools","resolve","d","o","f","i","u","a","c","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","s","v","some","none","from","m","y","document","createElement","h","width","height","g","drawImage","getContext","w","b","I","T","window","Promise","TypeError","_state","_value","_deferreds","L","_","U","A","immediateFn","setImmediate","setTimeout","Array","isArray","Object","prototype","call","then","R","x","all","arguments","length","slice","constructor","reject","race","apply","onFulfilled","onRejected","push","E","j","src","indexOf","k","XMLHttpRequest","open","responseType","onload","status","response","onerror","code","name","send","C","URL","createObjectURL","Image","removeEventListener","type","addEventListener","complete","split","exec","atob","Math","ceil","min","charCodeAt","Uint8Array","Blob","O","HTMLCanvasElement","toBlob","toDataURL","P","revokeObjectURL","naturalWidth","naturalHeight","S","getType","toBase64","toAdjustedBlob","toAdjustedDataURL","toAdjustedBase64","toCanvas","N","FileReader","onloadend","result","readAsDataURL","M","B","translate","rotate","PI","D","scale","F","H","q","z","$","dom","G","fromHtml","innerHTML","hasChildNodes","childNodes","console","error","fromTag","fromText","createTextNode","fromDom","fromPoint","elementFromPoint","J","Function","Element","attachShadow","Node","getRootNode","nodeType","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","K","V","W","X","getParam","Q","test","style","parseInt","Y","Z","tt","onreadystatechange","readyState","blob","withCredentials","setRequestHeader","et","message","nt","rt","ot","JSON","parse","reduce","it","target","readAsText","ut","encodeURIComponent","at","ct","st","ft","lt","ht","gt","dt","notificationManager","text","mt","selection","getNode","host","documentBaseURI","inArray","pt","vt","yt","editorUpload","blobCache","getByUri","wt","clearTimeout","bt","uri","match","encode","create","id","base64","add","undoManager","transact","on","off","nodeChanged","uploadImagesAuto","setEditorTimeout","attr","blobUri","removeAttr","It","_scanForImages","Tt","_t","Rt","removeAttribute","setAttribute","Ut","url","windowManager","title","size","body","items","label","currentState","buttons","primary","disabled","onSubmit","getData","imagetools","close","onCancel","onAction","value","enable","disable","At","mceImageRotateLeft","mceImageRotateRight","mceImageFlipVertical","mceImageFlipHorizontal","mceEditImage","addCommand","execCommand","ui","registry","addButton","tooltip","icon","onSetup","setDisabled","addContextMenu","update","addContextToolbar","predicate","position","scope","element"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.2 (2020-08-17)\n */\n!function(p){\"use strict\";var t,e,n,l=function(t){var e=t;return{get:function(){return e},set:function(t){e=t}}},r=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),d=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),o=function(){},f=function(t){return function(){return t}},i=f(!1),u=f(!0),a=function(){return c},c=(t=function(t){return t.isNone()},{fold:function(t,e){return t()},is:i,isSome:i,isNone:u,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||\"error: getOrDie called on none.\")},getOrNull:f(null),getOrUndefined:f(undefined),or:n,orThunk:e,map:a,each:o,bind:a,exists:i,forall:u,filter:a,equals:t,equals_:t,toArray:function(){return[]},toString:f(\"none()\")}),s=function(n){var t=f(n),e=function(){return o},r=function(t){return t(n)},o={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:u,isNone:i,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return s(t(n))},each:function(t){t(n)},bind:r,exists:r,forall:r,filter:function(t){return t(n)?o:c},toArray:function(){return[n]},toString:function(){return\"some(\"+n+\")\"},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(i,function(t){return e(n,t)})}};return o},v={some:s,none:a,from:function(t){return null===t||t===undefined?c:s(t)}};function m(t,e){return y(p.document.createElement(\"canvas\"),t,e)}function h(t){var e=m(t.width,t.height);return g(e).drawImage(t,0,0),e}function g(t){return t.getContext(\"2d\")}function y(t,e,n){return t.width=e,t.height=n,t}var w,b,I,T=window.Promise?window.Promise:(b=(w=function(t){if(\"object\"!=typeof this)throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof t)throw new TypeError(\"not a function\");this._state=null,this._value=null,this._deferreds=[],L(t,_(U,this),_(A,this))}).immediateFn||\"function\"==typeof window.setImmediate&&window.setImmediate||function(t){p.setTimeout(t,1)},I=Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)},w.prototype[\"catch\"]=function(t){return this.then(null,t)},w.prototype.then=function(n,r){var o=this;return new w(function(t,e){R.call(o,new x(n,r,t,e))})},w.all=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var c=Array.prototype.slice.call(1===t.length&&I(t[0])?t[0]:t);return new w(function(o,i){if(0===c.length)return o([]);var u=c.length;function a(e,t){try{if(t&&(\"object\"==typeof t||\"function\"==typeof t)){var n=t.then;if(\"function\"==typeof n)return void n.call(t,function(t){a(e,t)},i)}c[e]=t,0==--u&&o(c)}catch(r){i(r)}}for(var t=0;t<c.length;t++)a(t,c[t])})},w.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===w?e:new w(function(t){t(e)})},w.reject=function(n){return new w(function(t,e){e(n)})},w.race=function(o){return new w(function(t,e){for(var n=0,r=o;n<r.length;n++)r[n].then(t,e)})},w);function _(t,e){return function(){return t.apply(e,arguments)}}function R(r){var o=this;null!==this._state?b(function(){var t=o._state?r.onFulfilled:r.onRejected;if(null!==t){var e;try{e=t(o._value)}catch(n){return void r.reject(n)}r.resolve(e)}else(o._state?r.resolve:r.reject)(o._value)}):this._deferreds.push(r)}function U(t){try{if(t===this)throw new TypeError(\"A promise cannot be resolved with itself.\");if(t&&(\"object\"==typeof t||\"function\"==typeof t)){var e=t.then;if(\"function\"==typeof e)return void L(_(e,t),_(U,this),_(A,this))}this._state=!0,this._value=t,E.call(this)}catch(n){A.call(this,n)}}function A(t){this._state=!1,this._value=t,E.call(this)}function E(){for(var t=0,e=this._deferreds;t<e.length;t++){var n=e[t];R.call(this,n)}this._deferreds=[]}function x(t,e,n,r){this.onFulfilled=\"function\"==typeof t?t:null,this.onRejected=\"function\"==typeof e?e:null,this.resolve=n,this.reject=r}function L(t,e,n){var r=!1;try{t(function(t){r||(r=!0,e(t))},function(t){r||(r=!0,n(t))})}catch(o){if(r)return;r=!0,n(o)}}function j(t){var e=t.src;return(0===e.indexOf(\"data:\")?k:function n(r){return new T(function(t,n){var e=new p.XMLHttpRequest;e.open(\"GET\",r,!0),e.responseType=\"blob\",e.onload=function(){200===this.status&&t(this.response)},e.onerror=function(){var t,e=this;n(0===this.status?((t=new Error(\"No access to download image\")).code=18,t.name=\"SecurityError\",t):new Error(\"Error \"+e.status+\" downloading image\"))},e.send()})})(e)}function C(a){return new T(function(t,e){var n=p.URL.createObjectURL(a),r=new p.Image,o=function(){r.removeEventListener(\"load\",i),r.removeEventListener(\"error\",u)};function i(){o(),t(r)}function u(){o(),e(\"Unable to load data of type \"+a.type+\": \"+n)}r.addEventListener(\"load\",i),r.addEventListener(\"error\",u),r.src=n,r.complete&&i()})}function k(n){return new T(function(t,e){(function g(t){var e=t.split(\",\"),n=/data:([^;]+)/.exec(e[0]);if(!n)return v.none();for(var r=n[1],o=e[1],i=p.atob(o),u=i.length,a=Math.ceil(u/1024),c=new Array(a),s=0;s<a;++s){for(var f=1024*s,l=Math.min(1024+f,u),d=new Array(l-f),m=f,h=0;m<l;++h,++m)d[h]=i[m].charCodeAt(0);c[s]=new Uint8Array(d)}return v.some(new p.Blob(c,{type:r}))})(n).fold(function(){e(\"uri is not base64: \"+n)},t)})}function O(t,r,o){return r=r||\"image/png\",p.HTMLCanvasElement.prototype.toBlob?new T(function(e,n){t.toBlob(function(t){t?e(t):n()},r,o)}):k(t.toDataURL(r,o))}function P(t){return C(t).then(function(t){!function n(t){p.URL.revokeObjectURL(t.src)}(t);var e=m(function r(t){return t.naturalWidth||t.width}(t),function o(t){return t.naturalHeight||t.height}(t));return g(e).drawImage(t,0,0),e})}function S(t,e,n){var r=e.type;function o(e,n){return t.then(function(t){return function r(t,e,n){return e=e||\"image/png\",t.toDataURL(e,n)}(t,e,n)})}return{getType:f(r),toBlob:function i(){return T.resolve(e)},toDataURL:f(n),toBase64:function u(){return n.split(\",\")[1]},toAdjustedBlob:function a(e,n){return t.then(function(t){return O(t,e,n)})},toAdjustedDataURL:o,toAdjustedBase64:function c(t,e){return o(t,e).then(function(t){return t.split(\",\")[1]})},toCanvas:function s(){return t.then(h)}}}function N(e){return function t(n){return new T(function(t){var e=new p.FileReader;e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})}(e).then(function(t){return S(P(e),e,t)})}function M(e,t){return O(e,t).then(function(t){return S(T.resolve(e),t,e.toDataURL())})}function B(e,n){return e.toCanvas().then(function(t){return function a(t,e,n){var r=m(t.width,t.height),o=g(r),i=0,u=0;90!==(n=n<0?360+n:n)&&270!==n||y(r,r.height,r.width);90!==n&&180!==n||(i=r.width);270!==n&&180!==n||(u=r.height);return o.translate(i,u),o.rotate(n*Math.PI/180),o.drawImage(t,0,0),M(r,e)}(t,e.getType(),n)})}function D(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var r=m(t.width,t.height),o=g(r);\"v\"===n?(o.scale(1,-1),o.drawImage(t,0,-r.height)):(o.scale(-1,1),o.drawImage(t,-r.width,0));return M(r,e)}(t,e.getType(),n)})}var F,H=(F=\"function\",function(t){return typeof t===F}),q=function(t,e){return function(t,e,n){for(var r=0,o=t.length;r<o;r++){var i=t[r];if(e(i,r))return v.some(i);if(n(i,r))break}return v.none()}(t,e,i)},z=function(t){return N(t)},$=function(t){if(null===t||t===undefined)throw new Error(\"Node cannot be null or undefined\");return{dom:f(t)}},G={fromHtml:function(t,e){var n=(e||p.document).createElement(\"div\");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw p.console.error(\"HTML does not have a single root node\",t),new Error(\"HTML must have a single root node\");return $(n.childNodes[0])},fromTag:function(t,e){var n=(e||p.document).createElement(t);return $(n)},fromText:function(t,e){var n=(e||p.document).createTextNode(t);return $(n)},fromDom:$,fromPoint:function(t,e,n){var r=t.dom();return v.from(r.elementFromPoint(e,n)).map($)}},J=(\"undefined\"!=typeof p.window?p.window:Function(\"return this;\")(),H(p.Element.prototype.attachShadow)&&H(p.Node.prototype.getRootNode),function(t,e){return n=function(t){return function(t,e){var n=t.dom();if(1!==n.nodeType)return!1;var r=n;if(r.matches!==undefined)return r.matches(e);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(e);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(e);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(e);throw new Error(\"Browser lacks native selectors\")}(t,e)},q(t.dom().childNodes,function(t){return n(G.fromDom(t))}).map(G.fromDom);var n}),K=tinymce.util.Tools.resolve(\"tinymce.util.Delay\"),V=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),W=tinymce.util.Tools.resolve(\"tinymce.util.URI\"),X=function(t){return t.getParam(\"imagetools_proxy\")};function Q(t){var e,n;function r(t){return/^[0-9\\.]+px$/.test(t)}return e=t.style.width,n=t.style.height,e||n?r(e)&&r(n)?{w:parseInt(e,10),h:parseInt(n,10)}:null:(e=t.width,n=t.height,e&&n?{w:parseInt(e,10),h:parseInt(n,10)}:null)}function Y(t){return{w:t.naturalWidth,h:t.naturalHeight}}var Z=function(t){return null!==t&&t!==undefined},tt=function(e,r,o){return new V(function(t){var n=new p.XMLHttpRequest;n.onreadystatechange=function(){4===n.readyState&&t({status:n.status,blob:this.response})},n.open(\"GET\",e,!0),n.withCredentials=o,d.each(r,function(t,e){n.setRequestHeader(e,t)}),n.responseType=\"blob\",n.send()})},et=[{code:404,message:\"Could not find Image Proxy\"},{code:403,message:\"Rejected request\"},{code:0,message:\"Incorrect Image Proxy URL\"}],nt=[{type:\"key_missing\",message:\"The request did not include an api key.\"},{type:\"key_not_found\",message:\"The provided api key could not be found.\"},{type:\"domain_not_trusted\",message:\"The api key is not valid for the request origins.\"}],rt=function(t){var e,n=(e=t,\"ImageProxy HTTP error: \"+q(et,function(t){return e===t.code}).fold(f(\"Unknown ImageProxy error\"),function(t){return t.message}));return V.reject(n)},ot=function(t){var e,n,r=function(t){var e;try{e=JSON.parse(t)}catch(n){}return e}(t),o=(e=[\"error\",\"type\"].reduce(function(t,e){return Z(t)?t[e]:undefined},r),Z(e)?e:null);return\"ImageProxy Service error: \"+(o?(n=o,q(nt,function(t){return t.type===n}).fold(f(\"Unknown service error\"),function(t){return t.message})):\"Invalid JSON in service error message\")},it=function(t,e){return r=e,new V(function(n){var t=new p.FileReader;t.onload=function(t){var e=t.target;n(e.result)},t.readAsText(r)}).then(function(t){var e=ot(t);return V.reject(e)});var r},ut=function(t,e){var n,r,o,i={\"Content-Type\":\"application/json;charset=UTF-8\",\"tiny-api-key\":e};return tt((r=e,o=-1===(n=t).indexOf(\"?\")?\"?\":\"&\",/[?&]apiKey=/.test(n)||!r?n:n+o+\"apiKey=\"+encodeURIComponent(r)),i,!1).then(function(t){return t.status<200||300<=t.status?(e=t.status,n=t.blob,400===(r=e)||403===r||500===r?it(0,n):rt(e)):V.resolve(t.blob);var e,n,r})};var at=function(t,e,n){return e?ut(t,e):function r(t,e){return tt(t,{},e).then(function(t){return t.status<200||300<=t.status?rt(t.status):V.resolve(t.blob)})}(t,n)},ct=0,st=function(t){return J(G.fromDom(t),\"img\")},ft=function(t,e){return t.dom.is(e,\"figure\")},lt=function(n,t){var e=function(t){return e=t,n.dom.is(e,\"img:not([data-mce-object],[data-mce-placeholder])\")&&(ht(n,t)||gt(n,t)||X(n));var e};return ft(n,t)?st(t).map(function(t){return e(t.dom())?v.some(t.dom()):v.none()}):e(t)?v.some(t):v.none()},dt=function(t,e){t.notificationManager.open({text:e,type:\"error\"})},mt=function(t){var e=t.selection.getNode();return ft(t,e)?st(e):v.some(G.fromDom(e))},ht=function(t,e){var n=e.src;return 0===n.indexOf(\"data:\")||0===n.indexOf(\"blob:\")||new W(n).host===t.documentBaseURI.host},gt=function(t,e){return-1!==d.inArray(t.getParam(\"imagetools_cors_hosts\",[],\"string[]\"),new W(e.src).host)},pt=function(t,e){var n,r,o,i,u=e.src;return gt(t,e)?at(e.src,null,(r=t,o=e,-1!==d.inArray(r.getParam(\"imagetools_credentials_hosts\",[],\"string[]\"),new W(o.src).host))):ht(t,e)?j(e):(u=X(t),u+=(-1===u.indexOf(\"?\")?\"?\":\"&\")+\"url=\"+encodeURIComponent(e.src),n=(i=t).getParam(\"api_key\",i.getParam(\"imagetools_api_key\",\"\",\"string\"),\"string\"),at(u,n,!1))},vt=function(t,e){return n=t,v.from(n.getParam(\"imagetools_fetch_image\",null,\"function\")).fold(function(){return pt(t,e)},function(t){return t(e)});var n},yt=function(t,e){var n=t.editorUpload.blobCache.getByUri(e.src);return n?V.resolve(n.blob()):vt(t,e)},wt=function(t){K.clearTimeout(t.get())},bt=function(a,c,s,f,l,d){return c.toBlob().then(function(t){var e,n,o,r,i,u=a.editorUpload.blobCache;return e=l.src,a.getParam(\"images_reuse_filename\",!1,\"boolean\")&&(n=(o=u.getByUri(e))?(e=o.uri(),o.name()):(r=a,(i=e.match(/\\/([^\\/\\?]+)?\\.(?:jpeg|jpg|png|gif)(?:\\?|$)/i))?r.dom.encode(i[1]):null)),o=u.create({id:\"imagetools\"+ct++,blob:t,base64:c.toBase64(),uri:e,name:n}),u.add(o),a.undoManager.transact(function(){a.$(l).on(\"load\",function r(){var t,e,n;a.$(l).off(\"load\",r),a.nodeChanged(),s?a.editorUpload.uploadImagesAuto():(wt(f),t=a,e=f,n=K.setEditorTimeout(t,function(){t.editorUpload.uploadImagesAuto()},t.getParam(\"images_upload_timeout\",3e4,\"number\")),e.set(n))}),d&&a.$(l).attr({width:d.w,height:d.h}),a.$(l).attr({src:o.blobUri()}).removeAttr(\"data-mce-src\")}),o})},It=function(n,r,t,o){return function(){return mt(n).fold(function(){dt(n,\"Could not find selected image\")},function(e){return n._scanForImages().then(function(){return yt(n,e.dom())}).then(z).then(t).then(function(t){return bt(n,t,!1,r,e.dom(),o)},function(t){dt(n,t)})})}},Tt=function(e,n,r){return function(){var t=mt(e).fold(function(){return null},function(t){var e=Q(t.dom());return e?{w:e.h,h:e.w}:null});return It(e,n,function(t){return B(t,r)},t)()}},_t=function(t,e,n){return function(){return It(t,e,function(t){return D(t,n)})()}},Rt=function(e,n,r,i,u){return C(u).then(function(t){var e=Y(t);return i.w===e.w&&i.h===e.h||Q(r)&&function o(t,e){var n,r;e&&(n=t.style.width,r=t.style.height,(n||r)&&(t.style.width=e.w+\"px\",t.style.height=e.h+\"px\",t.removeAttribute(\"data-mce-style\")),n=t.width,r=t.height,(n||r)&&(t.setAttribute(\"width\",e.w),t.setAttribute(\"height\",e.h)))}(r,e),p.URL.revokeObjectURL(t.src),u}).then(z).then(function(t){return bt(e,t,!0,n,r)},function(){})},Ut=function(i,u){return function(){var r=mt(i),o=r.map(function(t){return Y(t.dom())});mt(i).each(function(e){lt(i,e.dom()).each(function(t){yt(i,e.dom()).then(function(t){var e,n={blob:e=t,url:p.URL.createObjectURL(e)};i.windowManager.open({title:\"Edit Image\",size:\"large\",body:{type:\"panel\",items:[{type:\"imagetools\",name:\"imagetools\",label:\"Edit Image\",currentState:n}]},buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0,disabled:!0}],onSubmit:function(t){var n=t.getData().imagetools.blob;r.each(function(e){o.each(function(t){Rt(i,u,e.dom(),t,n)})}),t.close()},onCancel:function(){},onAction:function(t,e){switch(e.name){case\"save-state\":e.value?t.enable(\"save\"):t.disable(\"save\");break;case\"disable\":t.disable(\"save\"),t.disable(\"cancel\");break;case\"enable\":t.enable(\"cancel\")}}})})})})}};!function At(){r.add(\"imagetools\",function(t){var n,e,r,o,i,u,a,c,s=l(0),f=l(null);n=t,e=s,d.each({mceImageRotateLeft:Tt(n,e,-90),mceImageRotateRight:Tt(n,e,90),mceImageFlipVertical:_t(n,e,\"v\"),mceImageFlipHorizontal:_t(n,e,\"h\"),mceEditImage:Ut(n,e)},function(t,e){n.addCommand(e,t)}),o=function(t){return function(){return r.execCommand(t)}},(r=t).ui.registry.addButton(\"rotateleft\",{tooltip:\"Rotate counterclockwise\",icon:\"rotate-left\",onAction:o(\"mceImageRotateLeft\")}),r.ui.registry.addButton(\"rotateright\",{tooltip:\"Rotate clockwise\",icon:\"rotate-right\",onAction:o(\"mceImageRotateRight\")}),r.ui.registry.addButton(\"flipv\",{tooltip:\"Flip vertically\",icon:\"flip-vertically\",onAction:o(\"mceImageFlipVertical\")}),r.ui.registry.addButton(\"fliph\",{tooltip:\"Flip horizontally\",icon:\"flip-horizontally\",onAction:o(\"mceImageFlipHorizontal\")}),r.ui.registry.addButton(\"editimage\",{tooltip:\"Edit image\",icon:\"edit-image\",onAction:o(\"mceEditImage\"),onSetup:function(n){var t=function(){mt(r).each(function(t){var e=lt(r,t.dom()).isNone();n.setDisabled(e)})};return r.on(\"NodeChange\",t),function(){r.off(\"NodeChange\",t)}}}),r.ui.registry.addButton(\"imageoptions\",{tooltip:\"Image options\",icon:\"image-options\",onAction:o(\"mceImage\")}),r.ui.registry.addContextMenu(\"imagetools\",{update:function(t){return lt(r,t).fold(function(){return[]},function(t){return[{text:\"Edit image\",icon:\"edit-image\",onAction:o(\"mceEditImage\")}]})}}),(i=t).ui.registry.addContextToolbar(\"imagetools\",{items:i.getParam(\"imagetools_toolbar\",\"rotateleft rotateright flipv fliph editimage imageoptions\"),predicate:function(t){return lt(i,t).isSome()},position:\"node\",scope:\"node\"}),a=s,c=f,(u=t).on(\"NodeChange\",function(t){var e=c.get();e&&e.src!==t.element.src&&(wt(a),u.editorUpload.uploadImagesAuto(),c.set(null)),lt(u,t.element).each(c.set)})})}()}(window);"]}]}