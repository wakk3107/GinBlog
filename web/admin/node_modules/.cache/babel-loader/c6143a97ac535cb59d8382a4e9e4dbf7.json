{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\src\\components\\editor\\plugins\\media\\plugin.min.js","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\src\\components\\editor\\plugins\\media\\plugin.min.js","mtime":1651118941000},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\babel.config.js","mtime":1651118941000},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659170820870},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1659170820855},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1659170823565},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\eslint-loader\\index.js","mtime":1659170823234}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90eXBlb2YgPSByZXF1aXJlKCJDOi9Vc2Vycy93YWtrL0dvbGFuZFByb2plY3RzL0dpbkJsb2cvd2ViL2FkbWluL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL3R5cGVvZi5qcyIpLmRlZmF1bHQ7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50ZXN0LmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5jb25zdHJ1Y3Rvci5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5kb3QtYWxsLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnN0aWNreS5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiKTsKCi8qKgogKiBDb3B5cmlnaHQgKGMpIFRpbnkgVGVjaG5vbG9naWVzLCBJbmMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBMR1BMIG9yIGEgY29tbWVyY2lhbCBsaWNlbnNlLgogKiBGb3IgTEdQTCBzZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi4KICogRm9yIGNvbW1lcmNpYWwgbGljZW5zZXMgc2VlIGh0dHBzOi8vd3d3LnRpbnkuY2xvdWQvCiAqCiAqIFZlcnNpb246IDUuNC4yICgyMDIwLTA4LTE3KQogKi8KIWZ1bmN0aW9uICgpIHsKICAidXNlIHN0cmljdCI7CgogIHZhciBlLAogICAgICB0LAogICAgICByLAogICAgICBuID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UuUGx1Z2luTWFuYWdlciIpLAogICAgICBfcCA9IGZ1bmN0aW9uIHAoKSB7CiAgICByZXR1cm4gKF9wID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAoZSkgewogICAgICBmb3IgKHZhciB0LCByID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IHIgPCBuOyByKyspIHsKICAgICAgICBmb3IgKHZhciBpIGluIHQgPSBhcmd1bWVudHNbcl0pIHsKICAgICAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LCBpKSAmJiAoZVtpXSA9IHRbaV0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIGU7CiAgICB9KS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0sCiAgICAgIGEgPSBmdW5jdGlvbiBhKGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBlOwogICAgfTsKICB9LAogICAgICBvID0gYSghMSksCiAgICAgIGMgPSBhKCEwKSwKICAgICAgaSA9IGZ1bmN0aW9uIGkoKSB7CiAgICByZXR1cm4gdTsKICB9LAogICAgICB1ID0gKGUgPSBmdW5jdGlvbiBlKF9lKSB7CiAgICByZXR1cm4gX2UuaXNOb25lKCk7CiAgfSwgewogICAgZm9sZDogZnVuY3Rpb24gZm9sZChlLCB0KSB7CiAgICAgIHJldHVybiBlKCk7CiAgICB9LAogICAgaXM6IG8sCiAgICBpc1NvbWU6IG8sCiAgICBpc05vbmU6IGMsCiAgICBnZXRPcjogciA9IGZ1bmN0aW9uIHIoZSkgewogICAgICByZXR1cm4gZTsKICAgIH0sCiAgICBnZXRPclRodW5rOiB0ID0gZnVuY3Rpb24gdChlKSB7CiAgICAgIHJldHVybiBlKCk7CiAgICB9LAogICAgZ2V0T3JEaWU6IGZ1bmN0aW9uIGdldE9yRGllKGUpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGUgfHwgImVycm9yOiBnZXRPckRpZSBjYWxsZWQgb24gbm9uZS4iKTsKICAgIH0sCiAgICBnZXRPck51bGw6IGEobnVsbCksCiAgICBnZXRPclVuZGVmaW5lZDogYSh1bmRlZmluZWQpLAogICAgb3I6IHIsCiAgICBvclRodW5rOiB0LAogICAgbWFwOiBpLAogICAgZWFjaDogZnVuY3Rpb24gZWFjaCgpIHt9LAogICAgYmluZDogaSwKICAgIGV4aXN0czogbywKICAgIGZvcmFsbDogYywKICAgIGZpbHRlcjogaSwKICAgIGVxdWFsczogZSwKICAgIGVxdWFsc186IGUsCiAgICB0b0FycmF5OiBmdW5jdGlvbiB0b0FycmF5KCkgewogICAgICByZXR1cm4gW107CiAgICB9LAogICAgdG9TdHJpbmc6IGEoIm5vbmUoKSIpCiAgfSksCiAgICAgIHMgPSBmdW5jdGlvbiBzKHIpIHsKICAgIHZhciBlID0gYShyKSwKICAgICAgICB0ID0gZnVuY3Rpb24gdCgpIHsKICAgICAgcmV0dXJuIGk7CiAgICB9LAogICAgICAgIG4gPSBmdW5jdGlvbiBuKGUpIHsKICAgICAgcmV0dXJuIGUocik7CiAgICB9LAogICAgICAgIGkgPSB7CiAgICAgIGZvbGQ6IGZ1bmN0aW9uIGZvbGQoZSwgdCkgewogICAgICAgIHJldHVybiB0KHIpOwogICAgICB9LAogICAgICBpczogZnVuY3Rpb24gaXMoZSkgewogICAgICAgIHJldHVybiByID09PSBlOwogICAgICB9LAogICAgICBpc1NvbWU6IGMsCiAgICAgIGlzTm9uZTogbywKICAgICAgZ2V0T3I6IGUsCiAgICAgIGdldE9yVGh1bms6IGUsCiAgICAgIGdldE9yRGllOiBlLAogICAgICBnZXRPck51bGw6IGUsCiAgICAgIGdldE9yVW5kZWZpbmVkOiBlLAogICAgICBvcjogdCwKICAgICAgb3JUaHVuazogdCwKICAgICAgbWFwOiBmdW5jdGlvbiBtYXAoZSkgewogICAgICAgIHJldHVybiBzKGUocikpOwogICAgICB9LAogICAgICBlYWNoOiBmdW5jdGlvbiBlYWNoKGUpIHsKICAgICAgICBlKHIpOwogICAgICB9LAogICAgICBiaW5kOiBuLAogICAgICBleGlzdHM6IG4sCiAgICAgIGZvcmFsbDogbiwKICAgICAgZmlsdGVyOiBmdW5jdGlvbiBmaWx0ZXIoZSkgewogICAgICAgIHJldHVybiBlKHIpID8gaSA6IHU7CiAgICAgIH0sCiAgICAgIHRvQXJyYXk6IGZ1bmN0aW9uIHRvQXJyYXkoKSB7CiAgICAgICAgcmV0dXJuIFtyXTsKICAgICAgfSwKICAgICAgdG9TdHJpbmc6IGZ1bmN0aW9uIHRvU3RyaW5nKCkgewogICAgICAgIHJldHVybiAic29tZSgiICsgciArICIpIjsKICAgICAgfSwKICAgICAgZXF1YWxzOiBmdW5jdGlvbiBlcXVhbHMoZSkgewogICAgICAgIHJldHVybiBlLmlzKHIpOwogICAgICB9LAogICAgICBlcXVhbHNfOiBmdW5jdGlvbiBlcXVhbHNfKGUsIHQpIHsKICAgICAgICByZXR1cm4gZS5mb2xkKG8sIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gdChyLCBlKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfTsKCiAgICByZXR1cm4gaTsKICB9LAogICAgICBsID0gewogICAgc29tZTogcywKICAgIG5vbmU6IGksCiAgICBmcm9tOiBmdW5jdGlvbiBmcm9tKGUpIHsKICAgICAgcmV0dXJuIG51bGwgPT09IGUgfHwgZSA9PT0gdW5kZWZpbmVkID8gdSA6IHMoZSk7CiAgICB9CiAgfSwKICAgICAgbSA9IGZ1bmN0aW9uIG0obikgewogICAgcmV0dXJuIGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiByID0gX3R5cGVvZih0ID0gZSksIChudWxsID09PSB0ID8gIm51bGwiIDogIm9iamVjdCIgPT0gciAmJiAoQXJyYXkucHJvdG90eXBlLmlzUHJvdG90eXBlT2YodCkgfHwgdC5jb25zdHJ1Y3RvciAmJiAiQXJyYXkiID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpID8gImFycmF5IiA6ICJvYmplY3QiID09IHIgJiYgKFN0cmluZy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZih0KSB8fCB0LmNvbnN0cnVjdG9yICYmICJTdHJpbmciID09PSB0LmNvbnN0cnVjdG9yLm5hbWUpID8gInN0cmluZyIgOiByKSA9PT0gbjsKICAgICAgdmFyIHQsIHI7CiAgICB9OwogIH0sCiAgICAgIGQgPSBtKCJzdHJpbmciKSwKICAgICAgaCA9IG0oIm9iamVjdCIpLAogICAgICBnID0gbSgiYXJyYXkiKSwKICAgICAgdiA9IEFycmF5LnByb3RvdHlwZS5wdXNoLAogICAgICBmID0gZnVuY3Rpb24gZihlLCB0KSB7CiAgICBmb3IgKHZhciByID0gMCwgbiA9IGUubGVuZ3RoOyByIDwgbjsgcisrKSB7CiAgICAgIHQoZVtyXSwgcik7CiAgICB9CiAgfSwKICAgICAgdyA9IGZ1bmN0aW9uIHcoZSkgewogICAgdmFyIHQgPSBlOwogICAgcmV0dXJuIHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHQ7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KGUpIHsKICAgICAgICB0ID0gZTsKICAgICAgfQogICAgfTsKICB9LAogICAgICBiID0gT2JqZWN0LmtleXMsCiAgICAgIHkgPSBPYmplY3QuaGFzT3duUHJvcGVydHksCiAgICAgIHggPSBmdW5jdGlvbiB4KGUsIHQpIHsKICAgIHJldHVybiBqKGUsIHQpID8gbC5mcm9tKGVbdF0pIDogbC5ub25lKCk7CiAgfSwKICAgICAgaiA9IGZ1bmN0aW9uIGooZSwgdCkgewogICAgcmV0dXJuIHkuY2FsbChlLCB0KTsKICB9LAogICAgICBPID0gZnVuY3Rpb24gTyhlKSB7CiAgICByZXR1cm4gZS5nZXRQYXJhbSgibWVkaWFfc2NyaXB0cyIpOwogIH0sCiAgICAgIFMgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS51dGlsLlRvb2xzIiksCiAgICAgIF8gPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS5kb20uRE9NVXRpbHMiKSwKICAgICAgayA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCJ0aW55bWNlLmh0bWwuU2F4UGFyc2VyIiksCiAgICAgIEEgPSBmdW5jdGlvbiBBKGUsIHQpIHsKICAgIGlmIChlKSBmb3IgKHZhciByID0gMDsgciA8IGUubGVuZ3RoOyByKyspIHsKICAgICAgaWYgKC0xICE9PSB0LmluZGV4T2YoZVtyXS5maWx0ZXIpKSByZXR1cm4gZVtyXTsKICAgIH0KICB9LAogICAgICBUID0gXy5ET00sCiAgICAgIEMgPSBmdW5jdGlvbiBDKGUpIHsKICAgIHJldHVybiBlLnJlcGxhY2UoL3B4JC8sICIiKTsKICB9LAogICAgICBQID0gZnVuY3Rpb24gUChvLCBlKSB7CiAgICB2YXIgYyA9IHcoITEpLAogICAgICAgIHUgPSB7fTsKICAgIHJldHVybiBrKHsKICAgICAgdmFsaWRhdGU6ICExLAogICAgICBhbGxvd19jb25kaXRpb25hbF9jb21tZW50czogITAsCiAgICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChlLCB0KSB7CiAgICAgICAgaWYgKCFjLmdldCgpKSBpZiAoaih0Lm1hcCwgImRhdGEtZXBob3gtZW1iZWQtaXJpIikpIGMuc2V0KCEwKSwgaSA9IChuID0gdCkubWFwLnN0eWxlLCBhID0gaSA/IFQucGFyc2VTdHlsZShpKSA6IHt9LCB1ID0gewogICAgICAgICAgdHlwZTogImVwaG94LWVtYmVkLWlyaSIsCiAgICAgICAgICBzb3VyY2U6IG4ubWFwWyJkYXRhLWVwaG94LWVtYmVkLWlyaSJdLAogICAgICAgICAgYWx0c291cmNlOiAiIiwKICAgICAgICAgIHBvc3RlcjogIiIsCiAgICAgICAgICB3aWR0aDogeChhLCAibWF4LXdpZHRoIikubWFwKEMpLmdldE9yKCIiKSwKICAgICAgICAgIGhlaWdodDogeChhLCAibWF4LWhlaWdodCIpLm1hcChDKS5nZXRPcigiIikKICAgICAgICB9O2Vsc2UgewogICAgICAgICAgaWYgKHUuc291cmNlIHx8ICJwYXJhbSIgIT09IGUgfHwgKHUuc291cmNlID0gdC5tYXAubW92aWUpLCAiaWZyYW1lIiAhPT0gZSAmJiAib2JqZWN0IiAhPT0gZSAmJiAiZW1iZWQiICE9PSBlICYmICJ2aWRlbyIgIT09IGUgJiYgImF1ZGlvIiAhPT0gZSB8fCAodS50eXBlIHx8ICh1LnR5cGUgPSBlKSwgdSA9IFMuZXh0ZW5kKHQubWFwLCB1KSksICJzY3JpcHQiID09PSBlKSB7CiAgICAgICAgICAgIHZhciByID0gQShvLCB0Lm1hcC5zcmMpOwogICAgICAgICAgICBpZiAoIXIpIHJldHVybjsKICAgICAgICAgICAgdSA9IHsKICAgICAgICAgICAgICB0eXBlOiAic2NyaXB0IiwKICAgICAgICAgICAgICBzb3VyY2U6IHQubWFwLnNyYywKICAgICAgICAgICAgICB3aWR0aDogU3RyaW5nKHIud2lkdGgpLAogICAgICAgICAgICAgIGhlaWdodDogU3RyaW5nKHIuaGVpZ2h0KQogICAgICAgICAgICB9OwogICAgICAgICAgfQoKICAgICAgICAgICJzb3VyY2UiID09PSBlICYmICh1LnNvdXJjZSA/IHUuYWx0c291cmNlIHx8ICh1LmFsdHNvdXJjZSA9IHQubWFwLnNyYykgOiB1LnNvdXJjZSA9IHQubWFwLnNyYyksICJpbWciICE9PSBlIHx8IHUucG9zdGVyIHx8ICh1LnBvc3RlciA9IHQubWFwLnNyYyk7CiAgICAgICAgfQogICAgICAgIHZhciBuLCBpLCBhOwogICAgICB9CiAgICB9KS5wYXJzZShlKSwgdS5zb3VyY2UgPSB1LnNvdXJjZSB8fCB1LnNyYyB8fCB1LmRhdGEsIHUuYWx0c291cmNlID0gdS5hbHRzb3VyY2UgfHwgIiIsIHUucG9zdGVyID0gdS5wb3N0ZXIgfHwgIiIsIHU7CiAgfSwKICAgICAgRCA9IGZ1bmN0aW9uIEQoZSkgewogICAgdmFyIHQgPSB7CiAgICAgIG1wMzogImF1ZGlvL21wZWciLAogICAgICBtNGE6ICJhdWRpby94LW00YSIsCiAgICAgIHdhdjogImF1ZGlvL3dhdiIsCiAgICAgIG1wNDogInZpZGVvL21wNCIsCiAgICAgIHdlYm06ICJ2aWRlby93ZWJtIiwKICAgICAgb2dnOiAidmlkZW8vb2dnIiwKICAgICAgc3dmOiAiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2giCiAgICB9W2UudG9Mb3dlckNhc2UoKS5zcGxpdCgiLiIpLnBvcCgpXTsKICAgIHJldHVybiB0IHx8ICIiOwogIH0sCiAgICAgICQgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS5odG1sLlNjaGVtYSIpLAogICAgICBGID0gdGlueW1jZS51dGlsLlRvb2xzLnJlc29sdmUoInRpbnltY2UuaHRtbC5Xcml0ZXIiKSwKICAgICAgTSA9IF8uRE9NLAogICAgICB6ID0gZnVuY3Rpb24geihlKSB7CiAgICByZXR1cm4gL15bMC05Ll0rJC8udGVzdChlKSA/IGUgKyAicHgiIDogZTsKICB9LAogICAgICBOID0gZnVuY3Rpb24gTihhLCBlKSB7CiAgICAhZnVuY3Rpb24gKGUsIHQpIHsKICAgICAgZm9yICh2YXIgciA9IGIoZSksIG4gPSAwLCBpID0gci5sZW5ndGg7IG4gPCBpOyBuKyspIHsKICAgICAgICB2YXIgYSA9IHJbbl07CiAgICAgICAgdChlW2FdLCBhKTsKICAgICAgfQogICAgfShlLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICB2YXIgciA9ICIiICsgZTsKICAgICAgaWYgKGEubWFwW3RdKSBmb3IgKHZhciBuID0gYS5sZW5ndGg7IG4tLTspIHsKICAgICAgICB2YXIgaSA9IGFbbl07CiAgICAgICAgaS5uYW1lID09PSB0ICYmIChyID8gKGEubWFwW3RdID0gciwgaS52YWx1ZSA9IHIpIDogKGRlbGV0ZSBhLm1hcFt0XSwgYS5zcGxpY2UobiwgMSkpKTsKICAgICAgfSBlbHNlIHIgJiYgKGEucHVzaCh7CiAgICAgICAgbmFtZTogdCwKICAgICAgICB2YWx1ZTogcgogICAgICB9KSwgYS5tYXBbdF0gPSByKTsKICAgIH0pOwogIH0sCiAgICAgIFUgPSBbInNvdXJjZSIsICJhbHRzb3VyY2UiXSwKICAgICAgRSA9IGZ1bmN0aW9uIEUoZSwgYywgdSkgewogICAgdmFyIHMsCiAgICAgICAgbCA9IEYoKSwKICAgICAgICBtID0gdyghMSksCiAgICAgICAgZCA9IDA7CiAgICByZXR1cm4gayh7CiAgICAgIHZhbGlkYXRlOiAhMSwKICAgICAgYWxsb3dfY29uZGl0aW9uYWxfY29tbWVudHM6ICEwLAogICAgICBjb21tZW50OiBmdW5jdGlvbiBjb21tZW50KGUpIHsKICAgICAgICBsLmNvbW1lbnQoZSk7CiAgICAgIH0sCiAgICAgIGNkYXRhOiBmdW5jdGlvbiBjZGF0YShlKSB7CiAgICAgICAgbC5jZGF0YShlKTsKICAgICAgfSwKICAgICAgdGV4dDogZnVuY3Rpb24gdGV4dChlLCB0KSB7CiAgICAgICAgbC50ZXh0KGUsIHQpOwogICAgICB9LAogICAgICBzdGFydDogZnVuY3Rpb24gc3RhcnQoZSwgdCwgcikgewogICAgICAgIGlmICghbS5nZXQoKSkgaWYgKGoodC5tYXAsICJkYXRhLWVwaG94LWVtYmVkLWlyaSIpKSBtLnNldCghMCksIG4gPSBjLCBhID0gKGkgPSB0KS5tYXAuc3R5bGUsIChvID0gYSA/IE0ucGFyc2VTdHlsZShhKSA6IHt9KVsibWF4LXdpZHRoIl0gPSB6KG4ud2lkdGgpLCBvWyJtYXgtaGVpZ2h0Il0gPSB6KG4uaGVpZ2h0KSwgTihpLCB7CiAgICAgICAgICBzdHlsZTogTS5zZXJpYWxpemVTdHlsZShvKQogICAgICAgIH0pO2Vsc2UgewogICAgICAgICAgc3dpdGNoIChlKSB7CiAgICAgICAgICAgIGNhc2UgInZpZGVvIjoKICAgICAgICAgICAgY2FzZSAib2JqZWN0IjoKICAgICAgICAgICAgY2FzZSAiZW1iZWQiOgogICAgICAgICAgICBjYXNlICJpbWciOgogICAgICAgICAgICBjYXNlICJpZnJhbWUiOgogICAgICAgICAgICAgIGMuaGVpZ2h0ICE9PSB1bmRlZmluZWQgJiYgYy53aWR0aCAhPT0gdW5kZWZpbmVkICYmIE4odCwgewogICAgICAgICAgICAgICAgd2lkdGg6IGMud2lkdGgsCiAgICAgICAgICAgICAgICBoZWlnaHQ6IGMuaGVpZ2h0CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKHUpIHN3aXRjaCAoZSkgewogICAgICAgICAgICBjYXNlICJ2aWRlbyI6CiAgICAgICAgICAgICAgTih0LCB7CiAgICAgICAgICAgICAgICBwb3N0ZXI6IGMucG9zdGVyLAogICAgICAgICAgICAgICAgc3JjOiAiIgogICAgICAgICAgICAgIH0pLCBjLmFsdHNvdXJjZSAmJiBOKHQsIHsKICAgICAgICAgICAgICAgIHNyYzogIiIKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgImlmcmFtZSI6CiAgICAgICAgICAgICAgTih0LCB7CiAgICAgICAgICAgICAgICBzcmM6IGMuc291cmNlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlICJzb3VyY2UiOgogICAgICAgICAgICAgIGlmIChkIDwgMiAmJiAoTih0LCB7CiAgICAgICAgICAgICAgICBzcmM6IGNbVVtkXV0sCiAgICAgICAgICAgICAgICB0eXBlOiBjW1VbZF0gKyAibWltZSJdCiAgICAgICAgICAgICAgfSksICFjW1VbZF1dKSkgcmV0dXJuOwogICAgICAgICAgICAgIGQrKzsKICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgIGNhc2UgImltZyI6CiAgICAgICAgICAgICAgaWYgKCFjLnBvc3RlcikgcmV0dXJuOwogICAgICAgICAgICAgIHMgPSAhMDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFyIG4sIGksIGEsIG87CiAgICAgICAgbC5zdGFydChlLCB0LCByKTsKICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbiBlbmQoZSkgewogICAgICAgIGlmICghbS5nZXQoKSkgewogICAgICAgICAgaWYgKCJ2aWRlbyIgPT09IGUgJiYgdSkgZm9yICh2YXIgdCA9IDA7IHQgPCAyOyB0KyspIHsKICAgICAgICAgICAgaWYgKGNbVVt0XV0pIHsKICAgICAgICAgICAgICB2YXIgciA9IFtdOwogICAgICAgICAgICAgIHIubWFwID0ge30sIGQgPCB0ICYmIChOKHIsIHsKICAgICAgICAgICAgICAgIHNyYzogY1tVW3RdXSwKICAgICAgICAgICAgICAgIHR5cGU6IGNbVVt0XSArICJtaW1lIl0KICAgICAgICAgICAgICB9KSwgbC5zdGFydCgic291cmNlIiwgciwgITApKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmIChjLnBvc3RlciAmJiAib2JqZWN0IiA9PT0gZSAmJiB1ICYmICFzKSB7CiAgICAgICAgICAgIHZhciBuID0gW107CiAgICAgICAgICAgIG4ubWFwID0ge30sIE4obiwgewogICAgICAgICAgICAgIHNyYzogYy5wb3N0ZXIsCiAgICAgICAgICAgICAgd2lkdGg6IGMud2lkdGgsCiAgICAgICAgICAgICAgaGVpZ2h0OiBjLmhlaWdodAogICAgICAgICAgICB9KSwgbC5zdGFydCgiaW1nIiwgbiwgITApOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgbC5lbmQoZSk7CiAgICAgIH0KICAgIH0sICQoe30pKS5wYXJzZShlKSwgbC5nZXRDb250ZW50KCk7CiAgfSwKICAgICAgUiA9IFt7CiAgICByZWdleDogL3lvdXR1XC5iZVwvKFtcd1wtX1w/Jj0uXSspL2ksCiAgICB0eXBlOiAiaWZyYW1lIiwKICAgIHc6IDU2MCwKICAgIGg6IDMxNCwKICAgIHVybDogInd3dy55b3V0dWJlLmNvbS9lbWJlZC8kMSIsCiAgICBhbGxvd0Z1bGxzY3JlZW46ICEwCiAgfSwgewogICAgcmVnZXg6IC95b3V0dWJlXC5jb20oLispdj0oW14mXSspKCYoW2EtejAtOSY9XC1fXSspKT8vaSwKICAgIHR5cGU6ICJpZnJhbWUiLAogICAgdzogNTYwLAogICAgaDogMzE0LAogICAgdXJsOiAid3d3LnlvdXR1YmUuY29tL2VtYmVkLyQyPyQ0IiwKICAgIGFsbG93RnVsbHNjcmVlbjogITAKICB9LCB7CiAgICByZWdleDogL3lvdXR1YmUuY29tXC9lbWJlZFwvKFthLXowLTlcPyY9XC1fXSspL2ksCiAgICB0eXBlOiAiaWZyYW1lIiwKICAgIHc6IDU2MCwKICAgIGg6IDMxNCwKICAgIHVybDogInd3dy55b3V0dWJlLmNvbS9lbWJlZC8kMSIsCiAgICBhbGxvd0Z1bGxzY3JlZW46ICEwCiAgfSwgewogICAgcmVnZXg6IC92aW1lb1wuY29tXC8oWzAtOV0rKS8sCiAgICB0eXBlOiAiaWZyYW1lIiwKICAgIHc6IDQyNSwKICAgIGg6IDM1MCwKICAgIHVybDogInBsYXllci52aW1lby5jb20vdmlkZW8vJDE/dGl0bGU9MCZieWxpbmU9MCZwb3J0cmFpdD0wJmNvbG9yPThkYzdkYyIsCiAgICBhbGxvd0Z1bGxzY3JlZW46ICEwCiAgfSwgewogICAgcmVnZXg6IC92aW1lb1wuY29tXC8oLiopXC8oWzAtOV0rKS8sCiAgICB0eXBlOiAiaWZyYW1lIiwKICAgIHc6IDQyNSwKICAgIGg6IDM1MCwKICAgIHVybDogInBsYXllci52aW1lby5jb20vdmlkZW8vJDI/dGl0bGU9MCZhbXA7YnlsaW5lPTAiLAogICAgYWxsb3dGdWxsc2NyZWVuOiAhMAogIH0sIHsKICAgIHJlZ2V4OiAvbWFwc1wuZ29vZ2xlXC4oW2Etel17MiwzfSlcL21hcHNcLyguKyltc2lkPSguKykvLAogICAgdHlwZTogImlmcmFtZSIsCiAgICB3OiA0MjUsCiAgICBoOiAzNTAsCiAgICB1cmw6ICdtYXBzLmdvb2dsZS5jb20vbWFwcy9tcz9tc2lkPSQyJm91dHB1dD1lbWJlZCInLAogICAgYWxsb3dGdWxsc2NyZWVuOiAhMQogIH0sIHsKICAgIHJlZ2V4OiAvZGFpbHltb3Rpb25cLmNvbVwvdmlkZW9cLyhbXl9dKykvLAogICAgdHlwZTogImlmcmFtZSIsCiAgICB3OiA0ODAsCiAgICBoOiAyNzAsCiAgICB1cmw6ICJ3d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLyQxIiwKICAgIGFsbG93RnVsbHNjcmVlbjogITAKICB9LCB7CiAgICByZWdleDogL2RhaVwubHlcLyhbXl9dKykvLAogICAgdHlwZTogImlmcmFtZSIsCiAgICB3OiA0ODAsCiAgICBoOiAyNzAsCiAgICB1cmw6ICJ3d3cuZGFpbHltb3Rpb24uY29tL2VtYmVkL3ZpZGVvLyQxIiwKICAgIGFsbG93RnVsbHNjcmVlbjogITAKICB9XSwKICAgICAgTCA9IGZ1bmN0aW9uIEwodCkgewogICAgdmFyIGUgPSBSLmZpbHRlcihmdW5jdGlvbiAoZSkgewogICAgICByZXR1cm4gZS5yZWdleC50ZXN0KHQpOwogICAgfSk7CiAgICByZXR1cm4gMCA8IGUubGVuZ3RoID8gUy5leHRlbmQoe30sIGVbMF0sIHsKICAgICAgdXJsOiBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgIGZvciAodmFyIHIsIG4gPSAociA9IHQubWF0Y2goL14oaHR0cHM/OlwvXC98d3d3XC4pKC4rKSQvaSkpICYmIDEgPCByLmxlbmd0aCAmJiAid3d3LiIgIT09IHJbMV0gPyByWzFdIDogImh0dHBzOi8vIiwgaSA9IGUucmVnZXguZXhlYyh0KSwgYSA9IG4gKyBlLnVybCwgbyA9IGZ1bmN0aW9uIG8oZSkgewogICAgICAgICAgYSA9IGEucmVwbGFjZSgiJCIgKyBlLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHJldHVybiBpW2VdID8gaVtlXSA6ICIiOwogICAgICAgICAgfSk7CiAgICAgICAgfSwgYyA9IDA7IGMgPCBpLmxlbmd0aDsgYysrKSB7CiAgICAgICAgICBvKGMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGEucmVwbGFjZSgvXD8kLywgIiIpOwogICAgICB9KGVbMF0sIHQpCiAgICB9KSA6IG51bGw7CiAgfSwKICAgICAgSSA9IGZ1bmN0aW9uIEkociwgZSkgewogICAgdmFyIG4gPSBTLmV4dGVuZCh7fSwgZSk7CiAgICBpZiAoIW4uc291cmNlICYmIChTLmV4dGVuZChuLCBQKE8ociksIG4uZW1iZWQpKSwgIW4uc291cmNlKSkgcmV0dXJuICIiOwogICAgbi5hbHRzb3VyY2UgfHwgKG4uYWx0c291cmNlID0gIiIpLCBuLnBvc3RlciB8fCAobi5wb3N0ZXIgPSAiIiksIG4uc291cmNlID0gci5jb252ZXJ0VVJMKG4uc291cmNlLCAic291cmNlIiksIG4uYWx0c291cmNlID0gci5jb252ZXJ0VVJMKG4uYWx0c291cmNlLCAic291cmNlIiksIG4uc291cmNlbWltZSA9IEQobi5zb3VyY2UpLCBuLmFsdHNvdXJjZW1pbWUgPSBEKG4uYWx0c291cmNlKSwgbi5wb3N0ZXIgPSByLmNvbnZlcnRVUkwobi5wb3N0ZXIsICJwb3N0ZXIiKTsKICAgIHZhciB0ID0gTChuLnNvdXJjZSk7CiAgICBpZiAodCAmJiAobi5zb3VyY2UgPSB0LnVybCwgbi50eXBlID0gdC50eXBlLCBuLmFsbG93RnVsbHNjcmVlbiA9IHQuYWxsb3dGdWxsc2NyZWVuLCBuLndpZHRoID0gbi53aWR0aCB8fCBTdHJpbmcodC53KSwgbi5oZWlnaHQgPSBuLmhlaWdodCB8fCBTdHJpbmcodC5oKSksIG4uZW1iZWQpIHJldHVybiBFKG4uZW1iZWQsIG4sICEwKTsKICAgIHZhciBpID0gQShPKHIpLCBuLnNvdXJjZSk7CiAgICBpICYmIChuLnR5cGUgPSAic2NyaXB0Iiwgbi53aWR0aCA9IFN0cmluZyhpLndpZHRoKSwgbi5oZWlnaHQgPSBTdHJpbmcoaS5oZWlnaHQpKTsKICAgIHZhciBhLAogICAgICAgIG8sCiAgICAgICAgYywKICAgICAgICB1LAogICAgICAgIHMsCiAgICAgICAgbCwKICAgICAgICBtLAogICAgICAgIGQsCiAgICAgICAgaCA9IHIuZ2V0UGFyYW0oImF1ZGlvX3RlbXBsYXRlX2NhbGxiYWNrIiksCiAgICAgICAgZiA9IHIuZ2V0UGFyYW0oInZpZGVvX3RlbXBsYXRlX2NhbGxiYWNrIik7CiAgICByZXR1cm4gbi53aWR0aCA9IG4ud2lkdGggfHwgIjMwMCIsIG4uaGVpZ2h0ID0gbi5oZWlnaHQgfHwgIjE1MCIsIFMuZWFjaChuLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICBuW3RdID0gci5kb20uZW5jb2RlKCIiICsgZSk7CiAgICB9KSwgImlmcmFtZSIgPT09IG4udHlwZSA/IChkID0gKG0gPSBuKS5hbGxvd0Z1bGxzY3JlZW4gPyAnIGFsbG93RnVsbHNjcmVlbj0iMSInIDogIiIsICc8aWZyYW1lIHNyYz0iJyArIG0uc291cmNlICsgJyIgd2lkdGg9IicgKyBtLndpZHRoICsgJyIgaGVpZ2h0PSInICsgbS5oZWlnaHQgKyAnIicgKyBkICsgIj48L2lmcmFtZT4iKSA6ICJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCIgPT09IG4uc291cmNlbWltZSA/IChsID0gJzxvYmplY3QgZGF0YT0iJyArIChzID0gbikuc291cmNlICsgJyIgd2lkdGg9IicgKyBzLndpZHRoICsgJyIgaGVpZ2h0PSInICsgcy5oZWlnaHQgKyAnIiB0eXBlPSJhcHBsaWNhdGlvbi94LXNob2Nrd2F2ZS1mbGFzaCI+Jywgcy5wb3N0ZXIgJiYgKGwgKz0gJzxpbWcgc3JjPSInICsgcy5wb3N0ZXIgKyAnIiB3aWR0aD0iJyArIHMud2lkdGggKyAnIiBoZWlnaHQ9IicgKyBzLmhlaWdodCArICciIC8+JyksIGwgKz0gIjwvb2JqZWN0PiIpIDogLTEgIT09IG4uc291cmNlbWltZS5pbmRleE9mKCJhdWRpbyIpID8gKGMgPSBuLCAodSA9IGgpID8gdShjKSA6ICc8YXVkaW8gY29udHJvbHM9ImNvbnRyb2xzIiBzcmM9IicgKyBjLnNvdXJjZSArICciPicgKyAoYy5hbHRzb3VyY2UgPyAnXG48c291cmNlIHNyYz0iJyArIGMuYWx0c291cmNlICsgJyInICsgKGMuYWx0c291cmNlbWltZSA/ICcgdHlwZT0iJyArIGMuYWx0c291cmNlbWltZSArICciJyA6ICIiKSArICIgLz5cbiIgOiAiIikgKyAiPC9hdWRpbz4iKSA6ICJzY3JpcHQiID09PSBuLnR5cGUgPyAnPHNjcmlwdCBzcmM9IicgKyBuLnNvdXJjZSArICciPjxcL3NjcmlwdD4nIDogKGEgPSBuLCAobyA9IGYpID8gbyhhKSA6ICc8dmlkZW8gd2lkdGg9IicgKyBhLndpZHRoICsgJyIgaGVpZ2h0PSInICsgYS5oZWlnaHQgKyAnIicgKyAoYS5wb3N0ZXIgPyAnIHBvc3Rlcj0iJyArIGEucG9zdGVyICsgJyInIDogIiIpICsgJyBjb250cm9scz0iY29udHJvbHMiPlxuPHNvdXJjZSBzcmM9IicgKyBhLnNvdXJjZSArICciJyArIChhLnNvdXJjZW1pbWUgPyAnIHR5cGU9IicgKyBhLnNvdXJjZW1pbWUgKyAnIicgOiAiIikgKyAiIC8+XG4iICsgKGEuYWx0c291cmNlID8gJzxzb3VyY2Ugc3JjPSInICsgYS5hbHRzb3VyY2UgKyAnIicgKyAoYS5hbHRzb3VyY2VtaW1lID8gJyB0eXBlPSInICsgYS5hbHRzb3VyY2VtaW1lICsgJyInIDogIiIpICsgIiAvPlxuIiA6ICIiKSArICI8L3ZpZGVvPiIpOwogIH0sCiAgICAgIHEgPSB0aW55bWNlLnV0aWwuVG9vbHMucmVzb2x2ZSgidGlueW1jZS51dGlsLlByb21pc2UiKSwKICAgICAgQiA9IHt9LAogICAgICBXID0gZnVuY3Rpb24gVyh0KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgcmV0dXJuIEkodCwgZSk7CiAgICB9OwogIH0sCiAgICAgIEcgPSBmdW5jdGlvbiBHKGUsIHQpIHsKICAgIHZhciByLAogICAgICAgIG4sCiAgICAgICAgaSwKICAgICAgICBhLAogICAgICAgIG8sCiAgICAgICAgYyA9IGUuZ2V0UGFyYW0oIm1lZGlhX3VybF9yZXNvbHZlciIpOwogICAgcmV0dXJuIGMgPyAoaSA9IHQsIGEgPSBXKGUpLCBvID0gYywgbmV3IHEoZnVuY3Rpb24gKHQsIGUpIHsKICAgICAgdmFyIHIgPSBmdW5jdGlvbiByKGUpIHsKICAgICAgICByZXR1cm4gZS5odG1sICYmIChCW2kuc291cmNlXSA9IGUpLCB0KHsKICAgICAgICAgIHVybDogaS5zb3VyY2UsCiAgICAgICAgICBodG1sOiBlLmh0bWwgPyBlLmh0bWwgOiBhKGkpCiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICBCW2kuc291cmNlXSA/IHIoQltpLnNvdXJjZV0pIDogbyh7CiAgICAgICAgdXJsOiBpLnNvdXJjZQogICAgICB9LCByLCBlKTsKICAgIH0pKSA6IChyID0gdCwgbiA9IFcoZSksIG5ldyBxKGZ1bmN0aW9uIChlKSB7CiAgICAgIGUoewogICAgICAgIGh0bWw6IG4ociksCiAgICAgICAgdXJsOiByLnNvdXJjZQogICAgICB9KTsKICAgIH0pKTsKICB9LAogICAgICBIID0gZnVuY3Rpb24gSChhLCBvLCBjKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQsCiAgICAgICAgICByID0gZnVuY3Rpb24gcigpIHsKICAgICAgICByZXR1cm4geChhLCBlKTsKICAgICAgfSwKICAgICAgICAgIG4gPSBmdW5jdGlvbiBuKCkgewogICAgICAgIHJldHVybiB4KG8sIGUpOwogICAgICB9LAogICAgICAgICAgaSA9IGZ1bmN0aW9uIGkoZSkgewogICAgICAgIHJldHVybiB4KGUsICJ2YWx1ZSIpLmJpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiAwIDwgZS5sZW5ndGggPyBsLnNvbWUoZSkgOiBsLm5vbmUoKTsKICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHJldHVybiAodCA9IHt9KVtlXSA9IChlID09PSBjID8gcigpLmJpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gaChlKSA/IGkoZSkub3JUaHVuayhuKSA6IG4oKS5vclRodW5rKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiBsLmZyb20oZSk7CiAgICAgICAgfSk7CiAgICAgIH0pIDogbigpLm9yVGh1bmsoZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiByKCkuYmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgcmV0dXJuIGgoZSkgPyBpKGUpIDogbC5mcm9tKGUpOwogICAgICAgIH0pOwogICAgICB9KSkuZ2V0T3IoIiIpLCB0OwogICAgfTsKICB9LAogICAgICBKID0gZnVuY3Rpb24gSihlLCB0KSB7CiAgICB2YXIgciwKICAgICAgICBuLAogICAgICAgIGkgPSB0ID8geChlLCB0KS5iaW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgIHJldHVybiB4KGUsICJtZXRhIik7CiAgICB9KS5nZXRPcih7fSkgOiB7fSwKICAgICAgICBhID0gSChlLCBpLCB0KTsKICAgIHJldHVybiBfcChfcChfcChfcChfcCh7fSwgYSgic291cmNlIikpLCBhKCJhbHRzb3VyY2UiKSksIGEoInBvc3RlciIpKSwgYSgiZW1iZWQiKSksIChyID0gaSwgbiA9IHt9LCB4KGUsICJkaW1lbnNpb25zIikuZWFjaChmdW5jdGlvbiAoZSkgewogICAgICBmKFsid2lkdGgiLCAiaGVpZ2h0Il0sIGZ1bmN0aW9uICh0KSB7CiAgICAgICAgeChyLCB0KS5vclRodW5rKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJldHVybiB4KGUsIHQpOwogICAgICAgIH0pLmVhY2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJldHVybiBuW3RdID0gZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KSwgbikpOwogIH0sCiAgICAgIEsgPSBmdW5jdGlvbiBLKGUpIHsKICAgIHZhciBuID0gX3AoX3Aoe30sIGUpLCB7CiAgICAgIHNvdXJjZTogewogICAgICAgIHZhbHVlOiB4KGUsICJzb3VyY2UiKS5nZXRPcigiIikKICAgICAgfSwKICAgICAgYWx0c291cmNlOiB7CiAgICAgICAgdmFsdWU6IHgoZSwgImFsdHNvdXJjZSIpLmdldE9yKCIiKQogICAgICB9LAogICAgICBwb3N0ZXI6IHsKICAgICAgICB2YWx1ZTogeChlLCAicG9zdGVyIikuZ2V0T3IoIiIpCiAgICAgIH0KICAgIH0pOwoKICAgIHJldHVybiBmKFsid2lkdGgiLCAiaGVpZ2h0Il0sIGZ1bmN0aW9uIChyKSB7CiAgICAgIHgoZSwgcikuZWFjaChmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciB0ID0gbi5kaW1lbnNpb25zIHx8IHt9OwogICAgICAgIHRbcl0gPSBlLCBuLmRpbWVuc2lvbnMgPSB0OwogICAgICB9KTsKICAgIH0pLCBuOwogIH0sCiAgICAgIFEgPSBmdW5jdGlvbiBRKHIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdCA9IGUgJiYgZS5tc2cgPyAiTWVkaWEgZW1iZWQgaGFuZGxlciBlcnJvcjogIiArIGUubXNnIDogIk1lZGlhIGVtYmVkIGhhbmRsZXIgdGhyZXcgdW5rbm93biBlcnJvci4iOwogICAgICByLm5vdGlmaWNhdGlvbk1hbmFnZXIub3Blbih7CiAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICB0ZXh0OiB0CiAgICAgIH0pOwogICAgfTsKICB9LAogICAgICBWID0gZnVuY3Rpb24gVihlLCB0KSB7CiAgICByZXR1cm4gUChPKGUpLCB0KTsKICB9LAogICAgICBYID0gZnVuY3Rpb24gWChpLCBhKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKGQoZS51cmwpICYmIDAgPCBlLnVybC50cmltKCkubGVuZ3RoKSB7CiAgICAgICAgdmFyIHQgPSBlLmh0bWwsCiAgICAgICAgICAgIHIgPSBWKGEsIHQpLAogICAgICAgICAgICBuID0gX3AoX3Aoe30sIHIpLCB7CiAgICAgICAgICBzb3VyY2U6IGUudXJsLAogICAgICAgICAgZW1iZWQ6IHQKICAgICAgICB9KTsKCiAgICAgICAgaS5zZXREYXRhKEsobikpOwogICAgICB9CiAgICB9OwogIH0sCiAgICAgIFkgPSBmdW5jdGlvbiBZKGUsIHQpIHsKICAgIHZhciByID0gZS5kb20uc2VsZWN0KCJpbWdbZGF0YS1tY2Utb2JqZWN0XSIpOwogICAgZS5pbnNlcnRDb250ZW50KHQpLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICBmb3IgKHZhciByID0gZS5kb20uc2VsZWN0KCJpbWdbZGF0YS1tY2Utb2JqZWN0XSIpLCBuID0gMDsgbiA8IHQubGVuZ3RoOyBuKyspIHsKICAgICAgICBmb3IgKHZhciBpID0gci5sZW5ndGggLSAxOyAwIDw9IGk7IGktLSkgewogICAgICAgICAgdFtuXSA9PT0gcltpXSAmJiByLnNwbGljZShpLCAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGUuc2VsZWN0aW9uLnNlbGVjdChyWzBdKTsKICAgIH0oZSwgciksIGUubm9kZUNoYW5nZWQoKTsKICB9LAogICAgICBaID0gZnVuY3Rpb24gWihlLCB0LCByKSB7CiAgICB2YXIgbjsKICAgIHQuZW1iZWQgPSBFKHQuZW1iZWQsIHQpLCB0LmVtYmVkICYmIChlLnNvdXJjZSA9PT0gdC5zb3VyY2UgfHwgKG4gPSB0LnNvdXJjZSwgQi5oYXNPd25Qcm9wZXJ0eShuKSkpID8gWShyLCB0LmVtYmVkKSA6IEcociwgdCkudGhlbihmdW5jdGlvbiAoZSkgewogICAgICBZKHIsIGUuaHRtbCk7CiAgICB9KVsiY2F0Y2giXShRKHIpKTsKICB9LAogICAgICBlZSA9IGZ1bmN0aW9uIGVlKG0pIHsKICAgIHZhciBlLAogICAgICAgIHQsCiAgICAgICAgciwKICAgICAgICBuLAogICAgICAgIGkgPSAociA9IChlID0gbSkuc2VsZWN0aW9uLmdldE5vZGUoKSwgbiA9ICh0ID0gcikuZ2V0QXR0cmlidXRlKCJkYXRhLW1jZS1vYmplY3QiKSB8fCB0LmdldEF0dHJpYnV0ZSgiZGF0YS1lcGhveC1lbWJlZC1pcmkiKSA/IGUuc2VyaWFsaXplci5zZXJpYWxpemUociwgewogICAgICBzZWxlY3Rpb246ICEwCiAgICB9KSA6ICIiLCBfcCh7CiAgICAgIGVtYmVkOiBuCiAgICB9LCBQKE8oZSksIG4pKSksCiAgICAgICAgZCA9IHcoaSksCiAgICAgICAgYSA9IEsoaSksCiAgICAgICAgbyA9IHsKICAgICAgdGl0bGU6ICJHZW5lcmFsIiwKICAgICAgbmFtZTogImdlbmVyYWwiLAogICAgICBpdGVtczogZnVuY3Rpb24gKGUpIHsKICAgICAgICBmb3IgKHZhciB0ID0gW10sIHIgPSAwLCBuID0gZS5sZW5ndGg7IHIgPCBuOyArK3IpIHsKICAgICAgICAgIGlmICghZyhlW3JdKSkgdGhyb3cgbmV3IEVycm9yKCJBcnIuZmxhdHRlbiBpdGVtICIgKyByICsgIiB3YXMgbm90IGFuIGFycmF5LCBpbnB1dDogIiArIGUpOwogICAgICAgICAgdi5hcHBseSh0LCBlW3JdKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB0OwogICAgICB9KFtbewogICAgICAgIG5hbWU6ICJzb3VyY2UiLAogICAgICAgIHR5cGU6ICJ1cmxpbnB1dCIsCiAgICAgICAgZmlsZXR5cGU6ICJtZWRpYSIsCiAgICAgICAgbGFiZWw6ICJTb3VyY2UiCiAgICAgIH1dLCBtLmdldFBhcmFtKCJtZWRpYV9kaW1lbnNpb25zIiwgITApID8gW3sKICAgICAgICB0eXBlOiAic2l6ZWlucHV0IiwKICAgICAgICBuYW1lOiAiZGltZW5zaW9ucyIsCiAgICAgICAgbGFiZWw6ICJDb25zdHJhaW4gcHJvcG9ydGlvbnMiLAogICAgICAgIGNvbnN0cmFpbjogITAKICAgICAgfV0gOiBbXV0pCiAgICB9LAogICAgICAgIGMgPSB7CiAgICAgIHRpdGxlOiAiRW1iZWQiLAogICAgICBpdGVtczogW3sKICAgICAgICB0eXBlOiAidGV4dGFyZWEiLAogICAgICAgIG5hbWU6ICJlbWJlZCIsCiAgICAgICAgbGFiZWw6ICJQYXN0ZSB5b3VyIGVtYmVkIGNvZGUgYmVsb3c6IgogICAgICB9XQogICAgfSwKICAgICAgICB1ID0gW107CiAgICBtLmdldFBhcmFtKCJtZWRpYV9hbHRfc291cmNlIiwgITApICYmIHUucHVzaCh7CiAgICAgIG5hbWU6ICJhbHRzb3VyY2UiLAogICAgICB0eXBlOiAidXJsaW5wdXQiLAogICAgICBmaWxldHlwZTogIm1lZGlhIiwKICAgICAgbGFiZWw6ICJBbHRlcm5hdGl2ZSBzb3VyY2UgVVJMIgogICAgfSksIG0uZ2V0UGFyYW0oIm1lZGlhX3Bvc3RlciIsICEwKSAmJiB1LnB1c2goewogICAgICBuYW1lOiAicG9zdGVyIiwKICAgICAgdHlwZTogInVybGlucHV0IiwKICAgICAgZmlsZXR5cGU6ICJpbWFnZSIsCiAgICAgIGxhYmVsOiAiTWVkaWEgcG9zdGVyIChJbWFnZSBVUkwpIgogICAgfSk7CiAgICB2YXIgcyA9IHsKICAgICAgdGl0bGU6ICJBZHZhbmNlZCIsCiAgICAgIG5hbWU6ICJhZHZhbmNlZCIsCiAgICAgIGl0ZW1zOiB1CiAgICB9LAogICAgICAgIGwgPSBbbywgY107CiAgICAwIDwgdS5sZW5ndGggJiYgbC5wdXNoKHMpOwogICAgdmFyIGggPSB7CiAgICAgIHR5cGU6ICJ0YWJwYW5lbCIsCiAgICAgIHRhYnM6IGwKICAgIH0sCiAgICAgICAgZiA9IG0ud2luZG93TWFuYWdlci5vcGVuKHsKICAgICAgdGl0bGU6ICJJbnNlcnQvRWRpdCBNZWRpYSIsCiAgICAgIHNpemU6ICJub3JtYWwiLAogICAgICBib2R5OiBoLAogICAgICBidXR0b25zOiBbewogICAgICAgIHR5cGU6ICJjYW5jZWwiLAogICAgICAgIG5hbWU6ICJjYW5jZWwiLAogICAgICAgIHRleHQ6ICJDYW5jZWwiCiAgICAgIH0sIHsKICAgICAgICB0eXBlOiAic3VibWl0IiwKICAgICAgICBuYW1lOiAic2F2ZSIsCiAgICAgICAgdGV4dDogIlNhdmUiLAogICAgICAgIHByaW1hcnk6ICEwCiAgICAgIH1dLAogICAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoZSkgewogICAgICAgIHZhciB0ID0gSihlLmdldERhdGEoKSk7CiAgICAgICAgWihkLmdldCgpLCB0LCBtKSwgZS5jbG9zZSgpOwogICAgICB9LAogICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UoZSwgdCkgewogICAgICAgIHN3aXRjaCAodC5uYW1lKSB7CiAgICAgICAgICBjYXNlICJzb3VyY2UiOgogICAgICAgICAgICBzID0gZC5nZXQoKSwgbCA9IEooZS5nZXREYXRhKCksICJzb3VyY2UiKSwgcy5zb3VyY2UgIT09IGwuc291cmNlICYmIChYKGYsIG0pKHsKICAgICAgICAgICAgICB1cmw6IGwuc291cmNlLAogICAgICAgICAgICAgIGh0bWw6ICIiCiAgICAgICAgICAgIH0pLCBHKG0sIGwpLnRoZW4oWChmLCBtKSlbImNhdGNoIl0oUShtKSkpOwogICAgICAgICAgICBicmVhazsKCiAgICAgICAgICBjYXNlICJlbWJlZCI6CiAgICAgICAgICAgIGMgPSBKKChvID0gZSkuZ2V0RGF0YSgpKSwgdSA9IFYobSwgYy5lbWJlZCksIG8uc2V0RGF0YShLKHUpKTsKICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgY2FzZSAiZGltZW5zaW9ucyI6CiAgICAgICAgICBjYXNlICJhbHRzb3VyY2UiOgogICAgICAgICAgY2FzZSAicG9zdGVyIjoKICAgICAgICAgICAgciA9IGUsIG4gPSB0Lm5hbWUsIGkgPSBKKHIuZ2V0RGF0YSgpLCBuKSwgYSA9IEkobSwgaSksIHIuc2V0RGF0YShLKF9wKF9wKHt9LCBpKSwgewogICAgICAgICAgICAgIGVtYmVkOiBhCiAgICAgICAgICAgIH0pKSk7CiAgICAgICAgfQoKICAgICAgICB2YXIgciwgbiwgaSwgYSwgbywgYywgdSwgcywgbDsKICAgICAgICBkLnNldChKKGUuZ2V0RGF0YSgpKSk7CiAgICAgIH0sCiAgICAgIGluaXRpYWxEYXRhOiBhCiAgICB9KTsKICB9LAogICAgICB0ZSA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCJ0aW55bWNlLmh0bWwuTm9kZSIpLAogICAgICByZSA9IHRpbnltY2UudXRpbC5Ub29scy5yZXNvbHZlKCJ0aW55bWNlLkVudiIpLAogICAgICBuZSA9IGZ1bmN0aW9uIG5lKGEsIGUpIHsKICAgIGlmICghMSA9PT0gYS5nZXRQYXJhbSgibWVkaWFfZmlsdGVyX2h0bWwiLCAhMCkpIHJldHVybiBlOwogICAgdmFyIG8sCiAgICAgICAgYyA9IEYoKTsKICAgIHJldHVybiBrKHsKICAgICAgdmFsaWRhdGU6ICExLAogICAgICBhbGxvd19jb25kaXRpb25hbF9jb21tZW50czogITEsCiAgICAgIGNvbW1lbnQ6IGZ1bmN0aW9uIGNvbW1lbnQoZSkgewogICAgICAgIGMuY29tbWVudChlKTsKICAgICAgfSwKICAgICAgY2RhdGE6IGZ1bmN0aW9uIGNkYXRhKGUpIHsKICAgICAgICBjLmNkYXRhKGUpOwogICAgICB9LAogICAgICB0ZXh0OiBmdW5jdGlvbiB0ZXh0KGUsIHQpIHsKICAgICAgICBjLnRleHQoZSwgdCk7CiAgICAgIH0sCiAgICAgIHN0YXJ0OiBmdW5jdGlvbiBzdGFydChlLCB0LCByKSB7CiAgICAgICAgaWYgKG8gPSAhMCwgInNjcmlwdCIgIT09IGUgJiYgIm5vc2NyaXB0IiAhPT0gZSAmJiAic3ZnIiAhPT0gZSkgewogICAgICAgICAgZm9yICh2YXIgbiA9IHQubGVuZ3RoIC0gMTsgMCA8PSBuOyBuLS0pIHsKICAgICAgICAgICAgdmFyIGkgPSB0W25dLm5hbWU7CiAgICAgICAgICAgIDAgPT09IGkuaW5kZXhPZigib24iKSAmJiAoZGVsZXRlIHQubWFwW2ldLCB0LnNwbGljZShuLCAxKSksICJzdHlsZSIgPT09IGkgJiYgKHRbbl0udmFsdWUgPSBhLmRvbS5zZXJpYWxpemVTdHlsZShhLmRvbS5wYXJzZVN0eWxlKHRbbl0udmFsdWUpLCBlKSk7CiAgICAgICAgICB9CgogICAgICAgICAgYy5zdGFydChlLCB0LCByKSwgbyA9ICExOwogICAgICAgIH0KICAgICAgfSwKICAgICAgZW5kOiBmdW5jdGlvbiBlbmQoZSkgewogICAgICAgIG8gfHwgYy5lbmQoZSk7CiAgICAgIH0KICAgIH0sICQoe30pKS5wYXJzZShlKSwgYy5nZXRDb250ZW50KCk7CiAgfSwKICAgICAgaWUgPSBmdW5jdGlvbiBpZShlLCB0KSB7CiAgICB2YXIgciA9IHQubmFtZSwKICAgICAgICBuID0gbmV3IHRlKCJzcGFuIiwgMSk7CiAgICBuLmF0dHIoewogICAgICBjb250ZW50RWRpdGFibGU6ICJmYWxzZSIsCiAgICAgIHN0eWxlOiB0LmF0dHIoInN0eWxlIiksCiAgICAgICJkYXRhLW1jZS1vYmplY3QiOiByLAogICAgICAiY2xhc3MiOiAibWNlLXByZXZpZXctb2JqZWN0IG1jZS1vYmplY3QtIiArIHIKICAgIH0pLCBhZShlLCB0LCBuKTsKICAgIHZhciBpID0gbmV3IHRlKHIsIDEpOwogICAgaS5hdHRyKHsKICAgICAgc3JjOiB0LmF0dHIoInNyYyIpLAogICAgICBhbGxvd2Z1bGxzY3JlZW46IHQuYXR0cigiYWxsb3dmdWxsc2NyZWVuIiksCiAgICAgIHN0eWxlOiB0LmF0dHIoInN0eWxlIiksCiAgICAgICJjbGFzcyI6IHQuYXR0cigiY2xhc3MiKSwKICAgICAgd2lkdGg6IHQuYXR0cigid2lkdGgiKSwKICAgICAgaGVpZ2h0OiB0LmF0dHIoImhlaWdodCIpLAogICAgICBmcmFtZWJvcmRlcjogIjAiCiAgICB9KTsKICAgIHZhciBhID0gbmV3IHRlKCJzcGFuIiwgMSk7CiAgICByZXR1cm4gYS5hdHRyKCJjbGFzcyIsICJtY2Utc2hpbSIpLCBuLmFwcGVuZChpKSwgbi5hcHBlbmQoYSksIG47CiAgfSwKICAgICAgYWUgPSBmdW5jdGlvbiBhZShlLCB0LCByKSB7CiAgICB2YXIgbiwKICAgICAgICBpLAogICAgICAgIGEsCiAgICAgICAgbyA9IHQuYXR0cmlidXRlczsKCiAgICBmb3IgKGEgPSBvLmxlbmd0aDsgYS0tOykgewogICAgICBuID0gb1thXS5uYW1lLCBpID0gb1thXS52YWx1ZSwgIndpZHRoIiAhPT0gbiAmJiAiaGVpZ2h0IiAhPT0gbiAmJiAic3R5bGUiICE9PSBuICYmICgiZGF0YSIgIT09IG4gJiYgInNyYyIgIT09IG4gfHwgKGkgPSBlLmNvbnZlcnRVUkwoaSwgbikpLCByLmF0dHIoImRhdGEtbWNlLXAtIiArIG4sIGkpKTsKICAgIH0KCiAgICB2YXIgYyA9IHQuZmlyc3RDaGlsZCAmJiB0LmZpcnN0Q2hpbGQudmFsdWU7CiAgICBjICYmIChyLmF0dHIoImRhdGEtbWNlLWh0bWwiLCBlc2NhcGUobmUoZSwgYykpKSwgci5maXJzdENoaWxkID0gbnVsbCk7CiAgfSwKICAgICAgb2UgPSBmdW5jdGlvbiBvZShlKSB7CiAgICBmb3IgKDsgZSA9IGUucGFyZW50OykgewogICAgICBpZiAoZS5hdHRyKCJkYXRhLWVwaG94LWVtYmVkLWlyaSIpIHx8ICh0ID0gZS5hdHRyKCJjbGFzcyIpKSAmJiAvXGJ0aW55LXBhZ2VlbWJlZFxiLy50ZXN0KHQpKSByZXR1cm4gITA7CiAgICB9CgogICAgdmFyIHQ7CiAgICByZXR1cm4gITE7CiAgfSwKICAgICAgY2UgPSBmdW5jdGlvbiBjZSh1KSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGUpIHsKICAgICAgZm9yICh2YXIgdCwgciwgbiwgaSwgYSwgbywgYyA9IGUubGVuZ3RoOyBjLS07KSB7CiAgICAgICAgKHQgPSBlW2NdKS5wYXJlbnQgJiYgKHQucGFyZW50LmF0dHIoImRhdGEtbWNlLW9iamVjdCIpIHx8ICJzY3JpcHQiID09PSB0Lm5hbWUgJiYgIShyID0gQShPKHUpLCB0LmF0dHIoInNyYyIpKSkgfHwgKHIgJiYgKHIud2lkdGggJiYgdC5hdHRyKCJ3aWR0aCIsIHIud2lkdGgudG9TdHJpbmcoKSksIHIuaGVpZ2h0ICYmIHQuYXR0cigiaGVpZ2h0Iiwgci5oZWlnaHQudG9TdHJpbmcoKSkpLCAiaWZyYW1lIiA9PT0gdC5uYW1lICYmIHUuZ2V0UGFyYW0oIm1lZGlhX2xpdmVfZW1iZWRzIiwgITApICYmIHJlLmNlRmFsc2UgPyBvZSh0KSB8fCB0LnJlcGxhY2UoaWUodSwgdCkpIDogb2UodCkgfHwgdC5yZXBsYWNlKChuID0gdSwgbyA9IHZvaWQgMCwgYSA9IChpID0gdCkubmFtZSwgKG8gPSBuZXcgdGUoImltZyIsIDEpKS5zaG9ydEVuZGVkID0gITAsIGFlKG4sIGksIG8pLCBvLmF0dHIoewogICAgICAgICAgd2lkdGg6IGkuYXR0cigid2lkdGgiKSB8fCAiMzAwIiwKICAgICAgICAgIGhlaWdodDogaS5hdHRyKCJoZWlnaHQiKSB8fCAoImF1ZGlvIiA9PT0gYSA/ICIzMCIgOiAiMTUwIiksCiAgICAgICAgICBzdHlsZTogaS5hdHRyKCJzdHlsZSIpLAogICAgICAgICAgc3JjOiByZS50cmFuc3BhcmVudFNyYywKICAgICAgICAgICJkYXRhLW1jZS1vYmplY3QiOiBhLAogICAgICAgICAgImNsYXNzIjogIm1jZS1vYmplY3QgbWNlLW9iamVjdC0iICsgYQogICAgICAgIH0pLCBvKSkpKTsKICAgICAgfQogICAgfTsKICB9LAogICAgICB1ZSA9IGZ1bmN0aW9uIHVlKGUpIHsKICAgIHZhciB0LCByOwogICAgZS51aS5yZWdpc3RyeS5hZGRUb2dnbGVCdXR0b24oIm1lZGlhIiwgewogICAgICB0b29sdGlwOiAiSW5zZXJ0L2VkaXQgbWVkaWEiLAogICAgICBpY29uOiAiZW1iZWQiLAogICAgICBvbkFjdGlvbjogZnVuY3Rpb24gb25BY3Rpb24oKSB7CiAgICAgICAgZS5leGVjQ29tbWFuZCgibWNlTWVkaWEiKTsKICAgICAgfSwKICAgICAgb25TZXR1cDogKHQgPSBlLCByID0gWyJpbWdbZGF0YS1tY2Utb2JqZWN0XSIsICJzcGFuW2RhdGEtbWNlLW9iamVjdF0iLCAiZGl2W2RhdGEtZXBob3gtZW1iZWQtaXJpXSJdLCBmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiB0LnNlbGVjdGlvbi5zZWxlY3RvckNoYW5nZWRXaXRoVW5iaW5kKHIuam9pbigiLCIpLCBlLnNldEFjdGl2ZSkudW5iaW5kOwogICAgICB9KQogICAgfSksIGUudWkucmVnaXN0cnkuYWRkTWVudUl0ZW0oIm1lZGlhIiwgewogICAgICBpY29uOiAiZW1iZWQiLAogICAgICB0ZXh0OiAiTWVkaWEuLi4iLAogICAgICBvbkFjdGlvbjogZnVuY3Rpb24gb25BY3Rpb24oKSB7CiAgICAgICAgZS5leGVjQ29tbWFuZCgibWNlTWVkaWEiKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgIWZ1bmN0aW9uIHNlKCkgewogICAgbi5hZGQoIm1lZGlhIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgdmFyIHQsIGQsIHIsIG47CiAgICAgIHJldHVybiAodCA9IGUpLmFkZENvbW1hbmQoIm1jZU1lZGlhIiwgZnVuY3Rpb24gKCkgewogICAgICAgIGVlKHQpOwogICAgICB9KSwgdWUoZSksIGUub24oIlJlc29sdmVOYW1lIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgdDsKICAgICAgICAxID09PSBlLnRhcmdldC5ub2RlVHlwZSAmJiAodCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgiZGF0YS1tY2Utb2JqZWN0IikpICYmIChlLm5hbWUgPSB0KTsKICAgICAgfSksIChkID0gZSkub24oInByZUluaXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHQgPSBkLnNjaGVtYS5nZXRTcGVjaWFsRWxlbWVudHMoKTsKICAgICAgICBTLmVhY2goInZpZGVvIGF1ZGlvIGlmcmFtZSBvYmplY3QiLnNwbGl0KCIgIiksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB0W2VdID0gbmV3IFJlZ0V4cCgiPC8iICsgZSArICJbXj5dKj4iLCAiZ2kiKTsKICAgICAgICB9KTsKICAgICAgICB2YXIgciA9IGQuc2NoZW1hLmdldEJvb2xBdHRycygpOwogICAgICAgIFMuZWFjaCgid2Via2l0YWxsb3dmdWxsc2NyZWVuIG1vemFsbG93ZnVsbHNjcmVlbiBhbGxvd2Z1bGxzY3JlZW4iLnNwbGl0KCIgIiksIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByW2VdID0ge307CiAgICAgICAgfSksIGQucGFyc2VyLmFkZE5vZGVGaWx0ZXIoImlmcmFtZSx2aWRlbyxhdWRpbyxvYmplY3QsZW1iZWQsc2NyaXB0IiwgY2UoZCkpLCBkLnNlcmlhbGl6ZXIuYWRkQXR0cmlidXRlRmlsdGVyKCJkYXRhLW1jZS1vYmplY3QiLCBmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgZm9yICh2YXIgciwgbiwgaSwgYSwgbywgYywgdSwgcywgbCA9IGUubGVuZ3RoOyBsLS07KSB7CiAgICAgICAgICAgIGlmICgociA9IGVbbF0pLnBhcmVudCkgewogICAgICAgICAgICAgIGZvciAodSA9IHIuYXR0cih0KSwgbiA9IG5ldyB0ZSh1LCAxKSwgImF1ZGlvIiAhPT0gdSAmJiAic2NyaXB0IiAhPT0gdSAmJiAoKHMgPSByLmF0dHIoImNsYXNzIikpICYmIC0xICE9PSBzLmluZGV4T2YoIm1jZS1wcmV2aWV3LW9iamVjdCIpID8gbi5hdHRyKHsKICAgICAgICAgICAgICAgIHdpZHRoOiByLmZpcnN0Q2hpbGQuYXR0cigid2lkdGgiKSwKICAgICAgICAgICAgICAgIGhlaWdodDogci5maXJzdENoaWxkLmF0dHIoImhlaWdodCIpCiAgICAgICAgICAgICAgfSkgOiBuLmF0dHIoewogICAgICAgICAgICAgICAgd2lkdGg6IHIuYXR0cigid2lkdGgiKSwKICAgICAgICAgICAgICAgIGhlaWdodDogci5hdHRyKCJoZWlnaHQiKQogICAgICAgICAgICAgIH0pKSwgbi5hdHRyKHsKICAgICAgICAgICAgICAgIHN0eWxlOiByLmF0dHIoInN0eWxlIikKICAgICAgICAgICAgICB9KSwgaSA9IChhID0gci5hdHRyaWJ1dGVzKS5sZW5ndGg7IGktLTspIHsKICAgICAgICAgICAgICAgIHZhciBtID0gYVtpXS5uYW1lOwogICAgICAgICAgICAgICAgMCA9PT0gbS5pbmRleE9mKCJkYXRhLW1jZS1wLSIpICYmIG4uYXR0cihtLnN1YnN0cigxMSksIGFbaV0udmFsdWUpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgInNjcmlwdCIgPT09IHUgJiYgbi5hdHRyKCJ0eXBlIiwgInRleHQvamF2YXNjcmlwdCIpLCAobyA9IHIuYXR0cigiZGF0YS1tY2UtaHRtbCIpKSAmJiAoKGMgPSBuZXcgdGUoIiN0ZXh0IiwgMykpLnJhdyA9ICEwLCBjLnZhbHVlID0gbmUoZCwgdW5lc2NhcGUobykpLCBuLmFwcGVuZChjKSksIHIucmVwbGFjZShuKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KSwgZC5vbigiU2V0Q29udGVudCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICBkLiQoInNwYW4ubWNlLXByZXZpZXctb2JqZWN0IikuZWFjaChmdW5jdGlvbiAoZSwgdCkgewogICAgICAgICAgdmFyIHIgPSBkLiQodCk7CiAgICAgICAgICAwID09PSByLmZpbmQoInNwYW4ubWNlLXNoaW0iKS5sZW5ndGggJiYgci5hcHBlbmQoJzxzcGFuIGNsYXNzPSJtY2Utc2hpbSI+PC9zcGFuPicpOwogICAgICAgIH0pOwogICAgICB9KSwgKHIgPSBlKS5vbigiY2xpY2sga2V5dXAgdG91Y2hlbmQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGUgPSByLnNlbGVjdGlvbi5nZXROb2RlKCk7CiAgICAgICAgZSAmJiByLmRvbS5oYXNDbGFzcyhlLCAibWNlLXByZXZpZXctb2JqZWN0IikgJiYgci5kb20uZ2V0QXR0cmliKGUsICJkYXRhLW1jZS1zZWxlY3RlZCIpICYmIGUuc2V0QXR0cmlidXRlKCJkYXRhLW1jZS1zZWxlY3RlZCIsICIyIik7CiAgICAgIH0pLCByLm9uKCJPYmplY3RTZWxlY3RlZCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQgPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoImRhdGEtbWNlLW9iamVjdCIpOwogICAgICAgICJhdWRpbyIgIT09IHQgJiYgInNjcmlwdCIgIT09IHQgfHwgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB9KSwgci5vbigiT2JqZWN0UmVzaXplZCIsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgdmFyIHQsCiAgICAgICAgICAgIHIgPSBlLnRhcmdldDsKICAgICAgICByLmdldEF0dHJpYnV0ZSgiZGF0YS1tY2Utb2JqZWN0IikgJiYgKHQgPSByLmdldEF0dHJpYnV0ZSgiZGF0YS1tY2UtaHRtbCIpKSAmJiAodCA9IHVuZXNjYXBlKHQpLCByLnNldEF0dHJpYnV0ZSgiZGF0YS1tY2UtaHRtbCIsIGVzY2FwZShFKHQsIHsKICAgICAgICAgIHdpZHRoOiBTdHJpbmcoZS53aWR0aCksCiAgICAgICAgICBoZWlnaHQ6IFN0cmluZyhlLmhlaWdodCkKICAgICAgICB9KSkpKTsKICAgICAgfSksIG4gPSBlLCB7CiAgICAgICAgc2hvd0RpYWxvZzogZnVuY3Rpb24gc2hvd0RpYWxvZygpIHsKICAgICAgICAgIGVlKG4pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0pOwogIH0oKTsKfSgpOw=="},{"version":3,"sources":["C:/Users/wakk/GolandProjects/GinBlog/web/admin/src/components/editor/plugins/media/plugin.min.js"],"names":["e","t","r","n","tinymce","util","Tools","resolve","p","Object","assign","arguments","length","i","prototype","hasOwnProperty","call","apply","a","o","c","u","isNone","fold","is","isSome","getOr","getOrThunk","getOrDie","Error","getOrNull","getOrUndefined","undefined","or","orThunk","map","each","bind","exists","forall","filter","equals","equals_","toArray","toString","s","l","some","none","from","m","Array","isPrototypeOf","constructor","name","String","d","h","g","v","push","f","w","get","set","b","keys","y","x","j","O","getParam","S","_","k","A","indexOf","T","DOM","C","replace","P","validate","allow_conditional_comments","start","style","parseStyle","type","source","altsource","poster","width","height","movie","extend","src","parse","data","D","mp3","m4a","wav","mp4","webm","ogg","swf","toLowerCase","split","pop","$","F","M","z","test","N","value","splice","U","E","comment","cdata","text","serializeStyle","end","getContent","R","regex","url","allowFullscreen","L","match","exec","I","embed","convertURL","sourcemime","altsourcemime","dom","encode","q","B","W","G","html","H","J","K","dimensions","Q","msg","notificationManager","open","V","X","trim","setData","Y","select","insertContent","selection","nodeChanged","Z","then","ee","getNode","getAttribute","serializer","serialize","title","items","filetype","label","constrain","tabs","windowManager","size","body","buttons","primary","onSubmit","getData","close","onChange","initialData","te","re","ne","ie","attr","contentEditable","ae","allowfullscreen","frameborder","append","attributes","firstChild","escape","oe","parent","ce","ceFalse","shortEnded","transparentSrc","ue","ui","registry","addToggleButton","tooltip","icon","onAction","execCommand","onSetup","selectorChangedWithUnbind","join","setActive","unbind","addMenuItem","se","add","addCommand","on","target","nodeType","schema","getSpecialElements","RegExp","getBoolAttrs","parser","addNodeFilter","addAttributeFilter","substr","raw","unescape","find","hasClass","getAttrib","setAttribute","preventDefault","showDialog"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) Tiny Technologies, Inc. All rights reserved.\n * Licensed under the LGPL or a commercial license.\n * For LGPL see License.txt in the project root for license information.\n * For commercial licenses see https://www.tiny.cloud/\n *\n * Version: 5.4.2 (2020-08-17)\n */\n!function(){\"use strict\";var e,t,r,n=tinymce.util.Tools.resolve(\"tinymce.PluginManager\"),p=function(){return(p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},a=function(e){return function(){return e}},o=a(!1),c=a(!0),i=function(){return u},u=(e=function(e){return e.isNone()},{fold:function(e,t){return e()},is:o,isSome:o,isNone:c,getOr:r=function(e){return e},getOrThunk:t=function(e){return e()},getOrDie:function(e){throw new Error(e||\"error: getOrDie called on none.\")},getOrNull:a(null),getOrUndefined:a(undefined),or:r,orThunk:t,map:i,each:function(){},bind:i,exists:o,forall:c,filter:i,equals:e,equals_:e,toArray:function(){return[]},toString:a(\"none()\")}),s=function(r){var e=a(r),t=function(){return i},n=function(e){return e(r)},i={fold:function(e,t){return t(r)},is:function(e){return r===e},isSome:c,isNone:o,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:t,orThunk:t,map:function(e){return s(e(r))},each:function(e){e(r)},bind:n,exists:n,forall:n,filter:function(e){return e(r)?i:u},toArray:function(){return[r]},toString:function(){return\"some(\"+r+\")\"},equals:function(e){return e.is(r)},equals_:function(e,t){return e.fold(o,function(e){return t(r,e)})}};return i},l={some:s,none:i,from:function(e){return null===e||e===undefined?u:s(e)}},m=function(n){return function(e){return r=typeof(t=e),(null===t?\"null\":\"object\"==r&&(Array.prototype.isPrototypeOf(t)||t.constructor&&\"Array\"===t.constructor.name)?\"array\":\"object\"==r&&(String.prototype.isPrototypeOf(t)||t.constructor&&\"String\"===t.constructor.name)?\"string\":r)===n;var t,r}},d=m(\"string\"),h=m(\"object\"),g=m(\"array\"),v=Array.prototype.push,f=function(e,t){for(var r=0,n=e.length;r<n;r++){t(e[r],r)}},w=function(e){var t=e;return{get:function(){return t},set:function(e){t=e}}},b=Object.keys,y=Object.hasOwnProperty,x=function(e,t){return j(e,t)?l.from(e[t]):l.none()},j=function(e,t){return y.call(e,t)},O=function(e){return e.getParam(\"media_scripts\")},S=tinymce.util.Tools.resolve(\"tinymce.util.Tools\"),_=tinymce.util.Tools.resolve(\"tinymce.dom.DOMUtils\"),k=tinymce.util.Tools.resolve(\"tinymce.html.SaxParser\"),A=function(e,t){if(e)for(var r=0;r<e.length;r++)if(-1!==t.indexOf(e[r].filter))return e[r]},T=_.DOM,C=function(e){return e.replace(/px$/,\"\")},P=function(o,e){var c=w(!1),u={};return k({validate:!1,allow_conditional_comments:!0,start:function(e,t){if(!c.get())if(j(t.map,\"data-ephox-embed-iri\"))c.set(!0),i=(n=t).map.style,a=i?T.parseStyle(i):{},u={type:\"ephox-embed-iri\",source:n.map[\"data-ephox-embed-iri\"],altsource:\"\",poster:\"\",width:x(a,\"max-width\").map(C).getOr(\"\"),height:x(a,\"max-height\").map(C).getOr(\"\")};else{if(u.source||\"param\"!==e||(u.source=t.map.movie),\"iframe\"!==e&&\"object\"!==e&&\"embed\"!==e&&\"video\"!==e&&\"audio\"!==e||(u.type||(u.type=e),u=S.extend(t.map,u)),\"script\"===e){var r=A(o,t.map.src);if(!r)return;u={type:\"script\",source:t.map.src,width:String(r.width),height:String(r.height)}}\"source\"===e&&(u.source?u.altsource||(u.altsource=t.map.src):u.source=t.map.src),\"img\"!==e||u.poster||(u.poster=t.map.src)}var n,i,a}}).parse(e),u.source=u.source||u.src||u.data,u.altsource=u.altsource||\"\",u.poster=u.poster||\"\",u},D=function(e){var t={mp3:\"audio/mpeg\",m4a:\"audio/x-m4a\",wav:\"audio/wav\",mp4:\"video/mp4\",webm:\"video/webm\",ogg:\"video/ogg\",swf:\"application/x-shockwave-flash\"}[e.toLowerCase().split(\".\").pop()];return t||\"\"},$=tinymce.util.Tools.resolve(\"tinymce.html.Schema\"),F=tinymce.util.Tools.resolve(\"tinymce.html.Writer\"),M=_.DOM,z=function(e){return/^[0-9.]+$/.test(e)?e+\"px\":e},N=function(a,e){!function(e,t){for(var r=b(e),n=0,i=r.length;n<i;n++){var a=r[n];t(e[a],a)}}(e,function(e,t){var r=\"\"+e;if(a.map[t])for(var n=a.length;n--;){var i=a[n];i.name===t&&(r?(a.map[t]=r,i.value=r):(delete a.map[t],a.splice(n,1)))}else r&&(a.push({name:t,value:r}),a.map[t]=r)})},U=[\"source\",\"altsource\"],E=function(e,c,u){var s,l=F(),m=w(!1),d=0;return k({validate:!1,allow_conditional_comments:!0,comment:function(e){l.comment(e)},cdata:function(e){l.cdata(e)},text:function(e,t){l.text(e,t)},start:function(e,t,r){if(!m.get())if(j(t.map,\"data-ephox-embed-iri\"))m.set(!0),n=c,a=(i=t).map.style,(o=a?M.parseStyle(a):{})[\"max-width\"]=z(n.width),o[\"max-height\"]=z(n.height),N(i,{style:M.serializeStyle(o)});else{switch(e){case\"video\":case\"object\":case\"embed\":case\"img\":case\"iframe\":c.height!==undefined&&c.width!==undefined&&N(t,{width:c.width,height:c.height})}if(u)switch(e){case\"video\":N(t,{poster:c.poster,src:\"\"}),c.altsource&&N(t,{src:\"\"});break;case\"iframe\":N(t,{src:c.source});break;case\"source\":if(d<2&&(N(t,{src:c[U[d]],type:c[U[d]+\"mime\"]}),!c[U[d]]))return;d++;break;case\"img\":if(!c.poster)return;s=!0}}var n,i,a,o;l.start(e,t,r)},end:function(e){if(!m.get()){if(\"video\"===e&&u)for(var t=0;t<2;t++)if(c[U[t]]){var r=[];r.map={},d<t&&(N(r,{src:c[U[t]],type:c[U[t]+\"mime\"]}),l.start(\"source\",r,!0))}if(c.poster&&\"object\"===e&&u&&!s){var n=[];n.map={},N(n,{src:c.poster,width:c.width,height:c.height}),l.start(\"img\",n,!0)}}l.end(e)}},$({})).parse(e),l.getContent()},R=[{regex:/youtu\\.be\\/([\\w\\-_\\?&=.]+)/i,type:\"iframe\",w:560,h:314,url:\"www.youtube.com/embed/$1\",allowFullscreen:!0},{regex:/youtube\\.com(.+)v=([^&]+)(&([a-z0-9&=\\-_]+))?/i,type:\"iframe\",w:560,h:314,url:\"www.youtube.com/embed/$2?$4\",allowFullscreen:!0},{regex:/youtube.com\\/embed\\/([a-z0-9\\?&=\\-_]+)/i,type:\"iframe\",w:560,h:314,url:\"www.youtube.com/embed/$1\",allowFullscreen:!0},{regex:/vimeo\\.com\\/([0-9]+)/,type:\"iframe\",w:425,h:350,url:\"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc\",allowFullscreen:!0},{regex:/vimeo\\.com\\/(.*)\\/([0-9]+)/,type:\"iframe\",w:425,h:350,url:\"player.vimeo.com/video/$2?title=0&amp;byline=0\",allowFullscreen:!0},{regex:/maps\\.google\\.([a-z]{2,3})\\/maps\\/(.+)msid=(.+)/,type:\"iframe\",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed\"',allowFullscreen:!1},{regex:/dailymotion\\.com\\/video\\/([^_]+)/,type:\"iframe\",w:480,h:270,url:\"www.dailymotion.com/embed/video/$1\",allowFullscreen:!0},{regex:/dai\\.ly\\/([^_]+)/,type:\"iframe\",w:480,h:270,url:\"www.dailymotion.com/embed/video/$1\",allowFullscreen:!0}],L=function(t){var e=R.filter(function(e){return e.regex.test(t)});return 0<e.length?S.extend({},e[0],{url:function(e,t){for(var r,n=(r=t.match(/^(https?:\\/\\/|www\\.)(.+)$/i))&&1<r.length&&\"www.\"!==r[1]?r[1]:\"https://\",i=e.regex.exec(t),a=n+e.url,o=function(e){a=a.replace(\"$\"+e,function(){return i[e]?i[e]:\"\"})},c=0;c<i.length;c++)o(c);return a.replace(/\\?$/,\"\")}(e[0],t)}):null},I=function(r,e){var n=S.extend({},e);if(!n.source&&(S.extend(n,P(O(r),n.embed)),!n.source))return\"\";n.altsource||(n.altsource=\"\"),n.poster||(n.poster=\"\"),n.source=r.convertURL(n.source,\"source\"),n.altsource=r.convertURL(n.altsource,\"source\"),n.sourcemime=D(n.source),n.altsourcemime=D(n.altsource),n.poster=r.convertURL(n.poster,\"poster\");var t=L(n.source);if(t&&(n.source=t.url,n.type=t.type,n.allowFullscreen=t.allowFullscreen,n.width=n.width||String(t.w),n.height=n.height||String(t.h)),n.embed)return E(n.embed,n,!0);var i=A(O(r),n.source);i&&(n.type=\"script\",n.width=String(i.width),n.height=String(i.height));var a,o,c,u,s,l,m,d,h=r.getParam(\"audio_template_callback\"),f=r.getParam(\"video_template_callback\");return n.width=n.width||\"300\",n.height=n.height||\"150\",S.each(n,function(e,t){n[t]=r.dom.encode(\"\"+e)}),\"iframe\"===n.type?(d=(m=n).allowFullscreen?' allowFullscreen=\"1\"':\"\",'<iframe src=\"'+m.source+'\" width=\"'+m.width+'\" height=\"'+m.height+'\"'+d+\"></iframe>\"):\"application/x-shockwave-flash\"===n.sourcemime?(l='<object data=\"'+(s=n).source+'\" width=\"'+s.width+'\" height=\"'+s.height+'\" type=\"application/x-shockwave-flash\">',s.poster&&(l+='<img src=\"'+s.poster+'\" width=\"'+s.width+'\" height=\"'+s.height+'\" />'),l+=\"</object>\"):-1!==n.sourcemime.indexOf(\"audio\")?(c=n,(u=h)?u(c):'<audio controls=\"controls\" src=\"'+c.source+'\">'+(c.altsource?'\\n<source src=\"'+c.altsource+'\"'+(c.altsourcemime?' type=\"'+c.altsourcemime+'\"':\"\")+\" />\\n\":\"\")+\"</audio>\"):\"script\"===n.type?'<script src=\"'+n.source+'\"><\\/script>':(a=n,(o=f)?o(a):'<video width=\"'+a.width+'\" height=\"'+a.height+'\"'+(a.poster?' poster=\"'+a.poster+'\"':\"\")+' controls=\"controls\">\\n<source src=\"'+a.source+'\"'+(a.sourcemime?' type=\"'+a.sourcemime+'\"':\"\")+\" />\\n\"+(a.altsource?'<source src=\"'+a.altsource+'\"'+(a.altsourcemime?' type=\"'+a.altsourcemime+'\"':\"\")+\" />\\n\":\"\")+\"</video>\")},q=tinymce.util.Tools.resolve(\"tinymce.util.Promise\"),B={},W=function(t){return function(e){return I(t,e)}},G=function(e,t){var r,n,i,a,o,c=e.getParam(\"media_url_resolver\");return c?(i=t,a=W(e),o=c,new q(function(t,e){var r=function(e){return e.html&&(B[i.source]=e),t({url:i.source,html:e.html?e.html:a(i)})};B[i.source]?r(B[i.source]):o({url:i.source},r,e)})):(r=t,n=W(e),new q(function(e){e({html:n(r),url:r.source})}))},H=function(a,o,c){return function(e){var t,r=function(){return x(a,e)},n=function(){return x(o,e)},i=function(e){return x(e,\"value\").bind(function(e){return 0<e.length?l.some(e):l.none()})};return(t={})[e]=(e===c?r().bind(function(e){return h(e)?i(e).orThunk(n):n().orThunk(function(){return l.from(e)})}):n().orThunk(function(){return r().bind(function(e){return h(e)?i(e):l.from(e)})})).getOr(\"\"),t}},J=function(e,t){var r,n,i=t?x(e,t).bind(function(e){return x(e,\"meta\")}).getOr({}):{},a=H(e,i,t);return p(p(p(p(p({},a(\"source\")),a(\"altsource\")),a(\"poster\")),a(\"embed\")),(r=i,n={},x(e,\"dimensions\").each(function(e){f([\"width\",\"height\"],function(t){x(r,t).orThunk(function(){return x(e,t)}).each(function(e){return n[t]=e})})}),n))},K=function(e){var n=p(p({},e),{source:{value:x(e,\"source\").getOr(\"\")},altsource:{value:x(e,\"altsource\").getOr(\"\")},poster:{value:x(e,\"poster\").getOr(\"\")}});return f([\"width\",\"height\"],function(r){x(e,r).each(function(e){var t=n.dimensions||{};t[r]=e,n.dimensions=t})}),n},Q=function(r){return function(e){var t=e&&e.msg?\"Media embed handler error: \"+e.msg:\"Media embed handler threw unknown error.\";r.notificationManager.open({type:\"error\",text:t})}},V=function(e,t){return P(O(e),t)},X=function(i,a){return function(e){if(d(e.url)&&0<e.url.trim().length){var t=e.html,r=V(a,t),n=p(p({},r),{source:e.url,embed:t});i.setData(K(n))}}},Y=function(e,t){var r=e.dom.select(\"img[data-mce-object]\");e.insertContent(t),function(e,t){for(var r=e.dom.select(\"img[data-mce-object]\"),n=0;n<t.length;n++)for(var i=r.length-1;0<=i;i--)t[n]===r[i]&&r.splice(i,1);e.selection.select(r[0])}(e,r),e.nodeChanged()},Z=function(e,t,r){var n;t.embed=E(t.embed,t),t.embed&&(e.source===t.source||(n=t.source,B.hasOwnProperty(n)))?Y(r,t.embed):G(r,t).then(function(e){Y(r,e.html)})[\"catch\"](Q(r))},ee=function(m){var e,t,r,n,i=(r=(e=m).selection.getNode(),n=(t=r).getAttribute(\"data-mce-object\")||t.getAttribute(\"data-ephox-embed-iri\")?e.serializer.serialize(r,{selection:!0}):\"\",p({embed:n},P(O(e),n))),d=w(i),a=K(i),o={title:\"General\",name:\"general\",items:function(e){for(var t=[],r=0,n=e.length;r<n;++r){if(!g(e[r]))throw new Error(\"Arr.flatten item \"+r+\" was not an array, input: \"+e);v.apply(t,e[r])}return t}([[{name:\"source\",type:\"urlinput\",filetype:\"media\",label:\"Source\"}],m.getParam(\"media_dimensions\",!0)?[{type:\"sizeinput\",name:\"dimensions\",label:\"Constrain proportions\",constrain:!0}]:[]])},c={title:\"Embed\",items:[{type:\"textarea\",name:\"embed\",label:\"Paste your embed code below:\"}]},u=[];m.getParam(\"media_alt_source\",!0)&&u.push({name:\"altsource\",type:\"urlinput\",filetype:\"media\",label:\"Alternative source URL\"}),m.getParam(\"media_poster\",!0)&&u.push({name:\"poster\",type:\"urlinput\",filetype:\"image\",label:\"Media poster (Image URL)\"});var s={title:\"Advanced\",name:\"advanced\",items:u},l=[o,c];0<u.length&&l.push(s);var h={type:\"tabpanel\",tabs:l},f=m.windowManager.open({title:\"Insert/Edit Media\",size:\"normal\",body:h,buttons:[{type:\"cancel\",name:\"cancel\",text:\"Cancel\"},{type:\"submit\",name:\"save\",text:\"Save\",primary:!0}],onSubmit:function(e){var t=J(e.getData());Z(d.get(),t,m),e.close()},onChange:function(e,t){switch(t.name){case\"source\":s=d.get(),l=J(e.getData(),\"source\"),s.source!==l.source&&(X(f,m)({url:l.source,html:\"\"}),G(m,l).then(X(f,m))[\"catch\"](Q(m)));break;case\"embed\":c=J((o=e).getData()),u=V(m,c.embed),o.setData(K(u));break;case\"dimensions\":case\"altsource\":case\"poster\":r=e,n=t.name,i=J(r.getData(),n),a=I(m,i),r.setData(K(p(p({},i),{embed:a})))}var r,n,i,a,o,c,u,s,l;d.set(J(e.getData()))},initialData:a})},te=tinymce.util.Tools.resolve(\"tinymce.html.Node\"),re=tinymce.util.Tools.resolve(\"tinymce.Env\"),ne=function(a,e){if(!1===a.getParam(\"media_filter_html\",!0))return e;var o,c=F();return k({validate:!1,allow_conditional_comments:!1,comment:function(e){c.comment(e)},cdata:function(e){c.cdata(e)},text:function(e,t){c.text(e,t)},start:function(e,t,r){if(o=!0,\"script\"!==e&&\"noscript\"!==e&&\"svg\"!==e){for(var n=t.length-1;0<=n;n--){var i=t[n].name;0===i.indexOf(\"on\")&&(delete t.map[i],t.splice(n,1)),\"style\"===i&&(t[n].value=a.dom.serializeStyle(a.dom.parseStyle(t[n].value),e))}c.start(e,t,r),o=!1}},end:function(e){o||c.end(e)}},$({})).parse(e),c.getContent()},ie=function(e,t){var r=t.name,n=new te(\"span\",1);n.attr({contentEditable:\"false\",style:t.attr(\"style\"),\"data-mce-object\":r,\"class\":\"mce-preview-object mce-object-\"+r}),ae(e,t,n);var i=new te(r,1);i.attr({src:t.attr(\"src\"),allowfullscreen:t.attr(\"allowfullscreen\"),style:t.attr(\"style\"),\"class\":t.attr(\"class\"),width:t.attr(\"width\"),height:t.attr(\"height\"),frameborder:\"0\"});var a=new te(\"span\",1);return a.attr(\"class\",\"mce-shim\"),n.append(i),n.append(a),n},ae=function(e,t,r){var n,i,a,o=t.attributes;for(a=o.length;a--;)n=o[a].name,i=o[a].value,\"width\"!==n&&\"height\"!==n&&\"style\"!==n&&(\"data\"!==n&&\"src\"!==n||(i=e.convertURL(i,n)),r.attr(\"data-mce-p-\"+n,i));var c=t.firstChild&&t.firstChild.value;c&&(r.attr(\"data-mce-html\",escape(ne(e,c))),r.firstChild=null)},oe=function(e){for(;e=e.parent;)if(e.attr(\"data-ephox-embed-iri\")||(t=e.attr(\"class\"))&&/\\btiny-pageembed\\b/.test(t))return!0;var t;return!1},ce=function(u){return function(e){for(var t,r,n,i,a,o,c=e.length;c--;)(t=e[c]).parent&&(t.parent.attr(\"data-mce-object\")||\"script\"===t.name&&!(r=A(O(u),t.attr(\"src\")))||(r&&(r.width&&t.attr(\"width\",r.width.toString()),r.height&&t.attr(\"height\",r.height.toString())),\"iframe\"===t.name&&u.getParam(\"media_live_embeds\",!0)&&re.ceFalse?oe(t)||t.replace(ie(u,t)):oe(t)||t.replace((n=u,o=void 0,a=(i=t).name,(o=new te(\"img\",1)).shortEnded=!0,ae(n,i,o),o.attr({width:i.attr(\"width\")||\"300\",height:i.attr(\"height\")||(\"audio\"===a?\"30\":\"150\"),style:i.attr(\"style\"),src:re.transparentSrc,\"data-mce-object\":a,\"class\":\"mce-object mce-object-\"+a}),o))))}},ue=function(e){var t,r;e.ui.registry.addToggleButton(\"media\",{tooltip:\"Insert/edit media\",icon:\"embed\",onAction:function(){e.execCommand(\"mceMedia\")},onSetup:(t=e,r=[\"img[data-mce-object]\",\"span[data-mce-object]\",\"div[data-ephox-embed-iri]\"],function(e){return t.selection.selectorChangedWithUnbind(r.join(\",\"),e.setActive).unbind})}),e.ui.registry.addMenuItem(\"media\",{icon:\"embed\",text:\"Media...\",onAction:function(){e.execCommand(\"mceMedia\")}})};!function se(){n.add(\"media\",function(e){var t,d,r,n;return(t=e).addCommand(\"mceMedia\",function(){ee(t)}),ue(e),e.on(\"ResolveName\",function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute(\"data-mce-object\"))&&(e.name=t)}),(d=e).on(\"preInit\",function(){var t=d.schema.getSpecialElements();S.each(\"video audio iframe object\".split(\" \"),function(e){t[e]=new RegExp(\"</\"+e+\"[^>]*>\",\"gi\")});var r=d.schema.getBoolAttrs();S.each(\"webkitallowfullscreen mozallowfullscreen allowfullscreen\".split(\" \"),function(e){r[e]={}}),d.parser.addNodeFilter(\"iframe,video,audio,object,embed,script\",ce(d)),d.serializer.addAttributeFilter(\"data-mce-object\",function(e,t){for(var r,n,i,a,o,c,u,s,l=e.length;l--;)if((r=e[l]).parent){for(u=r.attr(t),n=new te(u,1),\"audio\"!==u&&\"script\"!==u&&((s=r.attr(\"class\"))&&-1!==s.indexOf(\"mce-preview-object\")?n.attr({width:r.firstChild.attr(\"width\"),height:r.firstChild.attr(\"height\")}):n.attr({width:r.attr(\"width\"),height:r.attr(\"height\")})),n.attr({style:r.attr(\"style\")}),i=(a=r.attributes).length;i--;){var m=a[i].name;0===m.indexOf(\"data-mce-p-\")&&n.attr(m.substr(11),a[i].value)}\"script\"===u&&n.attr(\"type\",\"text/javascript\"),(o=r.attr(\"data-mce-html\"))&&((c=new te(\"#text\",3)).raw=!0,c.value=ne(d,unescape(o)),n.append(c)),r.replace(n)}})}),d.on(\"SetContent\",function(){d.$(\"span.mce-preview-object\").each(function(e,t){var r=d.$(t);0===r.find(\"span.mce-shim\").length&&r.append('<span class=\"mce-shim\"></span>')})}),(r=e).on(\"click keyup touchend\",function(){var e=r.selection.getNode();e&&r.dom.hasClass(e,\"mce-preview-object\")&&r.dom.getAttrib(e,\"data-mce-selected\")&&e.setAttribute(\"data-mce-selected\",\"2\")}),r.on(\"ObjectSelected\",function(e){var t=e.target.getAttribute(\"data-mce-object\");\"audio\"!==t&&\"script\"!==t||e.preventDefault()}),r.on(\"ObjectResized\",function(e){var t,r=e.target;r.getAttribute(\"data-mce-object\")&&(t=r.getAttribute(\"data-mce-html\"))&&(t=unescape(t),r.setAttribute(\"data-mce-html\",escape(E(t,{width:String(e.width),height:String(e.height)}))))}),n=e,{showDialog:function(){ee(n)}}})}()}();"]}]}