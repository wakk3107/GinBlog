{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\src\\components\\user\\Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\src\\components\\user\\Profile.vue","mtime":1659594683658},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\babel.config.js","mtime":1651118941000},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659170820870},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1659170820855},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1659170823565},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659170820870},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1659170825069}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL3dha2svR29sYW5kUHJvamVjdHMvR2luQmxvZy93ZWIvYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IFVybCB9IGZyb20gJy4uLy4uL3BsdWdpbi9odHRwJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBwcm9maWxlSW5mbzogewogICAgICAgIGlkOiAxLAogICAgICAgIG5hbWU6ICcnLAogICAgICAgIGRlc2M6ICcnLAogICAgICAgIHFxX2NoYXQ6ICcnLAogICAgICAgIHdlY2hhdDogJycsCiAgICAgICAgd2VpYm86ICcnLAogICAgICAgIGJpbGk6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBpbWc6ICcnLAogICAgICAgIGF2YXRhcjogJycsCiAgICAgICAgaWNwX3JlY29yZDogJycKICAgICAgfSwKICAgICAgdXBVcmw6IFVybCArICd1cGxvYWQnLAogICAgICBoZWFkZXJzOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFByb2ZpbGVJbmZvKCk7CiAgICB0aGlzLmhlYWRlcnMgPSB7CiAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQod2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy8g6I635Y+W5Liq5Lq66K6+572uCiAgICBnZXRQcm9maWxlSW5mbzogZnVuY3Rpb24gZ2V0UHJvZmlsZUluZm8oKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkX3RoaXMkJGh0dHAkZ2UsIHJlczsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuJGh0dHAuZ2V0KCJwcm9maWxlLyIuY29uY2F0KF90aGlzLnByb2ZpbGVJbmZvLmlkKSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRfdGhpcyQkaHR0cCRnZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSBfeWllbGQkX3RoaXMkJGh0dHAkZ2UuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSAxMDA0IHx8IDEwMDUgfHwgMTAwNiB8fCAxMDA3KSB7CiAgICAgICAgICAgICAgICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIF90aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfdGhpcy5wcm9maWxlSW5mbyA9IHJlcy5kYXRhOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8g5LiK5Lyg5aS05YOPCiAgICBhdmF0YXJDaGFuZ2U6IGZ1bmN0aW9uIGF2YXRhckNoYW5nZShpbmZvKSB7CiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzICE9PSAndXBsb2FkaW5nJykge30KCiAgICAgIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZG9uZScpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIlx1NTZGRVx1NzI0N1x1NEUwQVx1NEYyMFx1NjIxMFx1NTI5RiIpOwogICAgICAgIHZhciBpbWdVcmwgPSBpbmZvLmZpbGUucmVzcG9uc2UudXJsOwogICAgICAgIHRoaXMucHJvZmlsZUluZm8uYXZhdGFyID0gaW1nVXJsOwogICAgICB9IGVsc2UgaWYgKGluZm8uZmlsZS5zdGF0dXMgPT09ICdlcnJvcicpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCJcdTU2RkVcdTcyNDdcdTRFMEFcdTRGMjBcdTU5MzFcdThEMjUiKTsKICAgICAgfQogICAgfSwKICAgIC8vIOS4iuS8oOWktOWDj+iDjOaZr+WbvgogICAgaW1nQ2hhbmdlOiBmdW5jdGlvbiBpbWdDaGFuZ2UoaW5mbykgewogICAgICBpZiAoaW5mby5maWxlLnN0YXR1cyAhPT0gJ3VwbG9hZGluZycpIHt9CgogICAgICBpZiAoaW5mby5maWxlLnN0YXR1cyA9PT0gJ2RvbmUnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCJcdTU2RkVcdTcyNDdcdTRFMEFcdTRGMjBcdTYyMTBcdTUyOUYiKTsKICAgICAgICB2YXIgaW1nVXJsID0gaW5mby5maWxlLnJlc3BvbnNlLnVybDsKICAgICAgICB0aGlzLnByb2ZpbGVJbmZvLmltZyA9IGltZ1VybDsKICAgICAgfSBlbHNlIGlmIChpbmZvLmZpbGUuc3RhdHVzID09PSAnZXJyb3InKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigiXHU1NkZFXHU3MjQ3XHU0RTBBXHU0RjIwXHU1OTMxXHU4RDI1Iik7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmm7TmlrAKICAgIHVwZGF0ZVByb2ZpbGU6IGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF95aWVsZCRfdGhpczIkJGh0dHAkcCwgcmVzOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi4kaHR0cC5wdXQoInByb2ZpbGUvIi5jb25jYXQoX3RoaXMyLnByb2ZpbGVJbmZvLmlkKSwgX3RoaXMyLnByb2ZpbGVJbmZvKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJF90aGlzMiQkaHR0cCRwID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgICByZXMgPSBfeWllbGQkX3RoaXMyJCRodHRwJHAuZGF0YTsKCiAgICAgICAgICAgICAgICBpZiAoIShyZXMuc3RhdHVzICE9PSAyMDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIF90aGlzMi4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkpOwoKICAgICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2Uuc3VjY2VzcygiXHU0RTJBXHU0RUJBXHU0RkUxXHU2MDZGXHU2NkY0XHU2NUIwXHU2MjEwXHU1MjlGIik7CgogICAgICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnL2luZGV4Jyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AAEA;AACAA,MADA,kBACA;AACA;AACAC;AACAC,aADA;AAEAC,gBAFA;AAGAC,gBAHA;AAIAC,mBAJA;AAKAC,kBALA;AAMAC,iBANA;AAOAC,gBAPA;AAQAC,iBARA;AASAC,eATA;AAUAC,kBAVA;AAWAC;AAXA,OADA;AAcAC,2BAdA;AAeAC;AAfA;AAiBA,GAnBA;AAoBAC,SApBA,qBAoBA;AACA;AACA;AAAAC;AAAA;AACA,GAvBA;AAwBAC;AACA;AACAC,kBAFA,4BAEA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,wDADA;;AAAA;AAAA;AACAC,mBADA,yBACAnB,IADA;;AAEA;AACA;AACAoB;;AACA;AACA;;AACA;AACA;;AACA;;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA,KAZA;AAcA;AACAC,gBAfA,wBAeAC,IAfA,EAeA;AACA,6CACA;;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,KAzBA;AA2BA;AACAC,aA5BA,qBA4BAD,IA5BA,EA4BA;AACA,6CACA;;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,KAtCA;AAwCA;AACAE,iBAzCA,2BAyCA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,8EADA;;AAAA;AAAA;AACAL,mBADA,yBACAnB,IADA;;AAAA,sBAEAmB,kBAFA;AAAA;AAAA;AAAA;;AAAA,kDAEA,kCAFA;;AAAA;AAGA;;AACA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AA9CA;AAxBA","names":["data","profileInfo","id","name","desc","qq_chat","wechat","weibo","bili","email","img","avatar","icp_record","upUrl","headers","created","Authorization","methods","getProfileInfo","res","window","avatarChange","info","imgChange","updateProfile"],"sourceRoot":"src/components/user","sources":["Profile.vue"],"sourcesContent":["<template>\n  <a-card>\n    <a-form-model labelAlign=\"left\" :label-col=\"{ span: 2 }\" :wrapper-col=\"{ span: 12 }\">\n      <a-form-model-item label=\"作者名称\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.name\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"个人简介\">\n        <a-input type=\"textarea\" v-model=\"profileInfo.desc\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"网站备案号\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.icp_record\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"QQ号码\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.qq_chat\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"微信\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.wechat\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"微博\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.weibo\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"B站地址\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.bili\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"Email\">\n        <a-input style=\"width: 300px\" v-model=\"profileInfo.email\"></a-input>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"头像\">\n        <a-upload\n          listType=\"picture\"\n          name=\"file\"\n          :action=\"upUrl\"\n          :headers=\"headers\"\n          @change=\"avatarChange\"\n        >\n          <a-button style=\"margin-right:10px\">\n            <a-icon type=\"upload\" />点击上传\n          </a-button>\n\n          <template v-if=\"profileInfo.avatar\">\n            <img :src=\"profileInfo.avatar\" style=\"width: 120px; height: 100px\" />\n          </template>\n        </a-upload>\n      </a-form-model-item>\n\n      <a-form-model-item label=\"头像背景图\">\n        <a-upload\n          listType=\"picture\"\n          name=\"file\"\n          :action=\"upUrl\"\n          :headers=\"headers\"\n          @change=\"imgChange\"\n        >\n          <a-button style=\"margin-right:10px\">\n            <a-icon type=\"upload\" />点击上传\n          </a-button>\n\n          <template v-if=\"profileInfo.img\">\n            <img :src=\"profileInfo.img\" style=\"width: 120px; height: 100px\" />\n          </template>\n        </a-upload>\n      </a-form-model-item>\n\n      <a-form-model-item>\n        <a-button type=\"danger\" style=\"margin-right: 15px\" @click=\"updateProfile\">更新</a-button>\n      </a-form-model-item>\n    </a-form-model>\n  </a-card>\n</template>\n<script>\nimport { Url } from '../../plugin/http'\n\nexport default {\n  data() {\n    return {\n      profileInfo: {\n        id: 1,\n        name: '',\n        desc: '',\n        qq_chat: '',\n        wechat: '',\n        weibo: '',\n        bili: '',\n        email: '',\n        img: '',\n        avatar: '',\n        icp_record: '',\n      },\n      upUrl: Url + 'upload',\n      headers: {},\n    }\n  },\n  created() {\n    this.getProfileInfo()\n    this.headers = { Authorization: `Bearer ${window.sessionStorage.getItem('token')}` }\n  },\n  methods: {\n    // 获取个人设置\n    async getProfileInfo() {\n      const { data: res } = await this.$http.get(`profile/${this.profileInfo.id}`)\n      if (res.status !== 200) {\n        if (res.status === 1004 || 1005 || 1006 || 1007) {\n          window.sessionStorage.clear()\n          this.$router.push('/login')\n        }\n        this.$message.error(res.message)\n      }\n      this.profileInfo = res.data\n    },\n\n    // 上传头像\n    avatarChange(info) {\n      if (info.file.status !== 'uploading') {\n      }\n      if (info.file.status === 'done') {\n        this.$message.success(`图片上传成功`)\n        const imgUrl = info.file.response.url\n        this.profileInfo.avatar = imgUrl\n      } else if (info.file.status === 'error') {\n        this.$message.error(`图片上传失败`)\n      }\n    },\n\n    // 上传头像背景图\n    imgChange(info) {\n      if (info.file.status !== 'uploading') {\n      }\n      if (info.file.status === 'done') {\n        this.$message.success(`图片上传成功`)\n        const imgUrl = info.file.response.url\n        this.profileInfo.img = imgUrl\n      } else if (info.file.status === 'error') {\n        this.$message.error(`图片上传失败`)\n      }\n    },\n\n    // 更新\n    async updateProfile() {\n      const { data: res } = await this.$http.put(`profile/${this.profileInfo.id}`, this.profileInfo)\n      if (res.status !== 200) return this.$message.error(res.message)\n      this.$message.success(`个人信息更新成功`)\n      this.$router.push('/index')\n    },\n  },\n}\n</script>\n\n<style scoped>\n.upBtn {\n  margin-right: 10px;\n}\n</style>"]}]}