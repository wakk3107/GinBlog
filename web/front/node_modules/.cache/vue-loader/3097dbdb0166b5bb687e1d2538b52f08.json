{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\TopBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\TopBar.vue","mtime":1651118941000},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1659587649729},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1659587650472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgZ3JvdXA6IG51bGwsCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICByZWdpc3RlcmZvcm12YWxpZDogdHJ1ZSwKICAgICAgY2F0ZUxpc3Q6IFtdLAogICAgICBzZWFyY2hOYW1lOiAnJywKICAgICAgZm9ybWRhdGE6IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0sCiAgICAgIGNoZWNrUGFzc3dvcmQ6ICcnLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogJycsCiAgICAgICAgdXNlcm5hbWU6ICcnCiAgICAgIH0sCiAgICAgIG5hbWVSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgJ+eUqOaIt+WQjeS4jeiDveS4uuepuicsCiAgICAgICAgKHYpID0+CiAgICAgICAgICAodiAmJiB2Lmxlbmd0aCA+PSA0ICYmIHYubGVuZ3RoIDw9IDEyKSB8fAogICAgICAgICAgJ+eUqOaIt+WQjeW/hemhu+WcqDTliLAxMuS4quWtl+espuS5i+mXtCcKICAgICAgXSwKICAgICAgcGFzc3dvcmRSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgJ+WvhueggeS4jeiDveS4uuepuicsCiAgICAgICAgKHYpID0+CiAgICAgICAgICAodiAmJiB2Lmxlbmd0aCA+PSA2ICYmIHYubGVuZ3RoIDw9IDIwKSB8fCAn5a+G56CB5b+F6aG75ZyoNuWIsDIw5Liq5a2X56ym5LmL6Ze0JwogICAgICBdLAogICAgICBjaGVja1Bhc3N3b3JkUnVsZXM6IFsKICAgICAgICAodikgPT4gISF2IHx8ICflr4bnoIHkuI3og73kuLrnqbonLAogICAgICAgICh2KSA9PgogICAgICAgICAgKHYgJiYgdi5sZW5ndGggPj0gNiAmJiB2Lmxlbmd0aCA8PSAyMCkgfHwgJ+WvhueggeW/hemhu+WcqDbliLAyMOS4quWtl+espuS5i+mXtCcsCiAgICAgICAgKHYpID0+IHYgPT09IHRoaXMuZm9ybWRhdGEucGFzc3dvcmQgfHwgJ+WvhueggeS4pOasoei+k+WFpeS4jeS4gOiHtO+8jOivt+ajgOafpScKICAgICAgXQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGdyb3VwKCkgewogICAgICB0aGlzLmRyYXdlciA9IGZhbHNlCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5HZXRDYXRlTGlzdCgpCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5oZWFkZXJzID0gewogICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7d2luZG93LnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJyl9YCwKICAgICAgdXNlcm5hbWU6IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliIbnsbsKICAgIGFzeW5jIEdldENhdGVMaXN0KCkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoJ2NhdGVnb3J5JykKICAgICAgdGhpcy5jYXRlTGlzdCA9IHJlcy5kYXRhCiAgICB9LAoKICAgIC8vIOafpeaJvuaWh+eroOagh+mimAogICAgc2VhcmNoVGl0bGUodGl0bGUpIHsKICAgICAgaWYgKHRpdGxlLmxlbmd0aCA9PSAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcign5L2g6L+Y5rKh5aGr5YWl5pCc57Si5YaF5a655ZOmJykKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9zZWFyY2gvJHt0aXRsZX1gKQogICAgfSwKCiAgICBnb3RvQ2F0ZShjaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9jYXRlZ29yeS8ke2NpZH1gKS5jYXRjaCgoZXJyKSA9PiBlcnIpCiAgICB9LAogICAgLy8g55m75b2VCiAgICBhc3luYyBsb2dpbigpIHsKICAgICAgaWYgKCF0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZSgpKQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfovpPlhaXmlbDmja7pnZ7ms5XvvIzor7fmo4Dmn6XovpPlhaXnmoTnlKjmiLflkI3lkozlr4bnoIEnKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCdsb2dpbmZyb250JywgdGhpcy5mb3JtZGF0YSkKICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpCiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCd1c2VybmFtZScsIHJlcy5kYXRhKQogICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgndXNlcl9pZCcsIHJlcy5pZCkKICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfnmbvlvZXmiJDlip8nKQogICAgICB0aGlzLiRyb3V0ZXIuZ28oMCkKICAgIH0sCgogICAgLy8g6YCA5Ye6CiAgICBsb2dpbm91dCgpIHsKICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLmNsZWFyKCd0b2tlbicpCiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5jbGVhcigndXNlcm5hbWUnKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+mAgOWHuuaIkOWKnycpCiAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgfSwKCiAgICAvLyDms6jlhowKICAgIGFzeW5jIHJlZ2lzdGVyVXNlcigpIHsKICAgICAgaWYgKCF0aGlzLiRyZWZzLnJlZ2lzdGVyZm9ybVJlZi52YWxpZGF0ZSgpKQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCfovpPlhaXmlbDmja7pnZ7ms5XvvIzor7fmo4Dmn6XovpPlhaXnmoTnlKjmiLflkI3lkozlr4bnoIEnKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCd1c2VyL2FkZCcsIHsKICAgICAgICB1c2VybmFtZTogdGhpcy5mb3JtZGF0YS51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtZGF0YS5wYXNzd29yZCwKICAgICAgICByb2xlOiAyCiAgICAgIH0pCiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAyMDApIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+azqOWGjOaIkOWKnycpCiAgICAgIHRoaXMuJHJvdXRlci5nbygwKQogICAgfQogIH0KfQo="},{"version":3,"sources":["TopBar.vue"],"names":[],"mappings":";AAgJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-app-bar mobileBreakpoint=\"sm\" app dark flat color=\"indigo darken-2\">\n      <v-app-bar-nav-icon dark class=\"hidden-md-and-up\" @click.stop=\"drawer = !drawer\"></v-app-bar-nav-icon>\n      <v-toolbar-title>\n        <v-app-bar-nav-icon class=\"mx-15 hidden-md-and-down\">\n          <v-avatar size=\"40\" color=\"grey\">\n            <img src=\"../assets/logo.png\" alt />\n          </v-avatar>\n        </v-app-bar-nav-icon>\n      </v-toolbar-title>\n\n      <v-tabs dark center-active centered class=\"hidden-sm-and-down\">\n        <v-tab @click=\"$router.push('/')\">首页</v-tab>\n        <v-tab\n          v-for=\"item in cateList\"\n          :key=\"item.id\"\n          text\n          @click=\"gotoCate(item.id)\"\n        >{{ item.name }}</v-tab>\n      </v-tabs>\n\n      <v-spacer></v-spacer>\n\n      <v-responsive class=\"hidden-sm-and-down\" color=\"white\">\n        <v-text-field\n          dense\n          flat\n          hide-details\n          solo-inverted\n          rounded\n          placeholder=\"请输入文章标题查找\"\n          dark\n          append-icon=\"mdi-text-search\"\n          v-model=\"searchName\"\n          @change=\"searchTitle(searchName)\"\n        ></v-text-field>\n      </v-responsive>\n\n      <v-dialog max-width=\"800\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-if=\"!headers.username\" text dark v-bind=\"attrs\" v-on=\"on\">请登录</v-btn>\n\n          <v-btn v-if=\"headers.username\" text dark>欢迎你{{ headers.username }}</v-btn>\n          <v-btn class=\"hidden-md-and-down\" v-if=\"headers.username\" text dark @click=\"loginout\">退出</v-btn>\n        </template>\n\n        <template v-slot:default=\"dialog\">\n          <v-card>\n            <v-toolbar color=\"indigo darken-2\" dark>请登录</v-toolbar>\n            <v-form ref=\"loginFormRef\" v-model=\"valid\">\n              <v-card-text class=\"mt-5\">\n                <v-text-field\n                  v-model=\"formdata.username\"\n                  hint=\"至少4个字符\"\n                  counter=\"12\"\n                  :rules=\"nameRules\"\n                  label=\"请输入用户名\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"formdata.password\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  :rules=\"passwordRules\"\n                  label=\"请输入密码\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-card-text>\n              <v-card-actions class=\"justify-end\">\n                <v-btn text @click=\"login\">确定</v-btn>\n                <v-btn text @click=\"dialog.value = false\">取消</v-btn>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </template>\n      </v-dialog>\n\n      <v-dialog max-width=\"800\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-if=\"!headers.username\" text dark v-bind=\"attrs\" v-on=\"on\">注册</v-btn>\n        </template>\n        <template v-slot:default=\"dialog\">\n          <v-form ref=\"registerformRef\" v-model=\"registerformvalid\">\n            <v-card>\n              <v-toolbar color=\"indigo darken-2\" dark>欢迎注册</v-toolbar>\n              <v-card-text class=\"mt-5\">\n                <v-text-field\n                  v-model=\"formdata.username\"\n                  hint=\"至少4个字符\"\n                  counter=\"12\"\n                  :rules=\"nameRules\"\n                  label=\"请输入用户名\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"formdata.password\"\n                  :rules=\"passwordRules\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  label=\"请输入密码\"\n                  type=\"password\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"checkPassword\"\n                  :rules=\"checkPasswordRules\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  label=\"请确认密码\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-card-text>\n              <v-card-actions class=\"justify-end\">\n                <v-btn text @click=\"registerUser\">确定</v-btn>\n                <v-btn text @click=\"dialog.value = false\">取消</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-form>\n        </template>\n      </v-dialog>\n    </v-app-bar>\n\n    <v-navigation-drawer v-model=\"drawer\" color=\"indigo\" dark app temporary>\n      <v-list>\n        <v-list-item-title>\n          <v-btn href=\"/\" dark text>\n            <v-icon small>mdi-home</v-icon>首页\n          </v-btn>\n        </v-list-item-title>\n\n        <v-list-item\n          v-model=\"group\"\n          active-class=\"deep-purple--text text--accent-4\"\n          v-for=\"item in cateList\"\n          :key=\"item.id\"\n        >\n          <v-list-item-title>\n            <v-btn dark text @click=\"gotoCate(item.id)\">{{ item.name }}</v-btn>\n          </v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      drawer: false,\n      group: null,\n      valid: true,\n      registerformvalid: true,\n      cateList: [],\n      searchName: '',\n      formdata: {\n        username: '',\n        password: ''\n      },\n      checkPassword: '',\n      dialog: false,\n      headers: {\n        Authorization: '',\n        username: ''\n      },\n      nameRules: [\n        (v) => !!v || '用户名不能为空',\n        (v) =>\n          (v && v.length >= 4 && v.length <= 12) ||\n          '用户名必须在4到12个字符之间'\n      ],\n      passwordRules: [\n        (v) => !!v || '密码不能为空',\n        (v) =>\n          (v && v.length >= 6 && v.length <= 20) || '密码必须在6到20个字符之间'\n      ],\n      checkPasswordRules: [\n        (v) => !!v || '密码不能为空',\n        (v) =>\n          (v && v.length >= 6 && v.length <= 20) || '密码必须在6到20个字符之间',\n        (v) => v === this.formdata.password || '密码两次输入不一致，请检查'\n      ]\n    }\n  },\n  watch: {\n    group() {\n      this.drawer = false\n    }\n  },\n  created() {\n    this.GetCateList()\n  },\n  mounted() {\n    this.headers = {\n      Authorization: `Bearer ${window.sessionStorage.getItem('token')}`,\n      username: window.sessionStorage.getItem('username')\n    }\n  },\n  methods: {\n    // 获取分类\n    async GetCateList() {\n      const { data: res } = await this.$http.get('category')\n      this.cateList = res.data\n    },\n\n    // 查找文章标题\n    searchTitle(title) {\n      if (title.length == 0) return this.$message.error('你还没填入搜索内容哦')\n      this.$router.push(`/search/${title}`)\n    },\n\n    gotoCate(cid) {\n      this.$router.push(`/category/${cid}`).catch((err) => err)\n    },\n    // 登录\n    async login() {\n      if (!this.$refs.loginFormRef.validate())\n        return this.$message.error('输入数据非法，请检查输入的用户名和密码')\n      const { data: res } = await this.$http.post('loginfront', this.formdata)\n      if (res.status !== 200) return this.$message.error(res.message)\n      window.sessionStorage.setItem('username', res.data)\n      window.sessionStorage.setItem('user_id', res.id)\n      this.$message.success('登录成功')\n      this.$router.go(0)\n    },\n\n    // 退出\n    loginout() {\n      window.sessionStorage.clear('token')\n      window.sessionStorage.clear('username')\n      this.$message.success('退出成功')\n      this.$router.go(0)\n    },\n\n    // 注册\n    async registerUser() {\n      if (!this.$refs.registerformRef.validate())\n        return this.$message.error('输入数据非法，请检查输入的用户名和密码')\n      const { data: res } = await this.$http.post('user/add', {\n        username: this.formdata.username,\n        password: this.formdata.password,\n        role: 2\n      })\n      if (res.status !== 200) return this.$message.error(res.message)\n      this.$message.success('注册成功')\n      this.$router.go(0)\n    }\n  }\n}\n</script>\n\n<style></style>\n"]}]}