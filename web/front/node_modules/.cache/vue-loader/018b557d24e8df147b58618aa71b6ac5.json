{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\TopBar.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\TopBar.vue","mtime":1659596472234},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1659587649729},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1659587650472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZHJhd2VyOiBmYWxzZSwKICAgICAgZ3JvdXA6IG51bGwsCiAgICAgIHZhbGlkOiB0cnVlLAogICAgICByZWdpc3RlcmZvcm12YWxpZDogdHJ1ZSwKICAgICAgY2F0ZUxpc3Q6IFtdLAogICAgICBzZWFyY2hOYW1lOiAiIiwKICAgICAgZm9ybWRhdGE6IHsKICAgICAgICB1c2VybmFtZTogIiIsCiAgICAgICAgcGFzc3dvcmQ6ICIiLAogICAgICB9LAogICAgICBjaGVja1Bhc3N3b3JkOiAiIiwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgaGVhZGVyczogewogICAgICAgIEF1dGhvcml6YXRpb246ICIiLAogICAgICAgIHVzZXJuYW1lOiAiIiwKICAgICAgfSwKICAgICAgbmFtZVJ1bGVzOiBbCiAgICAgICAgKHYpID0+ICEhdiB8fCAi55So5oi35ZCN5LiN6IO95Li656m6IiwKICAgICAgICAodikgPT4KICAgICAgICAgICh2ICYmIHYubGVuZ3RoID49IDQgJiYgdi5sZW5ndGggPD0gMTIpIHx8CiAgICAgICAgICAi55So5oi35ZCN5b+F6aG75ZyoNOWIsDEy5Liq5a2X56ym5LmL6Ze0IiwKICAgICAgXSwKICAgICAgcGFzc3dvcmRSdWxlczogWwogICAgICAgICh2KSA9PiAhIXYgfHwgIuWvhueggeS4jeiDveS4uuepuiIsCiAgICAgICAgKHYpID0+CiAgICAgICAgICAodiAmJiB2Lmxlbmd0aCA+PSA2ICYmIHYubGVuZ3RoIDw9IDIwKSB8fCAi5a+G56CB5b+F6aG75ZyoNuWIsDIw5Liq5a2X56ym5LmL6Ze0IiwKICAgICAgXSwKICAgICAgY2hlY2tQYXNzd29yZFJ1bGVzOiBbCiAgICAgICAgKHYpID0+ICEhdiB8fCAi5a+G56CB5LiN6IO95Li656m6IiwKICAgICAgICAodikgPT4KICAgICAgICAgICh2ICYmIHYubGVuZ3RoID49IDYgJiYgdi5sZW5ndGggPD0gMjApIHx8ICLlr4bnoIHlv4XpobvlnKg25YiwMjDkuKrlrZfnrKbkuYvpl7QiLAogICAgICAgICh2KSA9PiB2ID09PSB0aGlzLmZvcm1kYXRhLnBhc3N3b3JkIHx8ICLlr4bnoIHkuKTmrKHovpPlhaXkuI3kuIDoh7TvvIzor7fmo4Dmn6UiLAogICAgICBdLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBncm91cCgpIHsKICAgICAgdGhpcy5kcmF3ZXIgPSBmYWxzZTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5HZXRDYXRlTGlzdCgpOwogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuaGVhZGVycyA9IHsKICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke3dpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpfWAsCiAgICAgIHVzZXJuYW1lOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKSwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyDojrflj5bliIbnsbsKICAgIGFzeW5jIEdldENhdGVMaXN0KCkgewogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoImNhdGVnb3J5L2dldGNhdGVnb3J5cyIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHBhZ2VzaXplOiAtMSwKICAgICAgICAgIHBhZ2VudW06IC0xLAogICAgICAgIH0sCiAgICAgIH0pOwogICAgICB0aGlzLmNhdGVMaXN0ID0gcmVzLmRhdGE7CiAgICB9LAoKICAgIC8vIOafpeaJvuaWh+eroOagh+mimAogICAgc2VhcmNoVGl0bGUodGl0bGUpIHsKICAgICAgaWYgKHRpdGxlLmxlbmd0aCA9PSAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcigi5L2g6L+Y5rKh5aGr5YWl5pCc57Si5YaF5a655ZOmIik7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvc2VhcmNoLyR7dGl0bGV9YCk7CiAgICB9LAoKICAgIGdvdG9DYXRlKGNpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChgL2NhdGVnb3J5LyR7Y2lkfWApLmNhdGNoKChlcnIpID0+IGVycik7CiAgICB9LAogICAgLy8g55m75b2VCiAgICBhc3luYyBsb2dpbigpIHsKICAgICAgaWYgKCF0aGlzLiRyZWZzLmxvZ2luRm9ybVJlZi52YWxpZGF0ZSgpKQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKCLovpPlhaXmlbDmja7pnZ7ms5XvvIzor7fmo4Dmn6XovpPlhaXnmoTnlKjmiLflkI3lkozlr4bnoIEiKTsKICAgICAgY29uc3QgeyBkYXRhOiByZXMgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgibG9naW5mcm9udCIsIHRoaXMuZm9ybWRhdGEpOwogICAgICBpZiAocmVzLnN0YXR1cyAhPT0gMjAwKSByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSk7CiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VybmFtZSIsIHJlcy51c2VybmFtZSk7CiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJ1c2VyX2lkIiwgcmVzLnVzZXJfaWQpOwogICAgICBhbGVydCgi55m75b2V5oiQ5YqfIikKICAgICAgdGhpcy4kcm91dGVyLmdvKDApOwogICAgfSwKCiAgICAvLyDpgIDlh7oKICAgIGxvZ2lub3V0KCkgewogICAgICB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuY2xlYXIoInRva2VuIik7CiAgICAgIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5jbGVhcigidXNlcm5hbWUiKTsKICAgICAgYWxlcnQoIumAgOWHuuaIkOWKnyIpOwogICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICB9LAoKICAgIC8vIOazqOWGjAogICAgYXN5bmMgcmVnaXN0ZXJVc2VyKCkgewogICAgICBpZiAoIXRoaXMuJHJlZnMucmVnaXN0ZXJmb3JtUmVmLnZhbGlkYXRlKCkpCiAgICAgICAgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIui+k+WFpeaVsOaNrumdnuazle+8jOivt+ajgOafpei+k+WFpeeahOeUqOaIt+WQjeWSjOWvhueggSIpOwogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy4kaHR0cC5wb3N0KCJ1c2VyL2FkZCIsIHsKICAgICAgICB1c2VybmFtZTogdGhpcy5mb3JtZGF0YS51c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogdGhpcy5mb3JtZGF0YS5wYXNzd29yZCwKICAgICAgICByb2xlOiAyLAogICAgICB9KTsKICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICBhbGVydCgi5rOo5YaM5oiQ5YqfIik7CgogICAgICB0aGlzLiRyb3V0ZXIuZ28oMCk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["TopBar.vue"],"names":[],"mappings":";AAkKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"TopBar.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <v-app-bar mobileBreakpoint=\"sm\" app dark flat color=\"indigo darken-2\">\n      <v-app-bar-nav-icon\n        dark\n        class=\"hidden-md-and-up\"\n        @click.stop=\"drawer = !drawer\"\n      ></v-app-bar-nav-icon>\n      <v-toolbar-title>\n        <v-app-bar-nav-icon class=\"mx-15 hidden-md-and-down\">\n          <v-avatar size=\"35\" color=\"grey\">\n            <img src=\"../assets/logo.png\" alt />\n          </v-avatar>\n        </v-app-bar-nav-icon>\n      </v-toolbar-title>\n\n      <v-tabs dark center-active centered class=\"hidden-sm-and-down\">\n        <v-tab @click=\"$router.push('/')\">首页</v-tab>\n        <v-tab\n          v-for=\"item in cateList\"\n          :key=\"item.id\"\n          text\n          @click=\"gotoCate(item.id)\"\n          >{{ item.name }}</v-tab\n        >\n      </v-tabs>\n\n      <v-spacer></v-spacer>\n\n      <v-responsive class=\"hidden-sm-and-down\" color=\"white\">\n        <v-text-field\n          dense\n          flat\n          hide-details\n          solo-inverted\n          rounded\n          placeholder=\"请输入文章标题查找\"\n          dark\n          append-icon=\"mdi-text-search\"\n          v-model=\"searchName\"\n          @change=\"searchTitle(searchName)\"\n        ></v-text-field>\n      </v-responsive>\n\n      <v-dialog max-width=\"800\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-if=\"!headers.username\" text dark v-bind=\"attrs\" v-on=\"on\"\n            >请登录</v-btn\n          >\n\n          <v-btn v-if=\"headers.username\" text dark\n            >欢迎你！{{ headers.username }}</v-btn\n          >\n          <v-btn\n            class=\"hidden-md-and-down\"\n            v-if=\"headers.username\"\n            text\n            dark\n            @click=\"loginout\"\n            >退出</v-btn\n          >\n        </template>\n\n        <template v-slot:default=\"dialog\">\n          <v-card>\n            <v-toolbar color=\"indigo darken-2\" dark>请登录</v-toolbar>\n            <v-form ref=\"loginFormRef\" v-model=\"valid\">\n              <v-card-text class=\"mt-5\">\n                <v-text-field\n                  v-model=\"formdata.username\"\n                  hint=\"至少4个字符\"\n                  counter=\"12\"\n                  :rules=\"nameRules\"\n                  label=\"请输入用户名\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"formdata.password\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  :rules=\"passwordRules\"\n                  label=\"请输入密码\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-card-text>\n              <v-card-actions class=\"justify-end\">\n                <v-btn text @click=\"login\">确定</v-btn>\n                <v-btn text @click=\"dialog.value = false\">取消</v-btn>\n              </v-card-actions>\n            </v-form>\n          </v-card>\n        </template>\n      </v-dialog>\n\n      <v-dialog max-width=\"800\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn v-if=\"!headers.username\" text dark v-bind=\"attrs\" v-on=\"on\"\n            >注册</v-btn\n          >\n        </template>\n        <template v-slot:default=\"dialog\">\n          <v-form ref=\"registerformRef\" v-model=\"registerformvalid\">\n            <v-card>\n              <v-toolbar color=\"indigo darken-2\" dark>欢迎注册</v-toolbar>\n              <v-card-text class=\"mt-5\">\n                <v-text-field\n                  v-model=\"formdata.username\"\n                  hint=\"至少4个字符\"\n                  counter=\"12\"\n                  :rules=\"nameRules\"\n                  label=\"请输入用户名\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"formdata.password\"\n                  :rules=\"passwordRules\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  label=\"请输入密码\"\n                  type=\"password\"\n                ></v-text-field>\n                <v-text-field\n                  v-model=\"checkPassword\"\n                  :rules=\"checkPasswordRules\"\n                  hint=\"至少6个字符\"\n                  counter=\"20\"\n                  label=\"请确认密码\"\n                  type=\"password\"\n                ></v-text-field>\n              </v-card-text>\n              <v-card-actions class=\"justify-end\">\n                <v-btn text @click=\"registerUser\">确定</v-btn>\n                <v-btn text @click=\"dialog.value = false\">取消</v-btn>\n              </v-card-actions>\n            </v-card>\n          </v-form>\n        </template>\n      </v-dialog>\n    </v-app-bar>\n\n    <v-navigation-drawer v-model=\"drawer\" color=\"indigo\" dark app temporary>\n      <v-list>\n        <v-list-item-title>\n          <v-btn href=\"/\" dark text>\n            <v-icon small>mdi-home</v-icon>首页\n          </v-btn>\n        </v-list-item-title>\n\n        <v-list-item\n          v-model=\"group\"\n          active-class=\"deep-purple--text text--accent-4\"\n          v-for=\"item in cateList\"\n          :key=\"item.id\"\n        >\n          <v-list-item-title>\n            <v-btn dark text @click=\"gotoCate(item.id)\">{{ item.name }}</v-btn>\n          </v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      drawer: false,\n      group: null,\n      valid: true,\n      registerformvalid: true,\n      cateList: [],\n      searchName: \"\",\n      formdata: {\n        username: \"\",\n        password: \"\",\n      },\n      checkPassword: \"\",\n      dialog: false,\n      headers: {\n        Authorization: \"\",\n        username: \"\",\n      },\n      nameRules: [\n        (v) => !!v || \"用户名不能为空\",\n        (v) =>\n          (v && v.length >= 4 && v.length <= 12) ||\n          \"用户名必须在4到12个字符之间\",\n      ],\n      passwordRules: [\n        (v) => !!v || \"密码不能为空\",\n        (v) =>\n          (v && v.length >= 6 && v.length <= 20) || \"密码必须在6到20个字符之间\",\n      ],\n      checkPasswordRules: [\n        (v) => !!v || \"密码不能为空\",\n        (v) =>\n          (v && v.length >= 6 && v.length <= 20) || \"密码必须在6到20个字符之间\",\n        (v) => v === this.formdata.password || \"密码两次输入不一致，请检查\",\n      ],\n    };\n  },\n  watch: {\n    group() {\n      this.drawer = false;\n    },\n  },\n  created() {\n    this.GetCateList();\n  },\n  mounted() {\n    this.headers = {\n      Authorization: `Bearer ${window.sessionStorage.getItem(\"token\")}`,\n      username: window.sessionStorage.getItem(\"username\"),\n    };\n  },\n  methods: {\n    // 获取分类\n    async GetCateList() {\n      const { data: res } = await this.$http.get(\"category/getcategorys\", {\n        params: {\n          pagesize: -1,\n          pagenum: -1,\n        },\n      });\n      this.cateList = res.data;\n    },\n\n    // 查找文章标题\n    searchTitle(title) {\n      if (title.length == 0) return this.$message.error(\"你还没填入搜索内容哦\");\n      this.$router.push(`/search/${title}`);\n    },\n\n    gotoCate(cid) {\n      this.$router.push(`/category/${cid}`).catch((err) => err);\n    },\n    // 登录\n    async login() {\n      if (!this.$refs.loginFormRef.validate())\n        return this.$message.error(\"输入数据非法，请检查输入的用户名和密码\");\n      const { data: res } = await this.$http.post(\"loginfront\", this.formdata);\n      if (res.status !== 200) return this.$message.error(res.message);\n      window.sessionStorage.setItem(\"username\", res.username);\n      window.sessionStorage.setItem(\"user_id\", res.user_id);\n      alert(\"登录成功\")\n      this.$router.go(0);\n    },\n\n    // 退出\n    loginout() {\n      window.sessionStorage.clear(\"token\");\n      window.sessionStorage.clear(\"username\");\n      alert(\"退出成功\");\n      this.$router.go(0);\n    },\n\n    // 注册\n    async registerUser() {\n      if (!this.$refs.registerformRef.validate())\n        return this.$message.error(\"输入数据非法，请检查输入的用户名和密码\");\n      const { data: res } = await this.$http.post(\"user/add\", {\n        username: this.formdata.username,\n        password: this.formdata.password,\n        role: 2,\n      });\n      if (res.status !== 200) return this.$message.error(res.message);\n      alert(\"注册成功\");\n\n      this.$router.go(0);\n    },\n  },\n};\n</script>\n\n<style></style>\n"]}]}