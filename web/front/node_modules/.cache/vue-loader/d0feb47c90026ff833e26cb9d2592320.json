{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\Details.vue?vue&type=style&index=0&id=1cb73342&scoped=true&lang=css&","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\Details.vue","mtime":1651118941000},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\css-loader\\dist\\cjs.js","mtime":1659587649177},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1659587650735},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\postcss-loader\\src\\index.js","mtime":1659587649725},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1659587650472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5jb250ZW50ID4+PiBkaXYsCmltZywKc3BhbiB7CiAgd2lkdGg6IGF1dG87CiAgbWF4LXdpZHRoOiAxMDAlOwp9CgouY29udGVudCA+Pj4gcHJlLApjb2RlIHsKICBtYXJnaW46IDEwcHg7CiAgcGFkZGluZzogMTRweDsKICBvdmVyZmxvdzogYXV0bzsKICBmb250LXNpemU6IDg1JTsKICBsaW5lLWhlaWdodDogMS40NTsKICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDI3LCAzMSwgMzUsIDAuMDUpOwogIGJvcmRlci1sZWZ0LXdpZHRoOiAwLjVyZW07CiAgYm9yZGVyLWxlZnQtc3R5bGU6IHNvbGlkOwogIGJvcmRlci1jb2xvcjogIzMwM2Y5ZjsKfQo="},{"version":3,"sources":["Details.vue"],"names":[],"mappings":";AAoJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Details.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex justify-center pa-3 ma-1 text-h4 font-weight-bold\">{{ artInfo.title }}</div>\n    <div class=\"d-flex justify-center align-center\">\n      <div class=\"d-flex mx-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"indigo\" small>\n          {{\n          'mdi-calendar-month'\n          }}\n        </v-icon>\n        <span>{{ artInfo.CreatedAt | dateformat('YYYY-MM-DD') }}</span>\n      </div>\n      <div class=\"d-flex mr-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"pink\" small>{{ 'mdi-comment' }}</v-icon>\n        <span>{{ total }}</span>\n      </div>\n      <div class=\"d-flex mr-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"green\" small>{{ 'mdi-eye' }}</v-icon>\n        <span>{{ artInfo.read_count }}</span>\n      </div>\n    </div>\n    <v-divider class=\"pa-3 ma-3\"></v-divider>\n    <v-alert\n      class=\"ma-4\"\n      elevation=\"1\"\n      color=\"indigo\"\n      dark\n      border=\"left\"\n      outlined\n    >{{ artInfo.desc }}</v-alert>\n\n    <div v-html=\"artInfo.content\" class=\"content ma-5 pa-3 text-justify\"></div>\n\n    <v-divider class=\"ma-5\"></v-divider>\n    <v-sheet class=\"ma-3 pa-3\">\n      <div>\n        <v-list\n          outlined\n          class=\"ma-3 pa-3\"\n          v-for=\"item in commentList\"\n          :key=\"item.ID\"\n          v-show=\"item.status === 1\"\n        >\n          <template>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>\n                  {{ item.username }}\n                  {{\n                  item.CreatedAt | dateformat('YYYY-MM-DD')\n                  }}\n                </v-list-item-title>\n                <v-list-item-subtitle class=\"mr-3\">\n                  {{\n                  item.content\n                  }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n            </v-list-item>\n          </template>\n        </v-list>\n      </div>\n      <div class=\"text-center\" v-if=\"commentList\">\n        <v-pagination\n          class=\"my-2\"\n          total-visible=\"7\"\n          v-model=\"queryParam.pagenum\"\n          :length=\"Math.ceil(total / queryParam.pagesize)\"\n          @input=\"getCommentList()\"\n        ></v-pagination>\n      </div>\n      <div>\n        <template>\n          <v-card flat>\n            <v-alert v-if=\"!headers.username\" class=\"ma-3\" dense outlined type=\"error\">你还未登录，请登录后留言</v-alert>\n            <div v-if=\"headers.username\">\n              <v-textarea class=\"mx-3\" outlined v-model=\"comment.content\"></v-textarea>\n              <v-btn class=\"ml-3 mb-1\" dark color=\"indigo\" small @click=\"pushComment()\">确定</v-btn>\n            </div>\n          </v-card>\n        </template>\n      </div>\n    </v-sheet>\n  </div>\n</template>\n<script>\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      artInfo: {},\n      commentList: [],\n      comment: {\n        content: ''\n      },\n      total: 0,\n      headers: {\n        username: '',\n        user_id: 0\n      },\n      queryParam: {\n        pagesize: 5,\n        pagenum: 1\n      }\n    }\n  },\n  created() {\n    this.getArtInfo()\n    this.getCommentList()\n    this.headers = {\n      username: window.sessionStorage.getItem('username'),\n      user_id: window.sessionStorage.getItem('user_id')\n    }\n  },\n  methods: {\n    // 查询文章\n    async getArtInfo() {\n      const { data: res } = await this.$http.get(`article/info/${this.id}`)\n      this.artInfo = res.data\n      window.sessionStorage.setItem('title', this.artInfo.title)\n    },\n    // 获取评论\n    async getCommentList() {\n      const { data: res } = await this.$http.get(`commentfront/${this.id}`, {\n        params: {\n          pagesize: this.queryParam.pagesize,\n          pagenum: this.queryParam.pagenum\n        }\n      })\n      this.commentList = res.data\n      this.total = res.total\n    },\n    // 发送评论\n    async pushComment() {\n      const { data: res } = await this.$http.post('addcomment', {\n        article_id: parseInt(this.id),\n        content: this.comment.content,\n        user_id: parseInt(this.headers.user_id),\n        username: this.headers.username\n      })\n      if (res.status !== 200) return this.$message.error(res.message)\n      this.$message.success('评论成功，待审核后显示')\n      this.$router.go(0)\n    }\n  }\n}\n</script>\n<style scoped>\n.content >>> div,\nimg,\nspan {\n  width: auto;\n  max-width: 100%;\n}\n\n.content >>> pre,\ncode {\n  margin: 10px;\n  padding: 14px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: rgba(27, 31, 35, 0.05);\n  border-left-width: 0.5rem;\n  border-left-style: solid;\n  border-color: #303f9f;\n}\n</style>\n"]}]}