{"remainingRequest":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\Details.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\src\\components\\Details.vue","mtime":1659759418975},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\babel.config.js","mtime":1659587772965},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\babel-loader\\lib\\index.js","mtime":1659587649729},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1659587648702},{"path":"C:\\Users\\wakk\\GolandProjects\\GinBlog\\web\\front\\node_modules\\vue-loader\\lib\\index.js","mtime":1659587650472}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2lkJ10sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhcnRJbmZvOiB7fSwKICAgICAgY29tbWVudExpc3Q6IFtdLAogICAgICBjb21tZW50OiB7CiAgICAgICAgY29udGVudDogJycKICAgICAgfSwKICAgICAgdG90YWw6IDAsCiAgICAgIGhlYWRlcnM6IHsKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgdXNlcl9pZDogMAogICAgICB9LAogICAgICBxdWVyeVBhcmFtOiB7CiAgICAgICAgcGFnZXNpemU6IDUsCiAgICAgICAgcGFnZW51bTogMQogICAgICB9CiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldEFydEluZm8oKTsKICAgIHRoaXMuZ2V0Q29tbWVudExpc3QoKTsKICAgIHRoaXMuaGVhZGVycyA9IHsKICAgICAgdXNlcm5hbWU6IHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpLAogICAgICB1c2VyX2lkOiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcl9pZCcpCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOafpeivouaWh+eroAogICAgYXN5bmMgZ2V0QXJ0SW5mbygpIHsKICAgICAgY29uc3QgewogICAgICAgIGRhdGE6IHJlcwogICAgICB9ID0gYXdhaXQgdGhpcy4kaHR0cC5nZXQoYGFydGljbGUvJHt0aGlzLmlkfWApOwogICAgICB0aGlzLmFydEluZm8gPSByZXMuZGF0YTsKICAgICAgd2luZG93LnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ3RpdHRsZScsIHRoaXMuYXJ0SW5mby50aXR0bGUpOwogICAgfSwKCiAgICAvLyDojrflj5bor4TorroKICAgIGFzeW5jIGdldENvbW1lbnRMaXN0KCkgewogICAgICBjb25zdCB7CiAgICAgICAgZGF0YTogcmVzCiAgICAgIH0gPSBhd2FpdCB0aGlzLiRodHRwLmdldChgY29tbWVudGZyb250LyR7dGhpcy5pZH1gLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlc2l6ZTogdGhpcy5xdWVyeVBhcmFtLnBhZ2VzaXplLAogICAgICAgICAgcGFnZW51bTogdGhpcy5xdWVyeVBhcmFtLnBhZ2VudW0KICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmNvbW1lbnRMaXN0ID0gcmVzLmRhdGE7CiAgICAgIHRoaXMudG90YWwgPSByZXMudG90YWw7CiAgICB9LAoKICAgIC8vIOWPkemAgeivhOiuugogICAgYXN5bmMgcHVzaENvbW1lbnQoKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhOiByZXMKICAgICAgfSA9IGF3YWl0IHRoaXMuJGh0dHAucG9zdCgnYWRkY29tbWVudCcsIHsKICAgICAgICBhcnRpY2xlX2lkOiBwYXJzZUludCh0aGlzLmlkKSwKICAgICAgICBjb250ZW50OiB0aGlzLmNvbW1lbnQuY29udGVudCwKICAgICAgICB1c2VyX2lkOiBwYXJzZUludCh0aGlzLmhlYWRlcnMudXNlcl9pZCksCiAgICAgICAgdXNlcm5hbWU6IHRoaXMuaGVhZGVycy51c2VybmFtZQogICAgICB9KTsKICAgICAgaWYgKHJlcy5zdGF0dXMgIT09IDIwMCkgcmV0dXJuIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLm1lc3NhZ2UpOwogICAgICBhbGVydCgn6K+E6K665oiQ5Yqf77yM5b6F5a6h5qC45ZCO5pi+56S6Jyk7CiAgICAgIHRoaXMuJHJvdXRlci5nbygwKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAsFA;EACAA,aADA;;EAEAC;IACA;MACAC,WADA;MAEAC,eAFA;MAGAC;QACAC;MADA,CAHA;MAMAC,QANA;MAOAC;QACAC,YADA;QAEAC;MAFA,CAPA;MAWAC;QACAC,WADA;QAEAC;MAFA;IAXA;EAgBA,CAnBA;;EAoBAC;IACA;IACA;IACA;MACAL,mDADA;MAEAC;IAFA;EAIA,CA3BA;;EA4BAK;IACA;IACA;MACA;QAAAb;MAAA;MACA;MACAc;IACA,CANA;;IAOA;IACA;MACA;QAAAd;MAAA;QACAe;UACAL,kCADA;UAEAC;QAFA;MADA;MAMA;MACA;IACA,CAjBA;;IAkBA;IACA;MACA;QAAAX;MAAA;QACAgB,6BADA;QAEAZ,6BAFA;QAGAI,uCAHA;QAIAD;MAJA;MAMA;MACAU;MACA;IACA;;EA7BA;AA5BA","names":["props","data","artInfo","commentList","comment","content","total","headers","username","user_id","queryParam","pagesize","pagenum","created","methods","window","params","article_id","alert"],"sourceRoot":"src/components","sources":["Details.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"d-flex justify-center pa-3 ma-1 text-h4 font-weight-bold\">{{ artInfo.tittle }}</div>\n    <div class=\"d-flex justify-center align-center\">\n      <div class=\"d-flex mx-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"indigo\" small>\n          {{\n          'mdi-calendar-month'\n          }}\n        </v-icon>\n        <span>{{ artInfo.CreatedAt | dateformat('YYYY-MM-DD') }}</span>\n      </div>\n      <div class=\"d-flex mr-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"pink\" small>{{ 'mdi-comment' }}</v-icon>\n        <span>{{ total }}</span>\n      </div>\n      <div class=\"d-flex mr-10 justify-center\">\n        <v-icon class=\"mr-1\" color=\"green\" small>{{ 'mdi-eye' }}</v-icon>\n        <span>{{ artInfo.read_count }}</span>\n      </div>\n    </div>\n    <v-divider class=\"pa-3 ma-3\"></v-divider>\n    <v-alert\n      class=\"ma-4\"\n      elevation=\"1\"\n      color=\"indigo\"\n      dark\n      border=\"left\"\n      outlined\n    >{{ artInfo.desc }}</v-alert>\n\n    <div v-html=\"artInfo.content\" class=\"content ma-5 pa-3 text-justify\"></div>\n\n    <v-divider class=\"ma-5\"></v-divider>\n    <v-sheet class=\"ma-3 pa-3\">\n      <div>\n        <v-list\n          outlined\n          class=\"ma-3 pa-3\"\n          v-for=\"item in commentList\"\n          :key=\"item.ID\"\n          v-show=\"item.status === 1\"\n        >\n          <template>\n            <v-list-item>\n              <v-list-item-content>\n                <v-list-item-title>\n                  {{ item.username }}\n                  {{\n                  item.CreatedAt | dateformat('YYYY-MM-DD')\n                  }}\n                </v-list-item-title>\n                <v-list-item-subtitle class=\"mr-3\">\n                  {{\n                  item.content\n                  }}\n                </v-list-item-subtitle>\n              </v-list-item-content>\n            </v-list-item>\n          </template>\n        </v-list>\n      </div>\n      <div class=\"text-center\" v-if=\"commentList\">\n        <v-pagination\n          class=\"my-2\"\n          total-visible=\"7\"\n          v-model=\"queryParam.pagenum\"\n          :length=\"Math.ceil(total / queryParam.pagesize)\"\n          @input=\"getCommentList()\"\n        ></v-pagination>\n      </div>\n      <div>\n        <template>\n          <v-card flat>\n            <v-alert v-if=\"!headers.username\" class=\"ma-3\" dense outlined type=\"error\">你还未登录，请登录后留言</v-alert>\n            <div v-if=\"headers.username\">\n              <v-textarea class=\"mx-3\" outlined v-model=\"comment.content\"></v-textarea>\n              <v-btn class=\"ml-3 mb-1\" dark color=\"indigo\" small @click=\"pushComment()\">确定</v-btn>\n            </div>\n          </v-card>\n        </template>\n      </div>\n    </v-sheet>\n  </div>\n</template>\n<script>\nexport default {\n  props: ['id'],\n  data() {\n    return {\n      artInfo: {},\n      commentList: [],\n      comment: {\n        content: ''\n      },\n      total: 0,\n      headers: {\n        username: '',\n        user_id: 0\n      },\n      queryParam: {\n        pagesize: 5,\n        pagenum: 1\n      }\n    }\n  },\n  created() {\n    this.getArtInfo()\n    this.getCommentList()\n    this.headers = {\n      username: window.sessionStorage.getItem('username'),\n      user_id: window.sessionStorage.getItem('user_id')\n    }\n  },\n  methods: {\n    // 查询文章\n    async getArtInfo() {\n      const { data: res } = await this.$http.get(`article/${this.id}`)\n      this.artInfo = res.data\n      window.sessionStorage.setItem('tittle', this.artInfo.tittle)\n    },\n    // 获取评论\n    async getCommentList() {\n      const { data: res } = await this.$http.get(`commentfront/${this.id}`, {\n        params: {\n          pagesize: this.queryParam.pagesize,\n          pagenum: this.queryParam.pagenum\n        }\n      })\n      this.commentList = res.data\n      this.total = res.total\n    },\n    // 发送评论\n    async pushComment() {\n      const { data: res } = await this.$http.post('addcomment', {\n        article_id: parseInt(this.id),\n        content: this.comment.content,\n        user_id: parseInt(this.headers.user_id),\n        username: this.headers.username\n      })\n      if (res.status !== 200) return this.$message.error(res.message)\n      alert('评论成功，待审核后显示')\n      this.$router.go(0)\n    }\n  }\n}\n</script>\n<style scoped>\n.content >>> div,\nimg,\nspan {\n  width: auto;\n  max-width: 100%;\n}\n\n.content >>> pre,\ncode {\n  margin: 10px;\n  padding: 14px;\n  overflow: auto;\n  font-size: 85%;\n  line-height: 1.45;\n  background-color: rgba(27, 31, 35, 0.05);\n  border-left-width: 0.5rem;\n  border-left-style: solid;\n  border-color: #303f9f;\n}\n</style>\n"]}]}